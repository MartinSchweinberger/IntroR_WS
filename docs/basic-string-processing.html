<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 5 Basic String Processing | Introduction to R for Social Science</title>
  <meta name="description" content="Section 5 Basic String Processing | Introduction to R for Social Science" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 5 Basic String Processing | Introduction to R for Social Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 5 Basic String Processing | Introduction to R for Social Science" />
  
  
  

<meta name="author" content="Martin Schweinberger" />


<meta name="date" content="2024-06-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exercise-1-introducing-text-processing.html"/>
<link rel="next" href="advanced-string-processing.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="libs/klippy-0.0.0.9500/js/klippy.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> General Information</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i><b>1.1</b> Abstract</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#timeline"><i class="fa fa-check"></i><b>1.2</b> Timeline</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#resources"><i class="fa fa-check"></i><b>1.3</b> Resources</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#audience"><i class="fa fa-check"></i><b>1.4</b> Audience</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#what-to-do-before-the-workshop"><i class="fa fa-check"></i><b>1.5</b> What to do before the workshop</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#getting-started"><i class="fa fa-check"></i><b>1.6</b> Getting started</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#preparation"><i class="fa fa-check"></i><b>2.2</b> Preparation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#before-you-start-working-with-rrstudio-folder-structure-and-r-projects"><i class="fa fa-check"></i><b>2.2.1</b> Before you start working with R/RStudio (Folder Structure and R projects)</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#create-a-folder-for-your-project"><i class="fa fa-check"></i><b>2.2.2</b> Create a folder for your project</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#open-rstudio"><i class="fa fa-check"></i><b>2.2.3</b> Open RStudio</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-projects"><i class="fa fa-check"></i><b>2.2.4</b> R Projects</a></li>
<li class="chapter" data-level="2.2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-notebooks"><i class="fa fa-check"></i><b>2.2.5</b> R Notebooks</a></li>
<li class="chapter" data-level="2.2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#updating-r"><i class="fa fa-check"></i><b>2.2.6</b> Updating R</a></li>
<li class="chapter" data-level="2.2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#optimizing-r-project-options"><i class="fa fa-check"></i><b>2.2.7</b> Optimizing R project options</a></li>
<li class="chapter" data-level="2.2.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started-with-r-notebooks"><i class="fa fa-check"></i><b>2.2.8</b> Getting started with R Notebooks</a></li>
<li class="chapter" data-level="2.2.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-markdown"><i class="fa fa-check"></i><b>2.2.9</b> R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-and-rstudio-basics"><i class="fa fa-check"></i><b>2.3</b> R and RStudio Basics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#rstudio-panes"><i class="fa fa-check"></i><b>2.3.1</b> RStudio: Panes</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started-with-r"><i class="fa fa-check"></i><b>2.4</b> Getting started with R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#setting-up-an-r-session"><i class="fa fa-check"></i><b>2.4.1</b> Setting up an R session</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#packages"><i class="fa fa-check"></i><b>2.4.2</b> Packages</a></li>
<li class="chapter" data-level="2.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-help"><i class="fa fa-check"></i><b>2.4.3</b> Getting help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-text.html"><a href="working-with-text.html"><i class="fa fa-check"></i><b>3</b> Working with Text</a>
<ul>
<li class="chapter" data-level="3.1" data-path="working-with-text.html"><a href="working-with-text.html#functions-and-objects"><i class="fa fa-check"></i><b>3.1</b> Functions and Objects</a></li>
<li class="chapter" data-level="3.2" data-path="working-with-text.html"><a href="working-with-text.html#inspecting-data"><i class="fa fa-check"></i><b>3.2</b> Inspecting data</a></li>
<li class="chapter" data-level="3.3" data-path="working-with-text.html"><a href="working-with-text.html#loading-text-data"><i class="fa fa-check"></i><b>3.3</b> Loading text data</a></li>
<li class="chapter" data-level="3.4" data-path="working-with-text.html"><a href="working-with-text.html#saving-text-data"><i class="fa fa-check"></i><b>3.4</b> Saving text data</a></li>
<li class="chapter" data-level="3.5" data-path="working-with-text.html"><a href="working-with-text.html#piping"><i class="fa fa-check"></i><b>3.5</b> Piping</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exercise-1-introducing-text-processing.html"><a href="exercise-1-introducing-text-processing.html"><i class="fa fa-check"></i><b>4</b> Exercise 1: Introducing Text Processing</a></li>
<li class="chapter" data-level="5" data-path="basic-string-processing.html"><a href="basic-string-processing.html"><i class="fa fa-check"></i><b>5</b> Basic String Processing</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basic-string-processing.html"><a href="basic-string-processing.html#extracting-frequency-information-from-text"><i class="fa fa-check"></i><b>5.1</b> Extracting frequency information from text</a></li>
<li class="chapter" data-level="5.2" data-path="basic-string-processing.html"><a href="basic-string-processing.html#regular-expressions"><i class="fa fa-check"></i><b>5.2</b> Regular Expressions</a></li>
<li class="chapter" data-level="5.3" data-path="basic-string-processing.html"><a href="basic-string-processing.html#practice-regular-expressions"><i class="fa fa-check"></i><b>5.3</b> Practice: regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="advanced-string-processing.html"><a href="advanced-string-processing.html"><i class="fa fa-check"></i><b>6</b> Advanced String Processing</a>
<ul>
<li class="chapter" data-level="6.1" data-path="advanced-string-processing.html"><a href="advanced-string-processing.html#stemming"><i class="fa fa-check"></i><b>6.1</b> Stemming</a></li>
<li class="chapter" data-level="6.2" data-path="advanced-string-processing.html"><a href="advanced-string-processing.html#part-of-speech-tagging-and-dependency-parsing"><i class="fa fa-check"></i><b>6.2</b> Part-of-speech tagging and dependency parsing</a></li>
<li class="chapter" data-level="6.3" data-path="advanced-string-processing.html"><a href="advanced-string-processing.html#data-processing-chains"><i class="fa fa-check"></i><b>6.3</b> Data processing chains</a></li>
<li class="chapter" data-level="6.4" data-path="advanced-string-processing.html"><a href="advanced-string-processing.html#concordancing-and-kwics"><i class="fa fa-check"></i><b>6.4</b> Concordancing and KWICs</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html"><i class="fa fa-check"></i><b>7</b> Basics of Data Visualization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#basics-of-ggplot2-syntax"><i class="fa fa-check"></i><b>7.1</b> Basics of ggplot2 syntax</a></li>
<li class="chapter" data-level="7.2" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#line-plot"><i class="fa fa-check"></i><b>7.2</b> Line plot</a></li>
<li class="chapter" data-level="7.3" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#prettifying-plots"><i class="fa fa-check"></i><b>7.3</b> Prettifying plots</a></li>
<li class="chapter" data-level="7.4" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#combining-plots"><i class="fa fa-check"></i><b>7.4</b> Combining plots</a></li>
<li class="chapter" data-level="7.5" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#boxplots"><i class="fa fa-check"></i><b>7.5</b> Boxplots</a></li>
<li class="chapter" data-level="7.6" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#barplots"><i class="fa fa-check"></i><b>7.6</b> Barplots</a></li>
<li class="chapter" data-level="7.7" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#wordclouds"><i class="fa fa-check"></i><b>7.7</b> Wordclouds</a></li>
<li class="chapter" data-level="7.8" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#going-further"><i class="fa fa-check"></i><b>7.8</b> Going further</a></li>
<li class="chapter" data-level="7.9" data-path="basics-of-data-visualization.html"><a href="basics-of-data-visualization.html#ending-r-sessions"><i class="fa fa-check"></i><b>7.9</b> Ending R sessions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html"><i class="fa fa-check"></i><b>8</b> Introduction to Text Analysis with R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#what-is-text-analysis"><i class="fa fa-check"></i><b>8.1</b> What is Text Analysis?</a></li>
<li class="chapter" data-level="8.2" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#preparation-and-session-set-up"><i class="fa fa-check"></i><b>8.2</b> Preparation and session set up</a></li>
<li class="chapter" data-level="8.3" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#exercise-2-identifying-keywords-and-sentiments"><i class="fa fa-check"></i><b>8.3</b> Exercise 2: Identifying Keywords and Sentiments</a></li>
<li class="chapter" data-level="8.4" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#what-is-sentiment-analysis"><i class="fa fa-check"></i><b>8.4</b> What is Sentiment Analysis?</a></li>
<li class="chapter" data-level="8.5" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#exporting-the-results"><i class="fa fa-check"></i><b>8.5</b> Exporting the results</a></li>
<li class="chapter" data-level="8.6" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#summarizing-results"><i class="fa fa-check"></i><b>8.6</b> Summarizing results</a></li>
<li class="chapter" data-level="8.7" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#visualizing-results"><i class="fa fa-check"></i><b>8.7</b> Visualizing results</a></li>
<li class="chapter" data-level="8.8" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#identifying-important-emotives"><i class="fa fa-check"></i><b>8.8</b> Identifying important emotives</a></li>
<li class="chapter" data-level="8.9" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#dimensions-of-keyness"><i class="fa fa-check"></i><b>8.9</b> Dimensions of keyness</a></li>
<li class="chapter" data-level="8.10" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#identifying-keywords"><i class="fa fa-check"></i><b>8.10</b> Identifying keywords</a></li>
<li class="chapter" data-level="8.11" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#visualising-keywords"><i class="fa fa-check"></i><b>8.11</b> Visualising keywords</a></li>
<li class="chapter" data-level="8.12" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#data-preparation"><i class="fa fa-check"></i><b>8.12</b> Data preparation</a></li>
<li class="chapter" data-level="8.13" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#creating-a-matrix"><i class="fa fa-check"></i><b>8.13</b> Creating a matrix</a></li>
<li class="chapter" data-level="8.14" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#visualizing-networks"><i class="fa fa-check"></i><b>8.14</b> Visualizing Networks</a></li>
<li class="chapter" data-level="8.15" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#network-statistics"><i class="fa fa-check"></i><b>8.15</b> Network Statistics</a>
<ul>
<li class="chapter" data-level="8.15.1" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#degree-centrality"><i class="fa fa-check"></i><b>8.15.1</b> Degree centrality</a></li>
<li class="chapter" data-level="8.15.2" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#central-node"><i class="fa fa-check"></i><b>8.15.2</b> Central node</a></li>
<li class="chapter" data-level="8.15.3" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#betweenness-centrality"><i class="fa fa-check"></i><b>8.15.3</b> Betweenness centrality</a></li>
<li class="chapter" data-level="8.15.4" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#closeness"><i class="fa fa-check"></i><b>8.15.4</b> Closeness</a></li>
</ul></li>
<li class="chapter" data-level="8.16" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#exercise-3-manual-topic-modelling"><i class="fa fa-check"></i><b>8.16</b> Exercise 3: Manual Topic Modelling</a></li>
<li class="chapter" data-level="8.17" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#getting-started-with-topic-modelling"><i class="fa fa-check"></i><b>8.17</b> Getting started with Topic Modelling</a></li>
<li class="chapter" data-level="8.18" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#human-in-the-loop-topic-modelling"><i class="fa fa-check"></i><b>8.18</b> Human-in-the-loop Topic Modelling</a></li>
<li class="chapter" data-level="8.19" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#loading-and-preparing-data"><i class="fa fa-check"></i><b>8.19</b> Loading and preparing data</a></li>
<li class="chapter" data-level="8.20" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#initial-unsupervised-topic-model"><i class="fa fa-check"></i><b>8.20</b> Initial unsupervised topic model</a></li>
<li class="chapter" data-level="8.21" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#supervised-seeded-topic-model"><i class="fa fa-check"></i><b>8.21</b> Supervised, seeded topic model</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R for Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basic-string-processing" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Section 5</span> Basic String Processing<a href="basic-string-processing.html#basic-string-processing" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Before turning to more advanced string processing (in the context of computation, texts are referred to as strings) using the <code>stringr</code> package, let us just focus on some basic functions that are extremely useful when working with texts.</p>
<p>To practice working with texts, we will rename a shirt positive IMDB review and also generate a tokenized version of this review.</p>
<p><strong>Tokenizsation</strong>: Tokenization is the process of breaking down text into smaller units called tokens. These tokens can be symbols, words, phrases, sentences, or other meaningful elements (e.g. paragraphs). Tokenization is a fundamental step in natural language processing (NLP) and text analysis, as it allows for the text to be analysed and processed systematically..</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="basic-string-processing.html#cb24-1" tabindex="-1"></a>review <span class="ot">&lt;-</span> reviews_pos[<span class="dv">4</span>]</span>
<span id="cb24-2"><a href="basic-string-processing.html#cb24-2" tabindex="-1"></a>review_tok <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(review) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="fu">as.vector</span>()</span>
<span id="cb24-3"><a href="basic-string-processing.html#cb24-3" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb24-4"><a href="basic-string-processing.html#cb24-4" tabindex="-1"></a>review; <span class="fu">str</span>(review_tok)</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                 textpos1000 
## &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<pre><code>##  chr [1:58] &quot;Gary&quot; &quot;Busey&quot; &quot;is&quot; &quot;superb&quot; &quot;in&quot; &quot;this&quot; &quot;musical&quot; &quot;biography&quot; ...</code></pre>
<p>We can now start to check out functions that are useful and frequently applied to text data. We start by splitting text data.</p>
<p>To split texts, we can use the <code>str_split</code> function. However, there are two issues when using this (very useful) function:</p>
<ul>
<li><p>the pattern that we want to split on disappears</p></li>
<li><p>the output is a list (a special type of data format)</p></li>
</ul>
<p>To remedy these issues, we</p>
<ul>
<li><p>combine the <code>str_split</code> function with the <code>unlist</code> function</p></li>
<li><p>add something right at the beginning of the pattern that we use to split the text.
To add something to the beginning of the pattern that we want to split the text by, we use the <code>str_replace_all</code> function. The <code>str_replace_all</code> function takes three arguments, 1. the <strong>text</strong>, 2. the <strong>pattern</strong> that should be replaced, 3. the <strong>replacement</strong>. In the example below, we add <code>~~~</code> to the sequence <code>movie</code> and then split on the <code>~~~</code> rather than on the sequence “movie” (in other words, we replace <code>movie</code> with <code>~~~movie</code> and then split on <code>~~~</code>).</p></li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="basic-string-processing.html#cb27-1" tabindex="-1"></a><span class="co"># split text</span></span>
<span id="cb27-2"><a href="basic-string-processing.html#cb27-2" tabindex="-1"></a><span class="fu">str_split</span>(</span>
<span id="cb27-3"><a href="basic-string-processing.html#cb27-3" tabindex="-1"></a>  <span class="co"># attach ~~~ right before where we want to split (we want to split before the token &quot;movie&quot;)</span></span>
<span id="cb27-4"><a href="basic-string-processing.html#cb27-4" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(reviews_pos, <span class="st">&quot;movie&quot;</span>, <span class="st">&quot;~~~movie&quot;</span>),</span>
<span id="cb27-5"><a href="basic-string-processing.html#cb27-5" tabindex="-1"></a>    <span class="co"># define that we want to split by ~~~</span></span>
<span id="cb27-6"><a href="basic-string-processing.html#cb27-6" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="st">&quot;~~~&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="basic-string-processing.html#cb27-7" tabindex="-1"></a>  <span class="co"># unlist results</span></span>
<span id="cb27-8"><a href="basic-string-processing.html#cb27-8" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="ot">-&gt;</span> reviews_pos_split</span>
<span id="cb27-9"><a href="basic-string-processing.html#cb27-9" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb27-10"><a href="basic-string-processing.html#cb27-10" tabindex="-1"></a><span class="fu">nchar</span>(reviews_pos_split); <span class="fu">str</span>(reviews_pos_split)</span></code></pre></div>
<pre><code>##   [1] 1763  641  584  458  127  184 3847  152  685   30  105   92   43   27   11
##  [16]  716  465  417  262  107   59  747  370 1550  122 1693  714   45  726   80
##  [31]  224  906  250  521 1939 2708 1205 2572  819  717   28  109  211   31  554
##  [46]  289  914  440   65  561   62  196   33   55   40  200  121  616   82  135
##  [61]  293   47  280   21  232   89   99  353 2003  379   42   36   42  315  751
##  [76]   33   53  220 1147 1766   11  221   99  214  610   72   27  792  254  131
##  [91]  253   88  250  111   64   84  465  103   10  372
##  [ reached getOption(&quot;max.print&quot;) -- omitted 2747 entries ]</code></pre>
<pre><code>##  chr [1:2847] &quot;One of the other reviewers has mentioned that after watching just 1 Oz episode you&#39;ll be hooked. They are right&quot;| __truncated__ ...</code></pre>
<p>A very useful function is, e.g. <code>tolower</code> which converts everything to lower case.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="basic-string-processing.html#cb30-1" tabindex="-1"></a><span class="fu">tolower</span>(review)</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                 textpos1000 
## &quot;gary busey is superb in this musical biography. great singing and excellent soundtrack. the buddy holly story is a much better movie than la bamba. from reading other comments, there may be some historical inaccuracies. regardless, it is a fun toe-tapping film, and a good introduction to buddy holly&#39;s music.\r\n&quot;</code></pre>
<p>Conversely, <code>toupper</code> converts everything to upper case.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="basic-string-processing.html#cb32-1" tabindex="-1"></a><span class="fu">toupper</span>(review)</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                 textpos1000 
## &quot;GARY BUSEY IS SUPERB IN THIS MUSICAL BIOGRAPHY. GREAT SINGING AND EXCELLENT SOUNDTRACK. THE BUDDY HOLLY STORY IS A MUCH BETTER MOVIE THAN LA BAMBA. FROM READING OTHER COMMENTS, THERE MAY BE SOME HISTORICAL INACCURACIES. REGARDLESS, IT IS A FUN TOE-TAPPING FILM, AND A GOOD INTRODUCTION TO BUDDY HOLLY&#39;S MUSIC.\r\n&quot;</code></pre>
<p>The <code>stringr</code> package (see <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/strings.pdf">here</a> is part of the so-called <em>tidyverse</em> - a collection of packages that allows to write R code in a readable manner - and it is the most widely used package for string processing in . The advantage of using <code>stringr</code> is that it makes string processing very easy. All <code>stringr</code> functions share a common structure:</p>
<p><code>str_function(string, pattern)</code></p>
<p>The two arguments in the structure of <code>stringr</code> functions are: <em>string</em> which is the character string to be processed and a pattern which is either a simple sequence of characters, a regular expression, or a combination of both. Because the <em>string</em> comes first, the <code>stringr</code> functions are ideal for piping and thus use in tidyverse style R.</p>
<p>All function names of <code>stringr</code> begin with str, then an underscore and then the name of the action to be performed. For example, to replace the first occurrence of a pattern in a string, we should use <code>str_replace()</code>. In the following, we will use <code>stringr</code> functions to perform various operations on the example text. As we have already loaded the <code>tidyverse</code> package, we can start right away with using <code>stringr</code> functions as shown below.</p>
<p>Like <code>nchar</code> in <code>base</code>, <code>str_count</code> provides the number of characters of a text.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="basic-string-processing.html#cb34-1" tabindex="-1"></a><span class="fu">str_count</span>(reviews_pos[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span></code></pre></div>
<pre><code>## [1] 1762  640 1041  310 3846</code></pre>
<p>The function <code>str_detect</code> informs about whether a pattern is present in a text and outputs a logical vector with <em>TRUE</em> if the pattern occurs and <em>FALSE</em> if it does not.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="basic-string-processing.html#cb36-1" tabindex="-1"></a><span class="fu">str_detect</span>(review, <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>The function <code>str_extract_all</code> extracts all occurrences of a pattern, if that pattern is present in a text.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="basic-string-processing.html#cb38-1" tabindex="-1"></a><span class="fu">str_extract_all</span>(review, <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;and&quot; &quot;and&quot;</code></pre>
<p>The function <code>str_locate_all</code> provides the start and end positions of the match of the pattern in a text and displays the result in matrix-form.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="basic-string-processing.html#cb40-1" tabindex="-1"></a><span class="fu">str_locate_all</span>(review, <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]    63  65
## [2,]   263 265</code></pre>
<p>The function <code>str_remove</code> removes the first occurrence of a pattern in a text.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="basic-string-processing.html#cb42-1" tabindex="-1"></a><span class="fu">str_remove</span>(review, <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing  excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_remove_all</code> removes all occurrences of a pattern from a text.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="basic-string-processing.html#cb44-1" tabindex="-1"></a><span class="fu">str_remove_all</span>(review, <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing  excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film,  a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_replace_all</code> replaces all occurrences of a pattern with something else in a text.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="basic-string-processing.html#cb46-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(review, <span class="st">&quot;and&quot;</span>, <span class="st">&quot;AND&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing AND excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, AND a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>Like <code>strsplit</code>, the function <code>str_split</code> splits a text when a given pattern occurs. If no pattern is provided, then the text is split into individual symbols.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="basic-string-processing.html#cb48-1" tabindex="-1"></a><span class="fu">str_split</span>(review, <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Gary Busey is superb in this musical biography. Great singing &quot;                                                                                                                                       
## [2] &quot; excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, &quot;
## [3] &quot; a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_subset</code> extracts those subsets of a text that contain a certain pattern.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="basic-string-processing.html#cb50-1" tabindex="-1"></a><span class="fu">str_subset</span>(review_tok, <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>## [1] &quot;and&quot; &quot;and&quot;</code></pre>
<p>The function <code>str_which</code> provides a vector with the indices of the texts that contain a certain pattern.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="basic-string-processing.html#cb52-1" tabindex="-1"></a><span class="fu">str_which</span>(review_tok, <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 12 50</code></pre>
<p>The function <code>str_view_all</code> shows the locations of all instances of a pattern in a text or vector of texts.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="basic-string-processing.html#cb54-1" tabindex="-1"></a><span class="fu">str_view_all</span>(review, <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ Gary Busey is superb in this musical biography. Great singing &lt;and&gt; excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, &lt;and&gt; a good introduction to Buddy Holly&#39;s music.{\r}
##     │</code></pre>
<p>The function <code>str_pad</code> adds white spaces to a text or vector of texts so that they reach a given number of symbols.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="basic-string-processing.html#cb56-1" tabindex="-1"></a><span class="co"># create text with white spaces</span></span>
<span id="cb56-2"><a href="basic-string-processing.html#cb56-2" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="st">&quot; this    is a    text   &quot;</span></span>
<span id="cb56-3"><a href="basic-string-processing.html#cb56-3" tabindex="-1"></a><span class="fu">str_pad</span>(text, <span class="at">width =</span> <span class="dv">30</span>)</span></code></pre></div>
<pre><code>## [1] &quot;       this    is a    text   &quot;</code></pre>
<p>The function <code>str_trim</code> removes white spaces from the beginning(s) and end(s) of a text or vector of texts.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="basic-string-processing.html#cb58-1" tabindex="-1"></a><span class="fu">str_trim</span>(text) </span></code></pre></div>
<pre><code>## [1] &quot;this    is a    text&quot;</code></pre>
<p>The function <code>str_squish</code> removes white spaces that occur within a text or vector of texts.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="basic-string-processing.html#cb60-1" tabindex="-1"></a><span class="fu">str_squish</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;this is a text&quot;</code></pre>
<p>The function <code>str_order</code> provides a vector that represents the order of a vector of texts according to the lengths of texts in that vector.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="basic-string-processing.html#cb62-1" tabindex="-1"></a><span class="fu">str_order</span>(reviews_pos_split)</span></code></pre></div>
<pre><code>##   [1] 1522 2196  170 2011 1320 2161  231 1771 2525 1876  272  936 1413  287 1988
##  [16] 1276   40 1630  530 1727  168  127 2676 1826 2457 1420  438 2332 2696  528
##  [31]  910 2808 2279  828 2162 1580 2282  942 2081 2029 1811 2440 1036 2178  258
##  [46] 2024  622 1728  469 1196 1577 1606  772 1059 2227 1336 1963  313 1888  745
##  [61] 1202 1713  270  883 2126 2500 1111 2220 1965 1353  331 1558 1659  552 2339
##  [76] 1683  904 1144  323 2666 1803  698   70 1928 2016 2090 2747 1167 1007 1137
##  [91] 1175   25 2408 1663 2359 2576 1238  364  882  177
##  [ reached getOption(&quot;max.print&quot;) -- omitted 2747 entries ]</code></pre>
<p>The function <code>str_sort</code> orders of a vector of texts according to the lengths of texts in that vector.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="basic-string-processing.html#cb64-1" tabindex="-1"></a><span class="fu">str_sort</span>(reviews_pos_split) <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="basic-string-processing.html#cb64-2" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;...And there were quite a few of these. &lt;br /&gt;&lt;br /&gt;I do not like this cartoon as much as many others, partly because it was made in its period. I much prefer cartoons with Daffy and Bugs which are fifteen or so years before-hand. Many people will like this, particularly people who always find violence funny, cartoon or not.&lt;br /&gt;&lt;br /&gt;The basic plot is a pretty well known one for Looney Tunes: Elmer goes out hunting, Daffy leads him to Bugs and Daffy ends up being shot instead. Also inserted are quite clever and highly entertaining jokes (some do not enhance the episode), ugly shooting and animation which is slightly mediocre. The plot is mainly geared by jokes - each joke keeps the episode going. This way of plot-going is not all that unusual in Looney Tunes (of course if you are pretty much a Looney Tunes boffin - or an eager one - like me, then you&#39;ll know this already).&lt;br /&gt;&lt;br /&gt;For people who love everything about Looney Tunes and Daffy Duck and like the sound of what I have said about it, enjoy \&quot;Rabbit Seasoning\&quot;!&lt;br /&gt;&lt;br /&gt;7 and a half out of ten.\r\n&quot;                                                                                                               
## [2] &quot;&#39;Had Ned Kelly been born later he probably would have won a Victoria Cross at Gallipolli&#39;. such was Ned&#39;s Bravery.&lt;br /&gt;&lt;br /&gt;In Australia and especially country Victoria the name Ned Kelly can be said and immediately recognised. In Greta he is still a Hero, the life Blood of the Town of Jerilderie depends on the tourism he created, but in Mansfield they still haven&#39;t forgotten that the three policeman that he &#39;murdered&#39; were from there.&lt;br /&gt;&lt;br /&gt;Many of the buildings he visited in his life are still standing. From the Old Melbourne Gaol where he was hanged, to the Post office he held up in Jerilderie. A cell he was once held in in Greta is on display in Benella and the site of Ann Jones&#39; Hotel, the station and even the logs where he was captured in Glenrowan can be visited.&lt;br /&gt;&lt;br /&gt;Evidence of all the events in the &quot;                                                                                                                                                                                                                                                                                                                                                                      
## [3] &quot;&#39;War &quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
## [4] &quot;&#39;What I Like About You&#39; is definitely a show that I couldn&#39;t wait to see each day. Amanda Bynes is such an excellent actress and I grew up watching her show: &#39;The Amanda Show.&#39; She&#39;s a very funny person and seems to be down to earth. \&quot;Holly\&quot; is such a like-able person and has an \&quot;out-there\&quot; personality. I enjoyed how she always seemed to turn things around and upside down, so she messed herself up at times. But that&#39;s what made the show so great.&lt;br /&gt;&lt;br /&gt;I especially loved the show when the character &#39;Vince&#39; came along. Nick Zano is very HOT and funny, as well as &#39;Gary&#39;, Wesley Jonathan. The whole cast was great, each character had their own personality and charm. Jennie Garth, Allison Munn, and Leslie Grossman were all very interesting. I especially loved &#39;Lauren&#39;; she&#39;s the best! She helped make the show extra funny and you never know what she&#39;s gonna do or say next! Overall the show is really nice but the reason I didn&#39;t give it a 10 was because there&#39;s no more new episodes and because the episodes could&#39;ve been longer and more deep.\r\n&quot;                                                                                                                                
## [5] &quot;\&quot; Så som i himmelen \&quot; .. as above so below.. that very special point where Divine and Human meet. I ADORE this film ! A gem. YES amazing grace !&lt;br /&gt;&lt;br /&gt;I was so deeply moved by its very HUMAN quality. I laughed and cried through a whole register , indeed several octaves of emotions.&lt;br /&gt;&lt;br /&gt;Mikael Nyqvist ís BRILLIANT as Daniel , a first rate passionate performance, charismatic and powerful. His inner light and exceptional talent shines through in every scene, every interaction ,in every meeting. I was totally mesmerised, enchanted and caught up the story, which is our collective story, the story of life itself.&lt;br /&gt;&lt;br /&gt;The film was also so inclusive of many archetypes, messiah, wounded child ,magical child, artist, teacher, priest, abuser, abused, victim, bully, divine fool - ALL the characters so real and true to life - all awakened great fondness and compassion in me. &lt;br /&gt;&lt;br /&gt;It is a real treat to see such a thought provoking yet thoroughly enjoyable, entertaining film. Oh ..mustn&#39;t forget the heavenly choir of angels and breathtakingly beautiful sound. &lt;br /&gt;&lt;br /&gt;THANK YOU ALL - This Swedish film will surely captivate people world-wide. BRILLIANT !\r\n&quot;
## [6] &quot;\&quot;Ah Ritchie&#39;s made another gangster film with Statham\&quot; thought the average fan, expecting another Snatch/Lock Stock; expecting perhaps a couple of temporal shifts, but none too hard for \&quot;me and the lads\&quot; to swallow after a few beers.&lt;br /&gt;&lt;br /&gt;Ah, pay attention, you do need to watch this film. No cups of tea, no extra diet cokes from the counter, no \&quot;keep it running\&quot; shouts as you nip to the fridge - watch the film! No laughs other than those you may make yourself from the considerable violence (and if that floats your boat, so be it) but sharp solid direction, excellent dialogue, and great performances.&lt;br /&gt;&lt;br /&gt;My favourite - Big Pussy from The Sopranos, always a reliable hood.\r\n&quot;</code></pre>
<p>The function <code>str_c</code> combines texts into one text</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="basic-string-processing.html#cb66-1" tabindex="-1"></a><span class="fu">str_c</span>(review, reviews_pos[<span class="dv">7</span>])</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\nI think this is one hell of a movie...........We can see Steven fighting around with his martial art stuff again and like in all Segal movies there&#39;s a message in it, without the message it would be one of many action/fighting movies but the message is what makes segal movies great and special.\r\n&quot;</code></pre>
<p>The function <code>str_conv</code> converts a text into a certain type of encoding, e.g. into <code>UTF-8</code> or <code>Latin1</code>.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="basic-string-processing.html#cb68-1" tabindex="-1"></a><span class="fu">str_conv</span>(review, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_flatten</code> combines a vector of texts into one text. The argument <code>collapse</code> defines the symbol that occurs between the combined texts. If the argument <code>collapse</code> is left out, the texts will be combined without any symbol between the combined texts.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="basic-string-processing.html#cb70-1" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(review, reviews_pos[<span class="dv">7</span>]), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n I think this is one hell of a movie...........We can see Steven fighting around with his martial art stuff again and like in all Segal movies there&#39;s a message in it, without the message it would be one of many action/fighting movies but the message is what makes segal movies great and special.\r\n&quot;</code></pre>
<p>The function <code>str_length</code> provides the length of texts in characters.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="basic-string-processing.html#cb72-1" tabindex="-1"></a><span class="fu">str_length</span>(review)</span></code></pre></div>
<pre><code>## [1] 311</code></pre>
<p>The function <code>str_sub</code> extracts a string from a text from a start location to an end position (expressed as character positions).</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="basic-string-processing.html#cb74-1" tabindex="-1"></a><span class="fu">str_sub</span>(review, <span class="dv">5</span>, <span class="dv">25</span>)</span></code></pre></div>
<pre><code>## [1] &quot; Busey is superb in t&quot;</code></pre>
<p>The function <code>word</code> extracts words from a text (expressed as word positions).</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="basic-string-processing.html#cb76-1" tabindex="-1"></a><span class="fu">word</span>(review, <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Busey&quot;   &quot;is&quot;      &quot;superb&quot;  &quot;in&quot;      &quot;this&quot;    &quot;musical&quot;</code></pre>
<div id="extracting-frequency-information-from-text" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Extracting frequency information from text<a href="basic-string-processing.html#extracting-frequency-information-from-text" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Frequency lists are very basic but also important when analysing text. Fortunately, it is very easy to extract frequency information and to create frequency lists with R. We can do this by first using the <code>unnest_tokens</code> function which splits texts into individual words, an then use the <code>count</code> function to get the raw frequencies of all word types in a text.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="basic-string-processing.html#cb78-1" tabindex="-1"></a>reviews_pos <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="basic-string-processing.html#cb78-2" tabindex="-1"></a>  <span class="co"># convert to data frame</span></span>
<span id="cb78-3"><a href="basic-string-processing.html#cb78-3" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()<span class="sc">%&gt;%</span></span>
<span id="cb78-4"><a href="basic-string-processing.html#cb78-4" tabindex="-1"></a>  <span class="co"># give name column with text</span></span>
<span id="cb78-5"><a href="basic-string-processing.html#cb78-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">text =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb78-6"><a href="basic-string-processing.html#cb78-6" tabindex="-1"></a>  <span class="co"># tokenise</span></span>
<span id="cb78-7"><a href="basic-string-processing.html#cb78-7" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span></span>
<span id="cb78-8"><a href="basic-string-processing.html#cb78-8" tabindex="-1"></a>  <span class="co"># count tokens</span></span>
<span id="cb78-9"><a href="basic-string-processing.html#cb78-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(word, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb78-10"><a href="basic-string-processing.html#cb78-10" tabindex="-1"></a>  <span class="co"># inspect 20 most frequent tokens</span></span>
<span id="cb78-11"><a href="basic-string-processing.html#cb78-11" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span></code></pre></div>
<pre><code>##     word     n
## 1    the 13395
## 2    and  6869
## 3      a  6487
## 4     of  5998
## 5     to  5153
## 6     is  4351
## 7     br  3968
## 8     in  3827
## 9     it  2982
## 10     i  2935
## 11  this  2845
## 12  that  2552
## 13    as  2025
## 14  with  1817
## 15   was  1709
## 16   for  1699
## 17   but  1571
## 18  film  1558
## 19 movie  1527
## 20    on  1436</code></pre>
<p>Extracting N-grams is also very easy as the <code>unnest_tokens</code> function can an argument called <code>token</code> in which we can specify that we want to extract n-grams, If we do this, then we need to specify the <code>n</code> as a separate argument. Below we specify that we want the frequencies of all 4-grams.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="basic-string-processing.html#cb80-1" tabindex="-1"></a>reviews_pos <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="basic-string-processing.html#cb80-2" tabindex="-1"></a>    <span class="co"># convert to data frame</span></span>
<span id="cb80-3"><a href="basic-string-processing.html#cb80-3" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()<span class="sc">%&gt;%</span></span>
<span id="cb80-4"><a href="basic-string-processing.html#cb80-4" tabindex="-1"></a>  <span class="co"># give name column with text</span></span>
<span id="cb80-5"><a href="basic-string-processing.html#cb80-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">text =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb80-6"><a href="basic-string-processing.html#cb80-6" tabindex="-1"></a>  <span class="co"># clean data</span></span>
<span id="cb80-7"><a href="basic-string-processing.html#cb80-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">str_remove_all</span>(text, <span class="st">&quot;&lt;.*?&gt;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb80-8"><a href="basic-string-processing.html#cb80-8" tabindex="-1"></a>  <span class="co"># tokenise and extract trigrams</span></span>
<span id="cb80-9"><a href="basic-string-processing.html#cb80-9" tabindex="-1"></a>  tidytext<span class="sc">::</span> <span class="fu">unnest_tokens</span>(word, text, <span class="at">token=</span><span class="st">&quot;ngrams&quot;</span>, <span class="at">n=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb80-10"><a href="basic-string-processing.html#cb80-10" tabindex="-1"></a>  <span class="co"># count tokens</span></span>
<span id="cb80-11"><a href="basic-string-processing.html#cb80-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(word, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb80-12"><a href="basic-string-processing.html#cb80-12" tabindex="-1"></a>  <span class="co"># inspect ten most frequent tri-grams</span></span>
<span id="cb80-13"><a href="basic-string-processing.html#cb80-13" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##             word   n
## 1     one of the 219
## 2      this is a 127
## 3    some of the  96
## 4      is one of  92
## 5    of the film  92
## 6  this movie is  89
## 7       a lot of  85
## 8   this film is  70
## 9    of the best  68
## 10  of the movie  68</code></pre>
</div>
<div id="regular-expressions" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Regular Expressions<a href="basic-string-processing.html#regular-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this section, we focus on regular expressions (to learn more about regular expression, have a look at this very recommendable <a href="https://stringr.tidyverse.org/articles/regular-expressions.html">tutorial</a>). Regular expressions are powerful tools used to search and manipulate text patterns. They provide a way to find specific sequences of characters within larger bodies of text.</p>
<p>There are two basic types of regular expressions:</p>
<ul>
<li><p>regular expressions that stand for frequencies (quantifiers)</p></li>
<li><p>regular expressions that stand for classes of symbols (types)</p></li>
</ul>
<p>The regular expressions below show the first type of regular expressions, i.e. quantifiers.</p>
<p><img src="https://slcladal.github.io/images/regex_tb1.png" width="95%" /></p>
<p>The regular expressions below show the second type of regular expressions, i.e. types.</p>
<p><img src="https://slcladal.github.io/images/regex_tb2.png" width="95%" /></p>
<p>Types can be expanded to include structural properties as shown below.</p>
<p><img src="https://slcladal.github.io/images/regex_tb3.png" width="95%" /></p>
</div>
<div id="practice-regular-expressions" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Practice: regular expressions<a href="basic-string-processing.html#practice-regular-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We now want to show all words in the tokenized review that contain <code>y</code>.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="basic-string-processing.html#cb82-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;[y]&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;Gary&quot;      &quot;Busey&quot;     &quot;biography&quot; &quot;Buddy&quot;     &quot;Holly&quot;     &quot;Story&quot;    
## [7] &quot;may&quot;       &quot;Buddy&quot;     &quot;Holly&#39;s&quot;</code></pre>
<p>Show all words in the split tokenized review that begin with a lower case <code>a</code>.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="basic-string-processing.html#cb84-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;^a&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;and&quot; &quot;a&quot;   &quot;a&quot;   &quot;and&quot; &quot;a&quot;</code></pre>
<p>Show all words in the split tokenized review that end in a lower case <code>s</code>.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="basic-string-processing.html#cb86-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;s$&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;is&quot;           &quot;this&quot;         &quot;is&quot;           &quot;comments&quot;     &quot;inaccuracies&quot;
## [6] &quot;Regardless&quot;   &quot;is&quot;           &quot;Holly&#39;s&quot;</code></pre>
<p>Show all words in the split tokenized review in which there is an <code>e</code>, then any other character, and than another <code>n</code>.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="basic-string-processing.html#cb88-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;o..y&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;Holly&quot;   &quot;Holly&#39;s&quot;</code></pre>
<p>Show all words in the tokenized review text in which there is an <code>e</code>, then two other characters, and than another <code>n</code>.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="basic-string-processing.html#cb90-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;o.{2,2}y&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;Holly&quot;   &quot;Holly&#39;s&quot;</code></pre>
<p>Show all words that consist of exactly three alphabetical characters in the tokenized review .</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="basic-string-processing.html#cb92-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;^[:alpha:]{3,3}$&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;and&quot; &quot;The&quot; &quot;may&quot; &quot;fun&quot; &quot;and&quot;</code></pre>
<p>Show all words that consist of six or more alphabetical characters in the tokenized review.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="basic-string-processing.html#cb94-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;^[:alpha:]{6,}$&quot;</span>)]</span></code></pre></div>
<pre><code>##  [1] &quot;superb&quot;       &quot;musical&quot;      &quot;biography&quot;    &quot;singing&quot;      &quot;excellent&quot;   
##  [6] &quot;soundtrack&quot;   &quot;better&quot;       &quot;reading&quot;      &quot;comments&quot;     &quot;historical&quot;  
## [11] &quot;inaccuracies&quot; &quot;Regardless&quot;   &quot;introduction&quot;</code></pre>
<p>Replace all lower case <code>a</code>s with upper case <code>E</code>s in the review.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="basic-string-processing.html#cb96-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(review, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;E&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;GEry Busey is superb in this musicEl biogrEphy. GreEt singing End excellent soundtrEck. The Buddy Holly Story is E much better movie thEn LE BEmbE. From reEding other comments, there mEy be some historicEl inEccurEcies. RegErdless, it is E fun toe-tEpping film, End E good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>Remove all non-alphabetical characters in the tokenized review.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="basic-string-processing.html#cb98-1" tabindex="-1"></a><span class="fu">str_remove_all</span>(review_tok, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">W&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;Gary&quot;         &quot;Busey&quot;        &quot;is&quot;           &quot;superb&quot;       &quot;in&quot;          
##  [6] &quot;this&quot;         &quot;musical&quot;      &quot;biography&quot;    &quot;&quot;             &quot;Great&quot;       
## [11] &quot;singing&quot;      &quot;and&quot;          &quot;excellent&quot;    &quot;soundtrack&quot;   &quot;&quot;            
## [16] &quot;The&quot;          &quot;Buddy&quot;        &quot;Holly&quot;        &quot;Story&quot;        &quot;is&quot;          
## [21] &quot;a&quot;            &quot;much&quot;         &quot;better&quot;       &quot;movie&quot;        &quot;than&quot;        
## [26] &quot;La&quot;           &quot;Bamba&quot;        &quot;&quot;             &quot;From&quot;         &quot;reading&quot;     
## [31] &quot;other&quot;        &quot;comments&quot;     &quot;&quot;             &quot;there&quot;        &quot;may&quot;         
## [36] &quot;be&quot;           &quot;some&quot;         &quot;historical&quot;   &quot;inaccuracies&quot; &quot;&quot;            
## [41] &quot;Regardless&quot;   &quot;&quot;             &quot;it&quot;           &quot;is&quot;           &quot;a&quot;           
## [46] &quot;fun&quot;          &quot;toetapping&quot;   &quot;film&quot;         &quot;&quot;             &quot;and&quot;         
## [51] &quot;a&quot;            &quot;good&quot;         &quot;introduction&quot; &quot;to&quot;           &quot;Buddy&quot;       
## [56] &quot;Hollys&quot;       &quot;music&quot;        &quot;&quot;</code></pre>
<p>Remove all white spaces in the review.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="basic-string-processing.html#cb100-1" tabindex="-1"></a><span class="fu">str_remove_all</span>(review, <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;GaryBuseyissuperbinthismusicalbiography.Greatsingingandexcellentsoundtrack.TheBuddyHollyStoryisamuchbettermoviethanLaBamba.Fromreadingothercomments,theremaybesomehistoricalinaccuracies.Regardless,itisafuntoe-tappingfilm,andagoodintroductiontoBuddyHolly&#39;smusic.\r\n&quot;</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exercise-1-introducing-text-processing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-string-processing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MartinSchweinberger/IntroR_WS/edit/main/02-intror.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/MartinSchweinberger/IntroR_WS/blob/main/02-intror.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
