<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 2 Introduction to R | Introduction to R for Social Science</title>
  <meta name="description" content="Section 2 Introduction to R | Introduction to R for Social Science" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 2 Introduction to R | Introduction to R for Social Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 2 Introduction to R | Introduction to R for Social Science" />
  
  
  

<meta name="author" content="Martin Schweinberger" />


<meta name="date" content="2024-06-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="introduction-to-text-analysis-with-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="libs/klippy-0.0.0.9500/js/klippy.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> General Information</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i><b>1.1</b> Abstract</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#timeline"><i class="fa fa-check"></i><b>1.2</b> Timeline</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#resources"><i class="fa fa-check"></i><b>1.3</b> Resources</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#audience"><i class="fa fa-check"></i><b>1.4</b> Audience</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#what-to-do-before-the-workshop"><i class="fa fa-check"></i><b>1.5</b> What to do before the workshop</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#getting-started"><i class="fa fa-check"></i><b>1.6</b> Getting started</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#preparation"><i class="fa fa-check"></i><b>2.2</b> Preparation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#before-you-start-working-with-rrstudio-folder-structure-and-r-projects"><i class="fa fa-check"></i><b>2.2.1</b> Before you start working with R/RStudio (Folder Structure and R projects)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-and-rstudio-basics"><i class="fa fa-check"></i><b>2.3</b> R and RStudio Basics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#rstudio-panes"><i class="fa fa-check"></i><b>2.3.1</b> RStudio: Panes</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started-with-r"><i class="fa fa-check"></i><b>2.4</b> Getting started with R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#setting-up-an-r-session"><i class="fa fa-check"></i><b>2.4.1</b> Setting up an R session</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#packages"><i class="fa fa-check"></i><b>2.4.2</b> Packages</a></li>
<li class="chapter" data-level="2.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-help"><i class="fa fa-check"></i><b>2.4.3</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#working-with-text"><i class="fa fa-check"></i><b>2.5</b> Working with text</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#loading-text-data"><i class="fa fa-check"></i><b>2.5.1</b> Loading text data</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#saving-text-data"><i class="fa fa-check"></i><b>2.5.2</b> Saving text data</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#piping"><i class="fa fa-check"></i><b>2.5.3</b> Piping</a></li>
<li class="chapter" data-level="2.5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#extracting-frequency-information-from-text"><i class="fa fa-check"></i><b>2.5.4</b> Extracting frequency information from text</a></li>
<li class="chapter" data-level="2.5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#regular-expressions"><i class="fa fa-check"></i><b>2.5.5</b> Regular Expressions</a></li>
<li class="chapter" data-level="2.5.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#splitting-up-texts"><i class="fa fa-check"></i><b>2.5.6</b> Splitting-up texts</a></li>
<li class="chapter" data-level="2.5.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-string-processing"><i class="fa fa-check"></i><b>2.5.7</b> Basic String Processing</a></li>
<li class="chapter" data-level="" data-path="introduction-to-r.html"><a href="introduction-to-r.html#advanced-string-processing"><i class="fa fa-check"></i>Advanced String Processing</a></li>
<li class="chapter" data-level="2.5.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#cleaning-texts"><i class="fa fa-check"></i><b>2.5.8</b> Cleaning texts</a></li>
<li class="chapter" data-level="2.5.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#concordancing-and-kwics"><i class="fa fa-check"></i><b>2.5.9</b> Concordancing and KWICs</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#working-with-graphics"><i class="fa fa-check"></i><b>2.6</b> Working with graphics</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basics-of-ggplot2-syntax"><i class="fa fa-check"></i><b>2.6.1</b> Basics of ggplot2 syntax</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#practical-examples"><i class="fa fa-check"></i><b>2.6.2</b> Practical examples</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#working-with-tables"><i class="fa fa-check"></i><b>2.7</b> Working with tables</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#loading-data-from-the-web"><i class="fa fa-check"></i><b>2.7.1</b> Loading data from the web</a></li>
<li class="chapter" data-level="2.7.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions-and-objects"><i class="fa fa-check"></i><b>2.7.2</b> Functions and Objects</a></li>
<li class="chapter" data-level="2.7.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#inspecting-data"><i class="fa fa-check"></i><b>2.7.3</b> Inspecting data</a></li>
<li class="chapter" data-level="2.7.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#accessing-individual-cells-in-a-table"><i class="fa fa-check"></i><b>2.7.4</b> Accessing individual cells in a table</a></li>
<li class="chapter" data-level="2.7.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#tabulating-data"><i class="fa fa-check"></i><b>2.7.5</b> Tabulating data</a></li>
<li class="chapter" data-level="2.7.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#saving-data-to-your-computer"><i class="fa fa-check"></i><b>2.7.6</b> Saving data to your computer</a></li>
<li class="chapter" data-level="2.7.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#loading-data-from-your-computer"><i class="fa fa-check"></i><b>2.7.7</b> Loading data from your computer</a></li>
<li class="chapter" data-level="2.7.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#loading-excel-data"><i class="fa fa-check"></i><b>2.7.8</b> Loading Excel data</a></li>
<li class="chapter" data-level="2.7.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#renaming-piping-and-filtering"><i class="fa fa-check"></i><b>2.7.9</b> Renaming, Piping, and Filtering</a></li>
<li class="chapter" data-level="2.7.10" data-path="introduction-to-r.html"><a href="introduction-to-r.html#ordering-data"><i class="fa fa-check"></i><b>2.7.10</b> Ordering data</a></li>
<li class="chapter" data-level="2.7.11" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-and-changing-variables"><i class="fa fa-check"></i><b>2.7.11</b> Creating and changing variables</a></li>
<li class="chapter" data-level="2.7.12" data-path="introduction-to-r.html"><a href="introduction-to-r.html#if-statements"><i class="fa fa-check"></i><b>2.7.12</b> If-statements</a></li>
<li class="chapter" data-level="2.7.13" data-path="introduction-to-r.html"><a href="introduction-to-r.html#summarizing-data"><i class="fa fa-check"></i><b>2.7.13</b> Summarizing data</a></li>
<li class="chapter" data-level="2.7.14" data-path="introduction-to-r.html"><a href="introduction-to-r.html#gathering-and-spreading-data"><i class="fa fa-check"></i><b>2.7.14</b> Gathering and spreading data</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#going-further"><i class="fa fa-check"></i><b>2.8</b> Going further</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#ending-r-sessions"><i class="fa fa-check"></i><b>2.9</b> Ending R sessions</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#extracting-session-information"><i class="fa fa-check"></i><b>2.9.1</b> Extracting session information</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html"><i class="fa fa-check"></i><b>3</b> Introduction to Text Analysis with R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#concordancing"><i class="fa fa-check"></i><b>3.1</b> Concordancing</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#word-frequency"><i class="fa fa-check"></i><b>3.2</b> Word Frequency</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#wordclouds"><i class="fa fa-check"></i><b>3.2.1</b> Wordclouds</a></li>
<li class="chapter" data-level="3.2.2" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#frequency-changes"><i class="fa fa-check"></i><b>3.2.2</b> Frequency changes</a></li>
<li class="chapter" data-level="3.2.3" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#dispersion-plots"><i class="fa fa-check"></i><b>3.2.3</b> Dispersion plots</a></li>
<li class="chapter" data-level="3.2.4" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#over--and-underuse"><i class="fa fa-check"></i><b>3.2.4</b> Over- and underuse</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#collocations"><i class="fa fa-check"></i><b>3.3</b> Collocations</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#keywords"><i class="fa fa-check"></i><b>3.4</b> Keywords</a></li>
<li class="chapter" data-level="3.5" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#text-classification"><i class="fa fa-check"></i><b>3.5</b> Text Classification</a></li>
<li class="chapter" data-level="3.6" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#part-of-speech-tagging"><i class="fa fa-check"></i><b>3.6</b> Part-of-Speech tagging</a></li>
<li class="chapter" data-level="3.7" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#names-entity-recognition"><i class="fa fa-check"></i><b>3.7</b> Names Entity Recognition</a></li>
<li class="chapter" data-level="3.8" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#dependency-parsing-using-udpipe"><i class="fa fa-check"></i><b>3.8</b> Dependency Parsing Using UDPipe</a></li>
<li class="chapter" data-level="3.9" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#citation-session-info"><i class="fa fa-check"></i><b>3.9</b> Citation &amp; Session Info</a></li>
<li class="chapter" data-level="3.10" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#references"><i class="fa fa-check"></i><b>3.10</b> References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R for Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-r" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Section 2</span> Introduction to R<a href="introduction-to-r.html#introduction-to-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p><strong>UNFINISHED! WORK IN PROGRESS! I’M STILL WORKING ON THE CONTENT</strong></p>
</blockquote>
<p>Here I want to show you how to get started with R. As such, this section is aimed at fresh users or beginners with the aim of showcasing how to set up a R session in RStudio, how to set up R projects, and how to do basic operations using R such as loading and manipulation tabular data and generating basic visualization using R.</p>
<p><a href="https://www.rstudio.com/resources/cheatsheets/">Here</a> is an overview of cheat sheets for popular and frequently used packages provided by RStudio (cheat sheets are short overviews with explanations and examples of useful functions). If you already have experience with R, both <span class="citation">@wickham2016r</span> (see <a href="https://r4ds.had.co.nz/">here</a>) and <span class="citation">@gillespie2016efficient</span> (see <a href="https://bookdown.org/csgillespie/efficientR/">here</a>) are highly recommendable and excellent resources for improving your coding abilities and workflows in R.</p>
<div id="installing-r-and-rstudio" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Installing R and RStudio<a href="introduction-to-r.html#installing-r-and-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>You have NOT yet installed <strong>R</strong> on your computer?</p>
<ul>
<li><p>You have a Windows computer? Then click <a href="https://cran.r-project.org/bin/windows/base/R-4.0.2-win.exe">here</a> for downloading and installing R</p></li>
<li><p>You have a Mac? Then click <a href="https://cran.r-project.org/bin/macosx/R-4.0.2.pkg">here</a> for downloading and installing R</p></li>
</ul></li>
<li><p>You have NOT yet installed <strong>RStudio</strong> on your computer?</p>
<ul>
<li>Click <a href="https://rstudio.com/products/rstudio/download/#download">here</a> for downloading and installing RStudio.</li>
</ul></li>
</ul>
<p>You can find a more elaborate explanation of how to download and install R and RStudio <a href="https://gitlab.com/stragu/DSH/blob/master/R/Installation.md">here</a> that was created by the UQ library.</p>
</div>
<div id="preparation" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Preparation<a href="introduction-to-r.html#preparation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before you actually open R or RStudio, there things to consider that make working in R much easier and give your workflow a better structure.</p>
<p>Imagine it like this: when you want to write a book, you could simply take pen and paper and start writing <em>or</em> you could think about what you want to write about, what different chapters your book would consist of, which chapters to write first, what these chapters will deal with, etc. The same is true for R: you could simply open R and start writing code <em>or</em> you can prepare you session and structure what you will be doing.</p>
<div id="before-you-start-working-with-rrstudio-folder-structure-and-r-projects" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Before you start working with R/RStudio (Folder Structure and R projects)<a href="introduction-to-r.html#before-you-start-working-with-rrstudio-folder-structure-and-r-projects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before actually starting with writing code, you should prepare the session by going through the following steps:</p>
<div id="create-a-folder-for-your-project" class="section level4 hasAnchor" number="2.2.1.1">
<h4><span class="header-section-number">2.2.1.1</span> 1. Create a folder for your project<a href="introduction-to-r.html#create-a-folder-for-your-project" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In that folder, create the following sub-folders (you can, of course, adapt this folder template to match your needs)</p>
<ul>
<li>data (you do not create this folder for the present workshop as you can simply use the data folder that you downloaded for this workshop instead)</li>
<li>images</li>
<li>tables</li>
<li>docs</li>
</ul>
<p>The folder for your project could look like the the one shown below.</p>
<p><img src="https://slcladal.github.io/images/RStudio_newfolder.png" width="75%" /></p>
<p>Once you have created your project folder, you can go ahead with RStudio.</p>
</div>
<div id="open-rstudio" class="section level4 hasAnchor" number="2.2.1.2">
<h4><span class="header-section-number">2.2.1.2</span> 2. Open RStudio<a href="introduction-to-r.html#open-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This is what RStudio looks like when you first open it:</p>
<p><img src="https://slcladal.github.io/images/RStudio_empty.png" width="100%" /></p>
<p>In RStudio, click on <code>File</code></p>
<p><img src="https://slcladal.github.io/images/RStudio_file.png" width="50%" /></p>
<p>You can use the drop-down menu to create a <code>R project</code></p>
</div>
<div id="r-projects" class="section level4 hasAnchor" number="2.2.1.3">
<h4><span class="header-section-number">2.2.1.3</span> 3. R Projects<a href="introduction-to-r.html#r-projects" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In RStudio, click on <code>New Project</code></p>
<p><img src="https://slcladal.github.io/images/RStudio_newfile.png" width="50%" /></p>
<p>Next, confirm by clicking <code>OK</code> and select <code>Existing Directory</code>.</p>
<p>Then, navigate to where you have just created the project folder for this workshop.</p>
<p><img src="https://slcladal.github.io/images/RStudio_existingdirectory.png" width="30%" /></p>
<p>Once you click on <code>Open</code>, you have created a new <code>R project</code></p>
</div>
<div id="r-notebooks" class="section level4 hasAnchor" number="2.2.1.4">
<h4><span class="header-section-number">2.2.1.4</span> 4. R Notebooks<a href="introduction-to-r.html#r-notebooks" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this project, click on <code>File</code></p>
<p><img src="https://slcladal.github.io/images/RStudio_file.png" width="50%" /></p>
<p>Click on <code>New File</code> and then on <code>R Notebook</code> as shown below.</p>
<p><img src="https://slcladal.github.io/images/RStudio_newnotebook.png" width="50%" /></p>
<p>This <code>R Notebook</code> will be the file in which you do all your work.</p>
</div>
<div id="updating-r" class="section level4 hasAnchor" number="2.2.1.5">
<h4><span class="header-section-number">2.2.1.5</span> 5. Updating R<a href="introduction-to-r.html#updating-r" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In case you encounter issues when opening the R Notebook (e.g., if you receive an error message saying that you need to update packages which then do not install properly), you may have to <em>update your R version</em>.</p>
<p>To update your current R version to the recent release please copy the code chunk shown below into the console pane (the bottom left pane) and click on <code>Enter</code> to run the code. The code will automatically update your version of R to the most recent release. During the update, you may be asked to specify some options - in that case, you can simply click on <em>Accept</em> and <em>Next</em> and accept the default settings.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="introduction-to-r.html#cb1-1" tabindex="-1"></a><span class="co"># install installr package</span></span>
<span id="cb1-2"><a href="introduction-to-r.html#cb1-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;installr&quot;</span>)</span>
<span id="cb1-3"><a href="introduction-to-r.html#cb1-3" tabindex="-1"></a><span class="co"># load installr package</span></span>
<span id="cb1-4"><a href="introduction-to-r.html#cb1-4" tabindex="-1"></a><span class="fu">library</span>(installr)</span>
<span id="cb1-5"><a href="introduction-to-r.html#cb1-5" tabindex="-1"></a><span class="co"># update r</span></span>
<span id="cb1-6"><a href="introduction-to-r.html#cb1-6" tabindex="-1"></a><span class="fu">updateR</span>()</span></code></pre></div>
</div>
<div id="optimizing-r-project-options" class="section level4 hasAnchor" number="2.2.1.6">
<h4><span class="header-section-number">2.2.1.6</span> 6. Optimizing R project options<a href="introduction-to-r.html#optimizing-r-project-options" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When you work with projects, it is recommendable to control the so-called <em>environment</em>. This means that you make your R Project self-contained by storing all packages that are used in project in a library <em>in the R Project</em> (instead of in the general R library on your computer). Having a library in your R Project means that you can share your project folder wit other people and they will automatically have the same package versions that you have sued which makes your code more robust and reproducible.</p>
<p>So, how to create such an environment? You simply click on <code>Tools</code> (at the very top right of RStudio), then click on<code>Project Options</code> then click on <code>Environments</code> and then check <code>Use renv with this project</code>. Now, when you install packages, they will be installed in the package library (rather than the general R library on your computer).</p>
</div>
<div id="getting-started-with-r-notebooks" class="section level4 hasAnchor" number="2.2.1.7">
<h4><span class="header-section-number">2.2.1.7</span> 7. Getting started with R Notebooks<a href="introduction-to-r.html#getting-started-with-r-notebooks" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can now start writing in this R Notebook. For instance, you could start by changing the title of the R Notebook and describe what you are doing (what this Notebook contains).</p>
<p>Below is a picture of what this document looked like when I started writing it.</p>
<p><img src="https://slcladal.github.io/images/RStudio_editMD.png" width="100%" /></p>
<p>When you write in the R Notebook, you use what is called <code>R Markdown</code> which is explained below.</p>
</div>
<div id="r-markdown" class="section level4 hasAnchor" number="2.2.1.8">
<h4><span class="header-section-number">2.2.1.8</span> R Markdown<a href="introduction-to-r.html#r-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The Notebook is an <a href="http://rmarkdown.rstudio.com/">R Markdown document</a>: a Rmd (R Markdown) file is more than a flat text document: it’s a program that you can run in R and which allows you to combine prose and code, so readers can see the technical aspects of your work while reading about their interpretive significance.</p>
<p>You can get a nice and short overview of the formatting options in R Markdown (Rmd) files <a href="https://rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">here</a>.</p>
<p>R Markdown allows you to make your research fully transparent and reproducible! If a couple of years down the line another researcher or a journal editor asked you how you have done your analysis, you can simply send them the Notebook or even the entire R-project folder.</p>
<p>As such, Rmd files are a type of document that allows to</p>
<ul>
<li><p>include snippets of code (and any outputs such as tables or graphs) in plain text while</p></li>
<li><p>encoding the <em>structure</em> of your document by using simple typographical symbols to encode formatting (rather than HTML tags or format types such as <em>Main header</em> or <em>Header level 1</em> in Word).</p></li>
</ul>
<p>Markdown is really quite simple to learn and these resources may help:</p>
<ul>
<li><p>The <a href="https://en.wikipedia.org/wiki/Markdown">Markdown Wikipedia page</a> includes a very handy chart of the syntax.</p></li>
<li><p>John Gruber developed Markdown and his <a href="https://daringfireball.net/projects/markdown/syntax">introduction to the syntax</a> is worth browsing.</p></li>
<li><p>This <a href="http://www.markdowntutorial.com/">interactive Markdown tutorial</a> will teach you the syntax in a few minutes.</p></li>
</ul>
</div>
</div>
</div>
<div id="r-and-rstudio-basics" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> R and RStudio Basics<a href="introduction-to-r.html#r-and-rstudio-basics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>RStudio is a so-called IDE - Integrated Development Environment. The interface provides easy access to R. The advantage of this application is that R programs and files as well as a project directory can be managed easily. The environment is capable of editing and running program code, viewing outputs and rendering graphics. Furthermore, it is possible to view variables and data objects of an R-script directly in the interface.</p>
<div id="rstudio-panes" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> RStudio: Panes<a href="introduction-to-r.html#rstudio-panes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The GUI - Graphical User Interface - that RStudio provides divides the screen into four areas that are called <strong>panes</strong>:</p>
<ol style="list-style-type: decimal">
<li>File editor</li>
<li>Environment variables</li>
<li>R console</li>
<li>Management panes (File browser, plots, help display and R packages).</li>
</ol>
<p>The two most important are the R console (bottom left) and the File editor (or Script in the top left).
The Environment variables and Management panes are on the right of the screen and they contain:</p>
<ul>
<li><strong>Environment</strong> (top): Lists all currently defined objects and data sets</li>
<li><strong>History</strong> (top): Lists all commands recently used or associated with a project</li>
<li><strong>Plots</strong> (bottom): Graphical output goes here</li>
<li><strong>Help</strong> (bottom): Find help for R packages and functions. Don’t forget you can type <code>?</code> before a function name in the console to get info in the Help section.</li>
<li><strong>Files</strong> (bottom): Shows the files available to you in your working directory</li>
</ul>
<p>These RStudio panes are shown below.</p>
<p><img src="https://slcladal.github.io/images/RStudioscreenshot.png" /><!-- --></p>
<div id="r-console-bottom-left-pane" class="section level4 hasAnchor" number="2.3.1.1">
<h4><span class="header-section-number">2.3.1.1</span> R Console (bottom left pane)<a href="introduction-to-r.html#r-console-bottom-left-pane" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The console pane allows you to quickly and immediately execute R code. You can experiment with functions here, or quickly print data for viewing.</p>
<p>Type next to the <code>&gt;</code> and press <code>Enter</code> to execute.</p>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol style="list-style-type: decimal">
<li>You can use R like a calculator. Try typing <code>2+8</code> into the <strong>R console</strong>.</li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="introduction-to-r.html#cb2-1" tabindex="-1"></a>  <span class="dv">2</span><span class="sc">+</span><span class="dv">8</span></span></code></pre></div>
<pre><code>  ## [1] 10</code></pre>
</details>
</div>
<p>`</p>
<hr />
<p>Here, the plus sign is the <strong>operator</strong>. Operators are symbols that represent some sort of action. However, R is, of course, much more than a simple calculator. To use R more fully, we need to understand <strong>objects</strong>, <strong>functions</strong>, and <strong>indexing</strong> - which we will learn about as we go.</p>
<p>For now, think of <em>objects as nouns</em> and <em>functions as verbs</em>.</p>
</div>
<div id="running-commands-from-a-script" class="section level4 hasAnchor" number="2.3.1.2">
<h4><span class="header-section-number">2.3.1.2</span> Running commands from a script<a href="introduction-to-r.html#running-commands-from-a-script" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To run code from a script, insert your cursor on a line with a command, and press <code>CTRL/CMD+Enter</code>.</p>
<p>Or highlight some code to only run certain sections of the command, then press <code>CTRL/CMD+Enter</code> to run.</p>
<p>Alternatively, use the <code>Run</code> button at the top of the pane to execute the current line or selection (see below).</p>
<p><img src="https://slcladal.github.io/images/RStudio_run.png" width="50%" /></p>
</div>
<div id="script-editor-top-left-pane" class="section level4 hasAnchor" number="2.3.1.3">
<h4><span class="header-section-number">2.3.1.3</span> Script Editor (top left pane)<a href="introduction-to-r.html#script-editor-top-left-pane" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In contrast to the R console, which quickly runs code, the Script Editor (in the top left) does not automatically execute code. The Script Editor allows you to save the code essential to your analysis. You can re-use that code in the moment, refer back to it later, or publish it for replication.</p>
<p>Now, that we have explored RStudio, we are ready to get started with R!</p>
</div>
</div>
</div>
<div id="getting-started-with-r" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Getting started with R<a href="introduction-to-r.html#getting-started-with-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section introduces some basic concepts and procedures that help optimize your workflow in R.</p>
<div id="setting-up-an-r-session" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Setting up an R session<a href="introduction-to-r.html#setting-up-an-r-session" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>At the beginning of a session, it is common practice to define some basic parameters. This is not required or even necessary, but it may just help further down the line. This session preparation may include specifying options. In the present case, we</p>
<ul>
<li><p>want R to show numbers as numbers up to 100 decimal points (and not show them in mathematical notation (in mathematical notation, 0.007 would be represented as 0.7e<sup>-3</sup>))</p></li>
<li><p>want R to show maximally 100 results (otherwise, it can happen that R prints out pages-after-pages of some numbers).</p></li>
</ul>
<p>Again, the session preparation is not required or necessary but it can help avoid errors.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="introduction-to-r.html#cb4-1" tabindex="-1"></a><span class="co"># set options</span></span>
<span id="cb4-2"><a href="introduction-to-r.html#cb4-2" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors =</span> F)                           </span>
<span id="cb4-3"><a href="introduction-to-r.html#cb4-3" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">100</span>) </span>
<span id="cb4-4"><a href="introduction-to-r.html#cb4-4" tabindex="-1"></a><span class="fu">options</span>(<span class="at">max.print=</span><span class="dv">100</span>) </span></code></pre></div>
<p>In script editor pane of RStudio, this would look like this:</p>
<p><img src="https://slcladal.github.io/images/RStudio_preparation.png" width="100%" /></p>
</div>
<div id="packages" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Packages<a href="introduction-to-r.html#packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When using R, most of the functions are not loaded or even installing automatically. Instead, most functions are in contained in what are called <strong>packages</strong>.</p>
<p>R comes with about 30 packages (“base R”). There are over 10,000 user-contributed packages; you can discover these packages online. A prevalent collection of packages is the Tidyverse, which includes ggplot2, a package for making graphics.</p>
<p>Before being able to use a package, we need to install the package (using the <code>install.packages</code> function) and load the package (using the <code>library</code> function). However, a package only needs to be installed once(!) and can then simply be loaded. When you install a package, this will likely install several other packages it depends on. You should have already installed tidyverse before the workshop.</p>
<p>You must load the package in any new R session where you want to use that package. Below I show what you need to type when you want to install the <code>tidyverse</code>, the <code>tidytext</code>, the <code>quanteda</code>, the <code>readxl</code>, and the <code>tm</code> packages (which are the packages that we will need in this workshop).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="introduction-to-r.html#cb5-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb5-2"><a href="introduction-to-r.html#cb5-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidytext&quot;</span>)</span>
<span id="cb5-3"><a href="introduction-to-r.html#cb5-3" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;quanteda&quot;</span>)</span>
<span id="cb5-4"><a href="introduction-to-r.html#cb5-4" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span>
<span id="cb5-5"><a href="introduction-to-r.html#cb5-5" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tm&quot;</span>)</span>
<span id="cb5-6"><a href="introduction-to-r.html#cb5-6" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tokenizers&quot;</span>)</span>
<span id="cb5-7"><a href="introduction-to-r.html#cb5-7" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb5-8"><a href="introduction-to-r.html#cb5-8" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;flextable&quot;</span>)</span>
<span id="cb5-9"><a href="introduction-to-r.html#cb5-9" tabindex="-1"></a><span class="co"># install klippy for copy-to-clipboard button in code chunks</span></span>
<span id="cb5-10"><a href="introduction-to-r.html#cb5-10" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span>
<span id="cb5-11"><a href="introduction-to-r.html#cb5-11" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;rlesur/klippy&quot;</span>)</span></code></pre></div>
<p>To load these packages, use the <code>library</code> function which takes the package name as its main argument.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="introduction-to-r.html#cb6-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb6-2"><a href="introduction-to-r.html#cb6-2" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb6-3"><a href="introduction-to-r.html#cb6-3" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb6-4"><a href="introduction-to-r.html#cb6-4" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb6-5"><a href="introduction-to-r.html#cb6-5" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb6-6"><a href="introduction-to-r.html#cb6-6" tabindex="-1"></a><span class="fu">library</span>(tokenizers)</span>
<span id="cb6-7"><a href="introduction-to-r.html#cb6-7" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb6-8"><a href="introduction-to-r.html#cb6-8" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb6-9"><a href="introduction-to-r.html#cb6-9" tabindex="-1"></a><span class="co"># activate klippy for copy-to-clipboard button</span></span>
<span id="cb6-10"><a href="introduction-to-r.html#cb6-10" tabindex="-1"></a>klippy<span class="sc">::</span><span class="fu">klippy</span>()</span></code></pre></div>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<p>The session preparation section of your Rmd file will thus also state which packages a script relies on.</p>
<p>In script editor pane of RStudio, the code blocks that install and activate packages would look like this:</p>
<p><img src="https://slcladal.github.io/images/RStudio_packages.png" width="100%" /></p>
</div>
<div id="getting-help" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Getting help<a href="introduction-to-r.html#getting-help" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with R, you will encounter issues and face challenges. A very good thing about R is that it provides various ways to get help or find information about the issues you face.</p>
<div id="finding-help-within-r" class="section level4 hasAnchor" number="2.4.3.1">
<h4><span class="header-section-number">2.4.3.1</span> Finding help within R<a href="introduction-to-r.html#finding-help-within-r" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To get help regrading what functions a package contains, which arguments a function takes or to get information about how to use a function, you can use the <code>help</code> function or the <code>apropos</code>. function or you can simply type a <code>?</code> before the package or two <code>??</code> if this does not give you any answers.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="introduction-to-r.html#cb7-1" tabindex="-1"></a><span class="fu">help</span>(tidyverse) </span>
<span id="cb7-2"><a href="introduction-to-r.html#cb7-2" tabindex="-1"></a><span class="fu">apropos</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb7-3"><a href="introduction-to-r.html#cb7-3" tabindex="-1"></a>?require</span></code></pre></div>
<p>There are also other “official” help resources from R/RStudio.</p>
<ul>
<li><p>Read official package documentation, see vignettes, e.g., Tidyverse <a href="https://cran.r-project.org/package=tidyverse" class="uri">https://cran.r-project.org/package=tidyverse</a></p></li>
<li><p>Use the RStudio Cheat Sheets at <a href="https://www.rstudio.com/resources/cheatsheets/" class="uri">https://www.rstudio.com/resources/cheatsheets/</a></p></li>
<li><p>Use the RStudio Help viewer by typing <code>?</code> before a function or package</p></li>
<li><p>Check out the keyboard shortcuts <code>Help</code> under <code>Tools</code> in RStudio for some good tips</p></li>
</ul>
</div>
<div id="finding-help-online" class="section level4 hasAnchor" number="2.4.3.2">
<h4><span class="header-section-number">2.4.3.2</span> Finding help online<a href="introduction-to-r.html#finding-help-online" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One great thing about R is that you can very often find an answer to your question online.</p>
<ul>
<li>Google your error! See <a href="http://r4ds.had.co.nz/introduction.html#getting-help-and-learning-more" class="uri">http://r4ds.had.co.nz/introduction.html#getting-help-and-learning-more</a> for excellent suggestions on how to find help for a specific question online.</li>
</ul>
</div>
</div>
</div>
<div id="working-with-text" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Working with text<a href="introduction-to-r.html#working-with-text" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this section, we will learn how to work with textual data in R and we use positive IMDB reviews as our example texts.</p>
<p>But first, we will learn how to load texts into R.</p>
<div id="loading-text-data" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Loading text data<a href="introduction-to-r.html#loading-text-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many functions that we can use to load text data into R. For example, we can use the <code>readLines</code> function as shown below.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="introduction-to-r.html#cb8-1" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">readLines</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;reviews_pos/textpos1.txt&quot;</span>))</span>
<span id="cb8-2"><a href="introduction-to-r.html#cb8-2" tabindex="-1"></a><span class="co"># inspect first text element</span></span>
<span id="cb8-3"><a href="introduction-to-r.html#cb8-3" tabindex="-1"></a>text</span></code></pre></div>
<pre><code>## [1] &quot;One of the other reviewers has mentioned that after watching just 1 Oz episode you&#39;ll be hooked. They are right, as this is exactly what happened with me.&lt;br /&gt;&lt;br /&gt;The first thing that struck me about Oz was its brutality and unflinching scenes of violence, which set in right from the word GO. Trust me, this is not a show for the faint hearted or timid. This show pulls no punches with regards to drugs, sex or violence. Its is hardcore, in the classic use of the word.&lt;br /&gt;&lt;br /&gt;It is called OZ as that is the nickname given to the Oswald Maximum Security State Penitentary. It focuses mainly on Emerald City, an experimental section of the prison where all the cells have glass fronts and face inwards, so privacy is not high on the agenda. Em City is home to many..Aryans, Muslims, gangstas, Latinos, Christians, Italians, Irish and more....so scuffles, death stares, dodgy dealings and shady agreements are never far away.&lt;br /&gt;&lt;br /&gt;I would say the main appeal of the show is due to the fact that it goes where other shows wouldn&#39;t dare. Forget pretty pictures painted for mainstream audiences, forget charm, forget romance...OZ doesn&#39;t mess around. The first episode I ever saw struck me as so nasty it was surreal, I couldn&#39;t say I was ready for it, but as I watched more, I developed a taste for Oz, and got accustomed to the high levels of graphic violence. Not just violence, but injustice (crooked guards who&#39;ll be sold out for a nickel, inmates who&#39;ll kill on order and get away with it, well mannered, middle class inmates being turned into prison bitches due to their lack of street skills or prison experience) Watching Oz, you may become comfortable with what is uncomfortable viewing....thats if you can get in touch with your darker side.&quot;</code></pre>
<p>To load many texts, we can use a loop to read all texts in a folder as shown below. In a first step, we define the paths of the texts and then, we use the <code>map_chr</code> function from the <code>purrr</code> package to loop over the paths and read them into R. In addition, we add names to the texts based on the paths from where the texts were loaded.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="introduction-to-r.html#cb10-1" tabindex="-1"></a><span class="co"># define paths</span></span>
<span id="cb10-2"><a href="introduction-to-r.html#cb10-2" tabindex="-1"></a>reviews_pos <span class="ot">&lt;-</span> <span class="fu">list.files</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data/reviews_pos&quot;</span>), <span class="at">full.names =</span> T, <span class="at">pattern =</span> <span class="st">&quot;.*txt&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="introduction-to-r.html#cb10-3" tabindex="-1"></a>  <span class="co"># load data</span></span>
<span id="cb10-4"><a href="introduction-to-r.html#cb10-4" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_chr</span>(<span class="sc">~</span> readr<span class="sc">::</span><span class="fu">read_file</span>(.))</span>
<span id="cb10-5"><a href="introduction-to-r.html#cb10-5" tabindex="-1"></a><span class="co"># add names</span></span>
<span id="cb10-6"><a href="introduction-to-r.html#cb10-6" tabindex="-1"></a><span class="fu">names</span>(reviews_pos) <span class="ot">&lt;-</span> <span class="fu">list.files</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data/reviews_pos&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;.*txt&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="introduction-to-r.html#cb10-7" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">&quot;.txt&quot;</span>)</span>
<span id="cb10-8"><a href="introduction-to-r.html#cb10-8" tabindex="-1"></a><span class="co"># inspect first text element</span></span>
<span id="cb10-9"><a href="introduction-to-r.html#cb10-9" tabindex="-1"></a>reviews_pos[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                textpos1 
## &quot;One of the other reviewers has mentioned that after watching just 1 Oz episode you&#39;ll be hooked. They are right, as this is exactly what happened with me.&lt;br /&gt;&lt;br /&gt;The first thing that struck me about Oz was its brutality and unflinching scenes of violence, which set in right from the word GO. Trust me, this is not a show for the faint hearted or timid. This show pulls no punches with regards to drugs, sex or violence. Its is hardcore, in the classic use of the word.&lt;br /&gt;&lt;br /&gt;It is called OZ as that is the nickname given to the Oswald Maximum Security State Penitentary. It focuses mainly on Emerald City, an experimental section of the prison where all the cells have glass fronts and face inwards, so privacy is not high on the agenda. Em City is home to many..Aryans, Muslims, gangstas, Latinos, Christians, Italians, Irish and more....so scuffles, death stares, dodgy dealings and shady agreements are never far away.&lt;br /&gt;&lt;br /&gt;I would say the main appeal of the show is due to the fact that it goes where other shows wouldn&#39;t dare. Forget pretty pictures painted for mainstream audiences, forget charm, forget romance...OZ doesn&#39;t mess around. The first episode I ever saw struck me as so nasty it was surreal, I couldn&#39;t say I was ready for it, but as I watched more, I developed a taste for Oz, and got accustomed to the high levels of graphic violence. Not just violence, but injustice (crooked guards who&#39;ll be sold out for a nickel, inmates who&#39;ll kill on order and get away with it, well mannered, middle class inmates being turned into prison bitches due to their lack of street skills or prison experience) Watching Oz, you may become comfortable with what is uncomfortable viewing....thats if you can get in touch with your darker side.\r\n&quot;</code></pre>
</div>
<div id="saving-text-data" class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Saving text data<a href="introduction-to-r.html#saving-text-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To save many text files on your computer, you need to first define the locations where you want to save the texts and then, in a second step, you save the files (as shown below).</p>
<blockquote>
<p>IMPORTANT: I have created a folder called <code>output</code> in my data folder in which the texts will be saved!</p>
</blockquote>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="introduction-to-r.html#cb12-1" tabindex="-1"></a><span class="co"># define where to save each file</span></span>
<span id="cb12-2"><a href="introduction-to-r.html#cb12-2" tabindex="-1"></a>outs <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;/&quot;</span>, <span class="st">&quot;data/output&quot;</span>, <span class="st">&quot;/&quot;</span>, <span class="fu">names</span>(reviews_pos), <span class="st">&quot;.txt&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb12-3"><a href="introduction-to-r.html#cb12-3" tabindex="-1"></a><span class="fu">head</span>(outs)</span></code></pre></div>
<pre><code>## [1] &quot;F:/data recovery/Uni/UQ/SLC/LADAL/workshops/IntroR_WS/data/output/textpos1.txt&quot;   
## [2] &quot;F:/data recovery/Uni/UQ/SLC/LADAL/workshops/IntroR_WS/data/output/textpos10.txt&quot;  
## [3] &quot;F:/data recovery/Uni/UQ/SLC/LADAL/workshops/IntroR_WS/data/output/textpos100.txt&quot; 
## [4] &quot;F:/data recovery/Uni/UQ/SLC/LADAL/workshops/IntroR_WS/data/output/textpos1000.txt&quot;
## [5] &quot;F:/data recovery/Uni/UQ/SLC/LADAL/workshops/IntroR_WS/data/output/textpos101.txt&quot; 
## [6] &quot;F:/data recovery/Uni/UQ/SLC/LADAL/workshops/IntroR_WS/data/output/textpos102.txt&quot;</code></pre>
<blockquote>
<p>IMPORTANT: I have set the chunk attribute eval to F (FALSE) so that this chunk is npot executed automatically. To run the code chunk, please just click the green “play button” in the top right corner of the code chunk.</p>
</blockquote>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="introduction-to-r.html#cb14-1" tabindex="-1"></a><span class="co"># save the files</span></span>
<span id="cb14-2"><a href="introduction-to-r.html#cb14-2" tabindex="-1"></a><span class="fu">lapply</span>(<span class="fu">seq_along</span>(reviews_pos), <span class="cf">function</span>(i) </span>
<span id="cb14-3"><a href="introduction-to-r.html#cb14-3" tabindex="-1"></a>       <span class="fu">writeLines</span>(reviews_pos[[i]],  </span>
<span id="cb14-4"><a href="introduction-to-r.html#cb14-4" tabindex="-1"></a>       <span class="at">con =</span> outs[i]))</span></code></pre></div>
</div>
<div id="piping" class="section level3 hasAnchor" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Piping<a href="introduction-to-r.html#piping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Piping is done using the <code>%&gt;%</code> sequence and it can be translated as <strong>and then</strong>. In the example below, we take the existing object (text) <em>and then</em> we convert it to upper case <strong>and then</strong> we store the result in a new object (text2).</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="introduction-to-r.html#cb15-1" tabindex="-1"></a>text <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="introduction-to-r.html#cb15-2" tabindex="-1"></a>  <span class="fu">toupper</span>() <span class="ot">-&gt;</span> text2</span>
<span id="cb15-3"><a href="introduction-to-r.html#cb15-3" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb15-4"><a href="introduction-to-r.html#cb15-4" tabindex="-1"></a>text2</span></code></pre></div>
<pre><code>## [1] &quot;ONE OF THE OTHER REVIEWERS HAS MENTIONED THAT AFTER WATCHING JUST 1 OZ EPISODE YOU&#39;LL BE HOOKED. THEY ARE RIGHT, AS THIS IS EXACTLY WHAT HAPPENED WITH ME.&lt;BR /&gt;&lt;BR /&gt;THE FIRST THING THAT STRUCK ME ABOUT OZ WAS ITS BRUTALITY AND UNFLINCHING SCENES OF VIOLENCE, WHICH SET IN RIGHT FROM THE WORD GO. TRUST ME, THIS IS NOT A SHOW FOR THE FAINT HEARTED OR TIMID. THIS SHOW PULLS NO PUNCHES WITH REGARDS TO DRUGS, SEX OR VIOLENCE. ITS IS HARDCORE, IN THE CLASSIC USE OF THE WORD.&lt;BR /&gt;&lt;BR /&gt;IT IS CALLED OZ AS THAT IS THE NICKNAME GIVEN TO THE OSWALD MAXIMUM SECURITY STATE PENITENTARY. IT FOCUSES MAINLY ON EMERALD CITY, AN EXPERIMENTAL SECTION OF THE PRISON WHERE ALL THE CELLS HAVE GLASS FRONTS AND FACE INWARDS, SO PRIVACY IS NOT HIGH ON THE AGENDA. EM CITY IS HOME TO MANY..ARYANS, MUSLIMS, GANGSTAS, LATINOS, CHRISTIANS, ITALIANS, IRISH AND MORE....SO SCUFFLES, DEATH STARES, DODGY DEALINGS AND SHADY AGREEMENTS ARE NEVER FAR AWAY.&lt;BR /&gt;&lt;BR /&gt;I WOULD SAY THE MAIN APPEAL OF THE SHOW IS DUE TO THE FACT THAT IT GOES WHERE OTHER SHOWS WOULDN&#39;T DARE. FORGET PRETTY PICTURES PAINTED FOR MAINSTREAM AUDIENCES, FORGET CHARM, FORGET ROMANCE...OZ DOESN&#39;T MESS AROUND. THE FIRST EPISODE I EVER SAW STRUCK ME AS SO NASTY IT WAS SURREAL, I COULDN&#39;T SAY I WAS READY FOR IT, BUT AS I WATCHED MORE, I DEVELOPED A TASTE FOR OZ, AND GOT ACCUSTOMED TO THE HIGH LEVELS OF GRAPHIC VIOLENCE. NOT JUST VIOLENCE, BUT INJUSTICE (CROOKED GUARDS WHO&#39;LL BE SOLD OUT FOR A NICKEL, INMATES WHO&#39;LL KILL ON ORDER AND GET AWAY WITH IT, WELL MANNERED, MIDDLE CLASS INMATES BEING TURNED INTO PRISON BITCHES DUE TO THEIR LACK OF STREET SKILLS OR PRISON EXPERIENCE) WATCHING OZ, YOU MAY BECOME COMFORTABLE WITH WHAT IS UNCOMFORTABLE VIEWING....THATS IF YOU CAN GET IN TOUCH WITH YOUR DARKER SIDE.&quot;</code></pre>
</div>
<div id="extracting-frequency-information-from-text" class="section level3 hasAnchor" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Extracting frequency information from text<a href="introduction-to-r.html#extracting-frequency-information-from-text" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Frequency lists are very basic but also important when analysing text. Fortunately, it is very easy to extract frequency information and to create frequency lists with R. We can do this by first using the <code>unnest_tokens</code> function which splits texts into individual words, an then use the <code>count</code> function to get the raw frequencies of all word types in a text.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="introduction-to-r.html#cb17-1" tabindex="-1"></a>reviews_pos <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="introduction-to-r.html#cb17-2" tabindex="-1"></a>  <span class="co"># convert to data frame</span></span>
<span id="cb17-3"><a href="introduction-to-r.html#cb17-3" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()<span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="introduction-to-r.html#cb17-4" tabindex="-1"></a>  <span class="co"># give name column with text</span></span>
<span id="cb17-5"><a href="introduction-to-r.html#cb17-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">text =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="introduction-to-r.html#cb17-6" tabindex="-1"></a>  <span class="co"># tokenise</span></span>
<span id="cb17-7"><a href="introduction-to-r.html#cb17-7" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="introduction-to-r.html#cb17-8" tabindex="-1"></a>  <span class="co"># count tokens</span></span>
<span id="cb17-9"><a href="introduction-to-r.html#cb17-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(word, <span class="at">sort=</span>T)</span></code></pre></div>
<pre><code>##     word     n
## 1    the 13395
## 2    and  6869
## 3      a  6487
## 4     of  5998
## 5     to  5153
## 6     is  4351
## 7     br  3968
## 8     in  3827
## 9     it  2982
## 10     i  2935
## 11  this  2845
## 12  that  2552
## 13    as  2025
## 14  with  1817
## 15   was  1709
## 16   for  1699
## 17   but  1571
## 18  film  1558
## 19 movie  1527
## 20    on  1436
## 21   you  1317
## 22   his  1267
## 23   are  1131
## 24    he  1085
## 25   not  1077
## 26   one  1030
## 27  have   962
## 28    be   935
## 29    by   920
## 30    at   918
## 31   all   900
## 32    an   882
## 33   who   881
## 34  from   837
## 35    so   757
## 36   her   733
## 37   has   709
## 38 about   697
## 39  like   685
## 40  they   658
## 41  it&#39;s   638
## 42  very   629
## 43    if   624
## 44   out   613
## 45    or   607
## 46  some   604
## 47  what   582
## 48    my   575
## 49 there   572
## 50  more   565
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 19074 rows ]</code></pre>
<p>Extracting N-grams is also very easy as the <code>unnest_tokens</code> function can an argument called <code>token</code> in which we can specify that we want to extract n-grams, If we do this, then we need to specify the <code>n</code> as a separate argument. Below we specify that we want the frequencies of all 4-grams.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="introduction-to-r.html#cb19-1" tabindex="-1"></a>reviews_pos <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="introduction-to-r.html#cb19-2" tabindex="-1"></a>    <span class="co"># convert to data frame</span></span>
<span id="cb19-3"><a href="introduction-to-r.html#cb19-3" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()<span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="introduction-to-r.html#cb19-4" tabindex="-1"></a>  <span class="co"># give name column with text</span></span>
<span id="cb19-5"><a href="introduction-to-r.html#cb19-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">text =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="introduction-to-r.html#cb19-6" tabindex="-1"></a>  <span class="co"># clean data</span></span>
<span id="cb19-7"><a href="introduction-to-r.html#cb19-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">str_remove_all</span>(text, <span class="st">&quot;&lt;.*?&gt;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-8"><a href="introduction-to-r.html#cb19-8" tabindex="-1"></a>  <span class="co"># tokenise and extract trigrams</span></span>
<span id="cb19-9"><a href="introduction-to-r.html#cb19-9" tabindex="-1"></a>  tidytext<span class="sc">::</span> <span class="fu">unnest_tokens</span>(word, text, <span class="at">token=</span><span class="st">&quot;ngrams&quot;</span>, <span class="at">n=</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-10"><a href="introduction-to-r.html#cb19-10" tabindex="-1"></a>  <span class="co"># count tokens</span></span>
<span id="cb19-11"><a href="introduction-to-r.html#cb19-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(word, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb19-12"><a href="introduction-to-r.html#cb19-12" tabindex="-1"></a>  <span class="co"># inspect ten most frequent tri-grams</span></span>
<span id="cb19-13"><a href="introduction-to-r.html#cb19-13" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##             word   n
## 1     one of the 219
## 2      this is a 127
## 3    some of the  96
## 4      is one of  92
## 5    of the film  92
## 6  this movie is  89
## 7       a lot of  85
## 8   this film is  70
## 9    of the best  68
## 10  of the movie  68</code></pre>
</div>
<div id="regular-expressions" class="section level3 hasAnchor" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> Regular Expressions<a href="introduction-to-r.html#regular-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we focus on regular expressions (to learn more about regular expression, have a look at this very recommendable <a href="https://stringr.tidyverse.org/articles/regular-expressions.html">tutorial</a>). Regular expressions are powerful tools used to search and manipulate text patterns. They provide a way to find specific sequences of characters within larger bodies of text.</p>
<p>There are two basic types of regular expressions:</p>
<ul>
<li><p>regular expressions that stand for frequencies (quantifiers)</p></li>
<li><p>regular expressions that stand for classes of symbols (types)</p></li>
</ul>
<p>The regular expressions below show the first type of regular expressions, i.e. quantifiers.</p>
<p><img src="https://slcladal.github.io/images/regex_tb1.png" width="95%" /></p>
<p>The regular expressions below show the second type of regular expressions, i.e. types.</p>
<p><img src="https://slcladal.github.io/images/regex_tb2.png" width="95%" /></p>
<p>Types can be expanded to include structural properties as shown below.</p>
<p><img src="https://slcladal.github.io/images/regex_tb3.png" width="95%" /></p>
<p>To practice working with regular expressions, we will focus on only the very first positive IMDB movie review and also create a tokenised version of this review:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="introduction-to-r.html#cb21-1" tabindex="-1"></a>review <span class="ot">&lt;-</span> reviews_pos[<span class="dv">4</span>]</span>
<span id="cb21-2"><a href="introduction-to-r.html#cb21-2" tabindex="-1"></a>review_tok <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">tokens</span>(review) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="fu">as.vector</span>()</span>
<span id="cb21-3"><a href="introduction-to-r.html#cb21-3" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb21-4"><a href="introduction-to-r.html#cb21-4" tabindex="-1"></a>review; <span class="fu">str</span>(review_tok)</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                 textpos1000 
## &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<pre><code>##  chr [1:58] &quot;Gary&quot; &quot;Busey&quot; &quot;is&quot; &quot;superb&quot; &quot;in&quot; &quot;this&quot; &quot;musical&quot; &quot;biography&quot; ...</code></pre>
<p>We now want to show all words in the tokenized review that contain <code>y</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="introduction-to-r.html#cb24-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;[y]&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;Gary&quot;      &quot;Busey&quot;     &quot;biography&quot; &quot;Buddy&quot;     &quot;Holly&quot;     &quot;Story&quot;    
## [7] &quot;may&quot;       &quot;Buddy&quot;     &quot;Holly&#39;s&quot;</code></pre>
<p>Show all words in the split tokenized review that begin with a lower case <code>a</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="introduction-to-r.html#cb26-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;^a&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;and&quot; &quot;a&quot;   &quot;a&quot;   &quot;and&quot; &quot;a&quot;</code></pre>
<p>Show all words in the split tokenized review that end in a lower case <code>s</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="introduction-to-r.html#cb28-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;s$&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;is&quot;           &quot;this&quot;         &quot;is&quot;           &quot;comments&quot;     &quot;inaccuracies&quot;
## [6] &quot;Regardless&quot;   &quot;is&quot;           &quot;Holly&#39;s&quot;</code></pre>
<p>Show all words in the split tokenized review in which there is an <code>e</code>, then any other character, and than another <code>n</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="introduction-to-r.html#cb30-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;e.n&quot;</span>)]</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>Show all words in the tokenized review text in which there is an <code>e</code>, then two other characters, and than another <code>n</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="introduction-to-r.html#cb32-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;e.{2,2}n&quot;</span>)]</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>Show all words that consist of exactly three alphabetical characters in the tokenized review .</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="introduction-to-r.html#cb34-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;^[:alpha:]{3,3}$&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;and&quot; &quot;The&quot; &quot;may&quot; &quot;fun&quot; &quot;and&quot;</code></pre>
<p>Show all words that consist of six or more alphabetical characters in the tokenized review.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="introduction-to-r.html#cb36-1" tabindex="-1"></a>review_tok[<span class="fu">str_detect</span>(review_tok, <span class="st">&quot;^[:alpha:]{6,}$&quot;</span>)]</span></code></pre></div>
<pre><code>##  [1] &quot;superb&quot;       &quot;musical&quot;      &quot;biography&quot;    &quot;singing&quot;      &quot;excellent&quot;   
##  [6] &quot;soundtrack&quot;   &quot;better&quot;       &quot;reading&quot;      &quot;comments&quot;     &quot;historical&quot;  
## [11] &quot;inaccuracies&quot; &quot;Regardless&quot;   &quot;introduction&quot;</code></pre>
<p>Replace all lower case <code>a</code>s with upper case <code>E</code>s in the review.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="introduction-to-r.html#cb38-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(review, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;E&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;GEry Busey is superb in this musicEl biogrEphy. GreEt singing End excellent soundtrEck. The Buddy Holly Story is E much better movie thEn LE BEmbE. From reEding other comments, there mEy be some historicEl inEccurEcies. RegErdless, it is E fun toe-tEpping film, End E good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>Remove all non-alphabetical characters in the tokenized review.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="introduction-to-r.html#cb40-1" tabindex="-1"></a><span class="fu">str_remove_all</span>(review_tok, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">W&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;Gary&quot;         &quot;Busey&quot;        &quot;is&quot;           &quot;superb&quot;       &quot;in&quot;          
##  [6] &quot;this&quot;         &quot;musical&quot;      &quot;biography&quot;    &quot;&quot;             &quot;Great&quot;       
## [11] &quot;singing&quot;      &quot;and&quot;          &quot;excellent&quot;    &quot;soundtrack&quot;   &quot;&quot;            
## [16] &quot;The&quot;          &quot;Buddy&quot;        &quot;Holly&quot;        &quot;Story&quot;        &quot;is&quot;          
## [21] &quot;a&quot;            &quot;much&quot;         &quot;better&quot;       &quot;movie&quot;        &quot;than&quot;        
## [26] &quot;La&quot;           &quot;Bamba&quot;        &quot;&quot;             &quot;From&quot;         &quot;reading&quot;     
## [31] &quot;other&quot;        &quot;comments&quot;     &quot;&quot;             &quot;there&quot;        &quot;may&quot;         
## [36] &quot;be&quot;           &quot;some&quot;         &quot;historical&quot;   &quot;inaccuracies&quot; &quot;&quot;            
## [41] &quot;Regardless&quot;   &quot;&quot;             &quot;it&quot;           &quot;is&quot;           &quot;a&quot;           
## [46] &quot;fun&quot;          &quot;toetapping&quot;   &quot;film&quot;         &quot;&quot;             &quot;and&quot;         
## [51] &quot;a&quot;            &quot;good&quot;         &quot;introduction&quot; &quot;to&quot;           &quot;Buddy&quot;       
## [56] &quot;Hollys&quot;       &quot;music&quot;        &quot;&quot;</code></pre>
<p>Remove all white spaces in the review.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="introduction-to-r.html#cb42-1" tabindex="-1"></a><span class="fu">str_remove_all</span>(review, <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;GaryBuseyissuperbinthismusicalbiography.Greatsingingandexcellentsoundtrack.TheBuddyHollyStoryisamuchbettermoviethanLaBamba.Fromreadingothercomments,theremaybesomehistoricalinaccuracies.Regardless,itisafuntoe-tappingfilm,andagoodintroductiontoBuddyHolly&#39;smusic.\r\n&quot;</code></pre>
</div>
<div id="splitting-up-texts" class="section level3 hasAnchor" number="2.5.6">
<h3><span class="header-section-number">2.5.6</span> Splitting-up texts<a href="introduction-to-r.html#splitting-up-texts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can use the <code>str_split</code> function to split texts. However, there are two issues when using this (very useful) function:</p>
<ul>
<li><p>the pattern that we want to split on disappears</p></li>
<li><p>the output is a list (a special type of data format)</p></li>
</ul>
<p>To remedy these issues, we</p>
<ul>
<li><p>combine the <code>str_split</code> function with the <code>unlist</code> function</p></li>
<li><p>add something right at the beginning of the pattern that we use to split the text.
To add something to the beginning of the pattern that we want to split the text by, we use the <code>str_replace_all</code> function. The <code>str_replace_all</code> function takes three arguments, 1. the <strong>text</strong>, 2. the <strong>pattern</strong> that should be replaced, 3. the <strong>replacement</strong>. In the example below, we add <code>~~~</code> to the sequence <code>movie</code> and then split on the <code>~~~</code> rather than on the sequence “movie” (in other words, we replace <code>movie</code> with <code>~~~movie</code> and then split on <code>~~~</code>).</p></li>
</ul>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="introduction-to-r.html#cb44-1" tabindex="-1"></a>reviews_pos_split <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">str_split</span>(</span>
<span id="cb44-2"><a href="introduction-to-r.html#cb44-2" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(reviews_pos, <span class="st">&quot;movie&quot;</span>, <span class="st">&quot;~~~movie&quot;</span>),</span>
<span id="cb44-3"><a href="introduction-to-r.html#cb44-3" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&quot;~~~&quot;</span>))</span>
<span id="cb44-4"><a href="introduction-to-r.html#cb44-4" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb44-5"><a href="introduction-to-r.html#cb44-5" tabindex="-1"></a><span class="fu">nchar</span>(reviews_pos_split); <span class="fu">str</span>(reviews_pos_split)</span></code></pre></div>
<pre><code>##   [1] 1763  641  584  458  127  184 3847  152  685   30  105   92   43   27   11
##  [16]  716  465  417  262  107   59  747  370 1550  122 1693  714   45  726   80
##  [31]  224  906  250  521 1939 2708 1205 2572  819  717   28  109  211   31  554
##  [46]  289  914  440   65  561   62  196   33   55   40  200  121  616   82  135
##  [61]  293   47  280   21  232   89   99  353 2003  379   42   36   42  315  751
##  [76]   33   53  220 1147 1766   11  221   99  214  610   72   27  792  254  131
##  [91]  253   88  250  111   64   84  465  103   10  372
##  [ reached getOption(&quot;max.print&quot;) -- omitted 2747 entries ]</code></pre>
<pre><code>##  chr [1:2847] &quot;One of the other reviewers has mentioned that after watching just 1 Oz episode you&#39;ll be hooked. They are right&quot;| __truncated__ ...</code></pre>
</div>
<div id="basic-string-processing" class="section level3 hasAnchor" number="2.5.7">
<h3><span class="header-section-number">2.5.7</span> Basic String Processing<a href="introduction-to-r.html#basic-string-processing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before turning to more advanced string processing (in the context of computation, texts are referred to as strings) using the <code>stringr</code> package, let us just focus on some basic functions that are extremely useful when working with texts.</p>
<p>A very useful function is, e.g. <code>tolower</code> which converts everything to lower case.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="introduction-to-r.html#cb47-1" tabindex="-1"></a><span class="fu">tolower</span>(reviews_pos[<span class="dv">4</span>])</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                 textpos1000 
## &quot;gary busey is superb in this musical biography. great singing and excellent soundtrack. the buddy holly story is a much better movie than la bamba. from reading other comments, there may be some historical inaccuracies. regardless, it is a fun toe-tapping film, and a good introduction to buddy holly&#39;s music.\r\n&quot;</code></pre>
<p>Conversely, <code>toupper</code> converts everything to upper case.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="introduction-to-r.html#cb49-1" tabindex="-1"></a><span class="fu">toupper</span>(reviews_pos[<span class="dv">4</span>])</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                 textpos1000 
## &quot;GARY BUSEY IS SUPERB IN THIS MUSICAL BIOGRAPHY. GREAT SINGING AND EXCELLENT SOUNDTRACK. THE BUDDY HOLLY STORY IS A MUCH BETTER MOVIE THAN LA BAMBA. FROM READING OTHER COMMENTS, THERE MAY BE SOME HISTORICAL INACCURACIES. REGARDLESS, IT IS A FUN TOE-TAPPING FILM, AND A GOOD INTRODUCTION TO BUDDY HOLLY&#39;S MUSIC.\r\n&quot;</code></pre>
<p>The <code>stringr</code> package (see <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/strings.pdf">here</a> is part of the so-called <em>tidyverse</em> - a collection of packages that allows to write R code in a readable manner - and it is the most widely used package for string processing in . The advantage of using <code>stringr</code> is that it makes string processing very easy. All <code>stringr</code> functions share a common structure:</p>
<p><code>str_function(string, pattern)</code></p>
<p>The two arguments in the structure of <code>stringr</code> functions are: <em>string</em> which is the character string to be processed and a pattern which is either a simple sequence of characters, a regular expression, or a combination of both. Because the <em>string</em> comes first, the <code>stringr</code> functions are ideal for piping and thus use in tidyverse style R.</p>
<p>All function names of <code>stringr</code> begin with str, then an underscore and then the name of the action to be performed. For example, to replace the first occurrence of a pattern in a string, we should use <code>str_replace()</code>. In the following, we will use <code>stringr</code> functions to perform various operations on the example text. As we have already loaded the <code>tidyverse</code> package, we can start right away with using <code>stringr</code> functions as shown below.</p>
<p>Like <code>nchar</code> in <code>base</code>, <code>str_count</code> provides the number of characters of a text.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="introduction-to-r.html#cb51-1" tabindex="-1"></a><span class="fu">str_count</span>(reviews_pos[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span></code></pre></div>
<pre><code>## [1] 1762  640 1041  310 3846</code></pre>
<p>The function <code>str_detect</code> informs about whether a pattern is present in a text and outputs a logical vector with <em>TRUE</em> if the pattern occurs and <em>FALSE</em> if it does not.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="introduction-to-r.html#cb53-1" tabindex="-1"></a><span class="fu">str_detect</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>The function <code>str_extract</code> extracts the first occurrence of a pattern, if that pattern is present in a text.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="introduction-to-r.html#cb55-1" tabindex="-1"></a><span class="fu">str_extract</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;and&quot;</code></pre>
<p>The function <code>str_extract_all</code> extracts all occurrences of a pattern, if that pattern is present in a text.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="introduction-to-r.html#cb57-1" tabindex="-1"></a><span class="fu">str_extract_all</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;and&quot; &quot;and&quot;</code></pre>
<p>The function <code>str_locate</code> provides the start and end position of the match of the pattern in a text.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="introduction-to-r.html#cb59-1" tabindex="-1"></a><span class="fu">str_locate</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>##      start end
## [1,]    63  65</code></pre>
<p>The function <code>str_locate_all</code> provides the start and end positions of the match of the pattern in a text and displays the result in matrix-form.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="introduction-to-r.html#cb61-1" tabindex="-1"></a><span class="fu">str_locate_all</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]    63  65
## [2,]   263 265</code></pre>
<p>The function <code>str_match</code> extracts the first occurrence of the pattern in a text.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="introduction-to-r.html#cb63-1" tabindex="-1"></a><span class="fu">str_match</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>##      [,1] 
## [1,] &quot;and&quot;</code></pre>
<p>The function <code>str_match_all</code> extracts the all occurrences of the pattern from a text.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="introduction-to-r.html#cb65-1" tabindex="-1"></a><span class="fu">str_match_all</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
##      [,1] 
## [1,] &quot;and&quot;
## [2,] &quot;and&quot;</code></pre>
<p>The function <code>str_remove</code> removes the first occurrence of a pattern in a text.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="introduction-to-r.html#cb67-1" tabindex="-1"></a><span class="fu">str_remove</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing  excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_remove_all</code> removes all occurrences of a pattern from a text.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="introduction-to-r.html#cb69-1" tabindex="-1"></a><span class="fu">str_remove_all</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing  excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film,  a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_replace</code> replaces the first occurrence of a pattern with something else in a text.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="introduction-to-r.html#cb71-1" tabindex="-1"></a><span class="fu">str_replace</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>, <span class="st">&quot;AND&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing AND excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_replace_all</code> replaces all occurrences of a pattern with something else in a text.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="introduction-to-r.html#cb73-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>, <span class="st">&quot;AND&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing AND excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, AND a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_starts</code> tests whether a given text begins with a certain pattern and outputs a logical vector.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="introduction-to-r.html#cb75-1" tabindex="-1"></a><span class="fu">str_starts</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>The function <code>str_ends</code> tests whether a text ends with a certain pattern and outputs a logical vector.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="introduction-to-r.html#cb77-1" tabindex="-1"></a><span class="fu">str_ends</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Like <code>strsplit</code>, the function <code>str_split</code> splits a text when a given pattern occurs. If no pattern is provided, then the text is split into individual symbols.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="introduction-to-r.html#cb79-1" tabindex="-1"></a><span class="fu">str_split</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Gary Busey is superb in this musical biography. Great singing &quot;                                                                                                                                       
## [2] &quot; excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, &quot;
## [3] &quot; a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_split_fixed</code> splits a text when a given pattern occurs but only so often as is indicated by the argument <code>n</code>. So, even if the patter occur more often than <code>n</code>, <code>str_split_fixed</code> will only split the text <code>n</code> times.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="introduction-to-r.html#cb81-1" tabindex="-1"></a><span class="fu">str_split_fixed</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##      [,1]                                                            
## [1,] &quot;Gary Busey is superb in this musical biography. Great singing &quot;
##      [,2]                                                                                                                                                                                                   
## [1,] &quot; excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, &quot;
##      [,3]                                              
## [1,] &quot; a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_subset</code> extracts those subsets of a text that contain a certain pattern.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="introduction-to-r.html#cb83-1" tabindex="-1"></a><span class="fu">str_subset</span>(review_tok, <span class="st">&quot;and&quot;</span>) </span></code></pre></div>
<pre><code>## [1] &quot;and&quot; &quot;and&quot;</code></pre>
<p>The function <code>str_which</code> provides a vector with the indices of the texts that contain a certain pattern.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="introduction-to-r.html#cb85-1" tabindex="-1"></a><span class="fu">str_which</span>(review_tok, <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 12 50</code></pre>
<p>The function <code>str_view</code> shows the locations of the first instances of a pattern in a text or vector of texts.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="introduction-to-r.html#cb87-1" tabindex="-1"></a><span class="fu">str_view</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ Gary Busey is superb in this musical biography. Great singing &lt;and&gt; excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, &lt;and&gt; a good introduction to Buddy Holly&#39;s music.{\r}
##     │</code></pre>
<p>The function <code>str_view_all</code> shows the locations of all instances of a pattern in a text or vector of texts.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="introduction-to-r.html#cb89-1" tabindex="-1"></a><span class="fu">str_view_all</span>(reviews_pos[<span class="dv">4</span>], <span class="st">&quot;and&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ Gary Busey is superb in this musical biography. Great singing &lt;and&gt; excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, &lt;and&gt; a good introduction to Buddy Holly&#39;s music.{\r}
##     │</code></pre>
<p>The function <code>str_pad</code> adds white spaces to a text or vector of texts so that they reach a given number of symbols.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="introduction-to-r.html#cb91-1" tabindex="-1"></a><span class="co"># create text with white spaces</span></span>
<span id="cb91-2"><a href="introduction-to-r.html#cb91-2" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="st">&quot; this    is a    text   &quot;</span></span>
<span id="cb91-3"><a href="introduction-to-r.html#cb91-3" tabindex="-1"></a><span class="fu">str_pad</span>(text, <span class="at">width =</span> <span class="dv">30</span>)</span></code></pre></div>
<pre><code>## [1] &quot;       this    is a    text   &quot;</code></pre>
<p>The function <code>str_trim</code> removes white spaces from the beginning(s) and end(s) of a text or vector of texts.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="introduction-to-r.html#cb93-1" tabindex="-1"></a><span class="fu">str_trim</span>(text) </span></code></pre></div>
<pre><code>## [1] &quot;this    is a    text&quot;</code></pre>
<p>The function <code>str_squish</code> removes white spaces that occur within a text or vector of texts.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="introduction-to-r.html#cb95-1" tabindex="-1"></a><span class="fu">str_squish</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;this is a text&quot;</code></pre>
<p>The function <code>str_wrap</code> removes white spaces from the beginning(s) and end(s) of a text or vector of texts and also those white spaces that occur within a text or vector of texts.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="introduction-to-r.html#cb97-1" tabindex="-1"></a><span class="fu">str_wrap</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;this is a text&quot;</code></pre>
<p>The function <code>str_order</code> provides a vector that represents the order of a vector of texts according to the lengths of texts in that vector.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="introduction-to-r.html#cb99-1" tabindex="-1"></a><span class="fu">str_order</span>(reviews_pos_split)</span></code></pre></div>
<pre><code>##   [1] 1522 2196  170 2011 1320 2161  231 1771 2525 1876  272  936 1413  287 1988
##  [16] 1276   40 1630  530 1727  168  127 2676 1826 2457 1420  438 2332 2696  528
##  [31]  910 2808 2279  828 2162 1580 2282  942 2081 2029 1811 2440 1036 2178  258
##  [46] 2024  622 1728  469 1196 1577 1606  772 1059 2227 1336 1963  313 1888  745
##  [61] 1202 1713  270  883 2126 2500 1111 2220 1965 1353  331 1558 1659  552 2339
##  [76] 1683  904 1144  323 2666 1803  698   70 1928 2016 2090 2747 1167 1007 1137
##  [91] 1175   25 2408 1663 2359 2576 1238  364  882  177
##  [ reached getOption(&quot;max.print&quot;) -- omitted 2747 entries ]</code></pre>
<p>The function <code>str_sort</code> orders of a vector of texts according to the lengths of texts in that vector.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="introduction-to-r.html#cb101-1" tabindex="-1"></a><span class="fu">str_sort</span>(reviews_pos_split) <span class="sc">%&gt;%</span></span>
<span id="cb101-2"><a href="introduction-to-r.html#cb101-2" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;...And there were quite a few of these. &lt;br /&gt;&lt;br /&gt;I do not like this cartoon as much as many others, partly because it was made in its period. I much prefer cartoons with Daffy and Bugs which are fifteen or so years before-hand. Many people will like this, particularly people who always find violence funny, cartoon or not.&lt;br /&gt;&lt;br /&gt;The basic plot is a pretty well known one for Looney Tunes: Elmer goes out hunting, Daffy leads him to Bugs and Daffy ends up being shot instead. Also inserted are quite clever and highly entertaining jokes (some do not enhance the episode), ugly shooting and animation which is slightly mediocre. The plot is mainly geared by jokes - each joke keeps the episode going. This way of plot-going is not all that unusual in Looney Tunes (of course if you are pretty much a Looney Tunes boffin - or an eager one - like me, then you&#39;ll know this already).&lt;br /&gt;&lt;br /&gt;For people who love everything about Looney Tunes and Daffy Duck and like the sound of what I have said about it, enjoy \&quot;Rabbit Seasoning\&quot;!&lt;br /&gt;&lt;br /&gt;7 and a half out of ten.\r\n&quot;                                                                                                               
## [2] &quot;&#39;Had Ned Kelly been born later he probably would have won a Victoria Cross at Gallipolli&#39;. such was Ned&#39;s Bravery.&lt;br /&gt;&lt;br /&gt;In Australia and especially country Victoria the name Ned Kelly can be said and immediately recognised. In Greta he is still a Hero, the life Blood of the Town of Jerilderie depends on the tourism he created, but in Mansfield they still haven&#39;t forgotten that the three policeman that he &#39;murdered&#39; were from there.&lt;br /&gt;&lt;br /&gt;Many of the buildings he visited in his life are still standing. From the Old Melbourne Gaol where he was hanged, to the Post office he held up in Jerilderie. A cell he was once held in in Greta is on display in Benella and the site of Ann Jones&#39; Hotel, the station and even the logs where he was captured in Glenrowan can be visited.&lt;br /&gt;&lt;br /&gt;Evidence of all the events in the &quot;                                                                                                                                                                                                                                                                                                                                                                      
## [3] &quot;&#39;War &quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
## [4] &quot;&#39;What I Like About You&#39; is definitely a show that I couldn&#39;t wait to see each day. Amanda Bynes is such an excellent actress and I grew up watching her show: &#39;The Amanda Show.&#39; She&#39;s a very funny person and seems to be down to earth. \&quot;Holly\&quot; is such a like-able person and has an \&quot;out-there\&quot; personality. I enjoyed how she always seemed to turn things around and upside down, so she messed herself up at times. But that&#39;s what made the show so great.&lt;br /&gt;&lt;br /&gt;I especially loved the show when the character &#39;Vince&#39; came along. Nick Zano is very HOT and funny, as well as &#39;Gary&#39;, Wesley Jonathan. The whole cast was great, each character had their own personality and charm. Jennie Garth, Allison Munn, and Leslie Grossman were all very interesting. I especially loved &#39;Lauren&#39;; she&#39;s the best! She helped make the show extra funny and you never know what she&#39;s gonna do or say next! Overall the show is really nice but the reason I didn&#39;t give it a 10 was because there&#39;s no more new episodes and because the episodes could&#39;ve been longer and more deep.\r\n&quot;                                                                                                                                
## [5] &quot;\&quot; Så som i himmelen \&quot; .. as above so below.. that very special point where Divine and Human meet. I ADORE this film ! A gem. YES amazing grace !&lt;br /&gt;&lt;br /&gt;I was so deeply moved by its very HUMAN quality. I laughed and cried through a whole register , indeed several octaves of emotions.&lt;br /&gt;&lt;br /&gt;Mikael Nyqvist ís BRILLIANT as Daniel , a first rate passionate performance, charismatic and powerful. His inner light and exceptional talent shines through in every scene, every interaction ,in every meeting. I was totally mesmerised, enchanted and caught up the story, which is our collective story, the story of life itself.&lt;br /&gt;&lt;br /&gt;The film was also so inclusive of many archetypes, messiah, wounded child ,magical child, artist, teacher, priest, abuser, abused, victim, bully, divine fool - ALL the characters so real and true to life - all awakened great fondness and compassion in me. &lt;br /&gt;&lt;br /&gt;It is a real treat to see such a thought provoking yet thoroughly enjoyable, entertaining film. Oh ..mustn&#39;t forget the heavenly choir of angels and breathtakingly beautiful sound. &lt;br /&gt;&lt;br /&gt;THANK YOU ALL - This Swedish film will surely captivate people world-wide. BRILLIANT !\r\n&quot;
## [6] &quot;\&quot;Ah Ritchie&#39;s made another gangster film with Statham\&quot; thought the average fan, expecting another Snatch/Lock Stock; expecting perhaps a couple of temporal shifts, but none too hard for \&quot;me and the lads\&quot; to swallow after a few beers.&lt;br /&gt;&lt;br /&gt;Ah, pay attention, you do need to watch this film. No cups of tea, no extra diet cokes from the counter, no \&quot;keep it running\&quot; shouts as you nip to the fridge - watch the film! No laughs other than those you may make yourself from the considerable violence (and if that floats your boat, so be it) but sharp solid direction, excellent dialogue, and great performances.&lt;br /&gt;&lt;br /&gt;My favourite - Big Pussy from The Sopranos, always a reliable hood.\r\n&quot;</code></pre>
<p>The function <code>str_to_upper</code> converts all symbols in a text or vector of texts to upper case.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="introduction-to-r.html#cb103-1" tabindex="-1"></a><span class="fu">str_to_upper</span>(reviews_pos[<span class="dv">4</span>]) </span></code></pre></div>
<pre><code>## [1] &quot;GARY BUSEY IS SUPERB IN THIS MUSICAL BIOGRAPHY. GREAT SINGING AND EXCELLENT SOUNDTRACK. THE BUDDY HOLLY STORY IS A MUCH BETTER MOVIE THAN LA BAMBA. FROM READING OTHER COMMENTS, THERE MAY BE SOME HISTORICAL INACCURACIES. REGARDLESS, IT IS A FUN TOE-TAPPING FILM, AND A GOOD INTRODUCTION TO BUDDY HOLLY&#39;S MUSIC.\r\n&quot;</code></pre>
<p>The function <code>str_to_lower</code> converts all symbols in a text or vector of texts to lower case.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="introduction-to-r.html#cb105-1" tabindex="-1"></a><span class="fu">str_to_lower</span>(reviews_pos[<span class="dv">4</span>]) </span></code></pre></div>
<pre><code>## [1] &quot;gary busey is superb in this musical biography. great singing and excellent soundtrack. the buddy holly story is a much better movie than la bamba. from reading other comments, there may be some historical inaccuracies. regardless, it is a fun toe-tapping film, and a good introduction to buddy holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_c</code> combines texts into one text</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="introduction-to-r.html#cb107-1" tabindex="-1"></a><span class="fu">str_c</span>(reviews_pos[<span class="dv">4</span>], reviews_pos[<span class="dv">7</span>])</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\nI think this is one hell of a movie...........We can see Steven fighting around with his martial art stuff again and like in all Segal movies there&#39;s a message in it, without the message it would be one of many action/fighting movies but the message is what makes segal movies great and special.\r\n&quot;</code></pre>
<p>The function <code>str_conv</code> converts a text into a certain type of encoding, e.g. into <code>UTF-8</code> or <code>Latin1</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="introduction-to-r.html#cb109-1" tabindex="-1"></a><span class="fu">str_conv</span>(reviews_pos[<span class="dv">4</span>], <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_dup</code> reduplicates a text or a vector of texts n times.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="introduction-to-r.html#cb111-1" tabindex="-1"></a><span class="fu">str_dup</span>(reviews_pos[<span class="dv">4</span>], <span class="at">times=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\nGary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>The function <code>str_flatten</code> combines a vector of texts into one text. The argument <code>collapse</code> defines the symbol that occurs between the combined texts. If the argument <code>collapse</code> is left out, the texts will be combined without any symbol between the combined texts.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="introduction-to-r.html#cb113-1" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(reviews_pos[<span class="dv">4</span>], reviews_pos[<span class="dv">7</span>]), <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\n I think this is one hell of a movie...........We can see Steven fighting around with his martial art stuff again and like in all Segal movies there&#39;s a message in it, without the message it would be one of many action/fighting movies but the message is what makes segal movies great and special.\r\n&quot;</code></pre>
<p>If the argument <code>collapse</code> is left out, the texts will be combined without any symbol between the combined texts.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="introduction-to-r.html#cb115-1" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(reviews_pos[<span class="dv">4</span>], reviews_pos[<span class="dv">7</span>]))</span></code></pre></div>
<pre><code>## [1] &quot;Gary Busey is superb in this musical biography. Great singing and excellent soundtrack. The Buddy Holly Story is a much better movie than La Bamba. From reading other comments, there may be some historical inaccuracies. Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.\r\nI think this is one hell of a movie...........We can see Steven fighting around with his martial art stuff again and like in all Segal movies there&#39;s a message in it, without the message it would be one of many action/fighting movies but the message is what makes segal movies great and special.\r\n&quot;</code></pre>
<p>The function <code>str_length</code> provides the length of texts in characters.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="introduction-to-r.html#cb117-1" tabindex="-1"></a><span class="fu">str_length</span>(reviews_pos[<span class="dv">4</span>])</span></code></pre></div>
<pre><code>## [1] 311</code></pre>
<p>The function <code>str_replace_na</code> replaces NA in texts. It is important to note that NA, if it occurs within a string, is considered to be the literal string <code>NA</code>.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="introduction-to-r.html#cb119-1" tabindex="-1"></a><span class="co"># create sentences with NA</span></span>
<span id="cb119-2"><a href="introduction-to-r.html#cb119-2" tabindex="-1"></a>sentencesna <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Some text&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;Some more text&quot;</span>, <span class="st">&quot;Some NA text&quot;</span>)</span>
<span id="cb119-3"><a href="introduction-to-r.html#cb119-3" tabindex="-1"></a><span class="co"># apply str_replace_na function</span></span>
<span id="cb119-4"><a href="introduction-to-r.html#cb119-4" tabindex="-1"></a><span class="fu">str_replace_na</span>(sentencesna, <span class="at">replacement =</span> <span class="st">&quot;Something new&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Some text&quot;      &quot;Something new&quot;  &quot;Some more text&quot; &quot;Some NA text&quot;</code></pre>
<p>The function <code>str_trunc</code> ends strings with … after a certain number of characters.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="introduction-to-r.html#cb121-1" tabindex="-1"></a><span class="fu">str_trunc</span>(reviews_pos[<span class="dv">4</span>], <span class="at">width =</span> <span class="dv">20</span>)</span></code></pre></div>
<pre><code>##            textpos1000 
## &quot;Gary Busey is sup...&quot;</code></pre>
<p>The function <code>str_sub</code> extracts a string from a text from a start location to an end position (expressed as character positions).</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="introduction-to-r.html#cb123-1" tabindex="-1"></a><span class="fu">str_sub</span>(reviews_pos[<span class="dv">4</span>], <span class="dv">5</span>, <span class="dv">25</span>)</span></code></pre></div>
<pre><code>## [1] &quot; Busey is superb in t&quot;</code></pre>
<p>The function <code>word</code> extracts words from a text (expressed as word positions).</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="introduction-to-r.html#cb125-1" tabindex="-1"></a><span class="fu">word</span>(reviews_pos[<span class="dv">4</span>], <span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Busey&quot;   &quot;is&quot;      &quot;superb&quot;  &quot;in&quot;      &quot;this&quot;    &quot;musical&quot;</code></pre>
<p>The function <code>str_glue</code> combines strings and allows to input variables.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="introduction-to-r.html#cb127-1" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Fred&quot;</span></span>
<span id="cb127-2"><a href="introduction-to-r.html#cb127-2" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb127-3"><a href="introduction-to-r.html#cb127-3" tabindex="-1"></a>anniversary <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;1991-10-12&quot;</span>)</span>
<span id="cb127-4"><a href="introduction-to-r.html#cb127-4" tabindex="-1"></a><span class="fu">str_glue</span>(</span>
<span id="cb127-5"><a href="introduction-to-r.html#cb127-5" tabindex="-1"></a>  <span class="st">&quot;My name is {name}, &quot;</span>,</span>
<span id="cb127-6"><a href="introduction-to-r.html#cb127-6" tabindex="-1"></a>  <span class="st">&quot;my age next year is {age + 1}, &quot;</span>,</span>
<span id="cb127-7"><a href="introduction-to-r.html#cb127-7" tabindex="-1"></a>  <span class="st">&quot;and my anniversary is {format(anniversary, &#39;%A, %B %d, %Y&#39;)}.&quot;</span></span>
<span id="cb127-8"><a href="introduction-to-r.html#cb127-8" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## My name is Fred, my age next year is 51, and my anniversary is Saturday, October 12, 1991.</code></pre>
</div>
<div id="advanced-string-processing" class="section level3 unnumbered hasAnchor">
<h3>Advanced String Processing<a href="introduction-to-r.html#advanced-string-processing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Above, we have used functions and regular expressions to extract and find patters in textual data. Here, we will focus on common methods for cleaning text data that are applied before implementing certain methods.</p>
<p>We start by installing and then loading some additional packages, e.g., the <code>quanteda</code> (see <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/quanteda.pdf">here</a> for a cheat sheet for the <code>quanteda</code> package), the <code>tm</code>, and the <code>udpipe</code> package, which are extremely useful when dealing with more advanced text processing.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="introduction-to-r.html#cb129-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;quanteda&quot;</span>)</span>
<span id="cb129-2"><a href="introduction-to-r.html#cb129-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tm&quot;</span>)</span>
<span id="cb129-3"><a href="introduction-to-r.html#cb129-3" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;udpipe&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="introduction-to-r.html#cb130-1" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb130-2"><a href="introduction-to-r.html#cb130-2" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb130-3"><a href="introduction-to-r.html#cb130-3" tabindex="-1"></a><span class="fu">library</span>(udpipe) </span></code></pre></div>
<p>One common procedure is to split texts into sentences which we can do by using, e.g., the <code>tokenize_sentence</code> function from the <code>quanteda</code> package. I also unlist the data to have a vector wot work with (rather than a list).</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="introduction-to-r.html#cb131-1" tabindex="-1"></a>et_sent <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">tokenize_sentence</span>(reviews_pos[<span class="dv">4</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb131-2"><a href="introduction-to-r.html#cb131-2" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb131-3"><a href="introduction-to-r.html#cb131-3" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb131-4"><a href="introduction-to-r.html#cb131-4" tabindex="-1"></a>et_sent</span></code></pre></div>
<pre><code>##                                                                                textpos10001 
##                                           &quot;Gary Busey is superb in this musical biography.&quot; 
##                                                                                textpos10002 
##                                                   &quot;Great singing and excellent soundtrack.&quot; 
##                                                                                textpos10003 
##                               &quot;The Buddy Holly Story is a much better movie than La Bamba.&quot; 
##                                                                                textpos10004 
##                   &quot;From reading other comments, there may be some historical inaccuracies.&quot; 
##                                                                                textpos10005 
## &quot;Regardless, it is a fun toe-tapping film, and a good introduction to Buddy Holly&#39;s music.&quot; 
##                                                                                textpos10006 
##                                                                                          &quot;&quot;</code></pre>
<p>Another common procedure is to remove stop words, i.e., words that do not have semantic or referential meaning (like nouns such as <em>tree</em> or <em>cat</em>, or verbs like <em>sit</em> or <em>speak</em> or adjectives such as <em>green</em> or <em>loud</em>) but that indicate syntactic relations, roles, or features.(e.g., articles and pronouns). We can remove stopwords using, e.g., the <code>removeWords</code> function from the <code>tm</code> package</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="introduction-to-r.html#cb133-1" tabindex="-1"></a>et_wostop <span class="ot">&lt;-</span>  tm<span class="sc">::</span><span class="fu">removeWords</span>(reviews_pos[<span class="dv">4</span>], tm<span class="sc">::</span><span class="fu">stopwords</span>(<span class="st">&quot;english&quot;</span>))</span>
<span id="cb133-2"><a href="introduction-to-r.html#cb133-2" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb133-3"><a href="introduction-to-r.html#cb133-3" tabindex="-1"></a>et_wostop</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                    textpos1000 
## &quot;Gary Busey  superb   musical biography. Great singing  excellent soundtrack. The Buddy Holly Story   much better movie  La Bamba. From reading  comments,  may   historical inaccuracies. Regardless,    fun toe-tapping film,   good introduction  Buddy Holly&#39;s music.\r\n&quot;</code></pre>
<p>To remove the superfluous whote spaces, we can use, e.g., the <code>stripWhitespace</code> function from the <code>tm</code> package.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="introduction-to-r.html#cb135-1" tabindex="-1"></a>et_wows <span class="ot">&lt;-</span>  tm<span class="sc">::</span><span class="fu">stripWhitespace</span>(et_wostop)</span>
<span id="cb135-2"><a href="introduction-to-r.html#cb135-2" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb135-3"><a href="introduction-to-r.html#cb135-3" tabindex="-1"></a>et_wows</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                textpos1000 
## &quot;Gary Busey superb musical biography. Great singing excellent soundtrack. The Buddy Holly Story much better movie La Bamba. From reading comments, may historical inaccuracies. Regardless, fun toe-tapping film, good introduction Buddy Holly&#39;s music. &quot;</code></pre>
<p>It can also be useful to remove numbers. We can do this using, e.g., the <code>removeNumbers</code> function from the <code>tm</code> package.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="introduction-to-r.html#cb137-1" tabindex="-1"></a>et_wonum <span class="ot">&lt;-</span>  tm<span class="sc">::</span><span class="fu">removeNumbers</span>(<span class="st">&quot;This is the 1 and only sentence I will write in 2022.&quot;</span>)</span>
<span id="cb137-2"><a href="introduction-to-r.html#cb137-2" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb137-3"><a href="introduction-to-r.html#cb137-3" tabindex="-1"></a>et_wonum</span></code></pre></div>
<pre><code>## [1] &quot;This is the  and only sentence I will write in .&quot;</code></pre>
<p>We may also want to remove any type of punctuation using, e.g., the <code>removePunctuation</code> function from the <code>tm</code> package.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="introduction-to-r.html#cb139-1" tabindex="-1"></a>et_wopunct <span class="ot">&lt;-</span>  tm<span class="sc">::</span><span class="fu">removePunctuation</span>(reviews_pos[<span class="dv">4</span>])</span>
<span id="cb139-2"><a href="introduction-to-r.html#cb139-2" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb139-3"><a href="introduction-to-r.html#cb139-3" tabindex="-1"></a>et_wopunct</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                       textpos1000 
## &quot;Gary Busey is superb in this musical biography Great singing and excellent soundtrack The Buddy Holly Story is a much better movie than La Bamba From reading other comments there may be some historical inaccuracies Regardless it is a fun toetapping film and a good introduction to Buddy Hollys music\r\n&quot;</code></pre>
<p>We may also want to stem the words in a document, i.e. removing the ends of words to be able to group together semantically related words such as <em>walk</em>, <em>walks</em>, <em>walking</em>, <em>walked</em> which would all be stemmed into <em>walk</em>. We can stem a text using, e.g., the <code>stemDocument</code> function from the <code>tm</code> package.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="introduction-to-r.html#cb141-1" tabindex="-1"></a>et_stem <span class="ot">&lt;-</span>  tm<span class="sc">::</span><span class="fu">stemDocument</span>(reviews_pos[<span class="dv">4</span>], <span class="at">language =</span> <span class="st">&quot;en&quot;</span>)</span>
<span id="cb141-2"><a href="introduction-to-r.html#cb141-2" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb141-3"><a href="introduction-to-r.html#cb141-3" tabindex="-1"></a>et_stem</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                   textpos1000 
## &quot;Gari Busey is superb in this music biography. Great sing and excel soundtrack. The Buddi Holli Stori is a much better movi than La Bamba. From read other comments, there may be some histor inaccuracies. Regardless, it is a fun toe-tap film, and a good introduct to Buddi Holli music.&quot;</code></pre>
<p><strong>Tokenization, lemmatization, pos-tagging, and dependency parsing</strong></p>
<p>A far better option than stemming is lemmatization as lemmatization is based on proper morphological information and vocabularies. For lemmatization, we can use the <code>udpipe</code> package which also tokenizes texts, adds part-of-speech tags, and provides information about dependency relations.</p>
<p>Before we can tokenize, lemmatize, pos-tag and parse though, we need to download a pre-trained language model.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="introduction-to-r.html#cb143-1" tabindex="-1"></a><span class="co"># download language model</span></span>
<span id="cb143-2"><a href="introduction-to-r.html#cb143-2" tabindex="-1"></a>m_eng   <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_download_model</span>(<span class="at">language =</span> <span class="st">&quot;english-ewt&quot;</span>)</span></code></pre></div>
<p>If you have downloaded a model once, you can also load the model directly from the place where you stored it on your computer. In my case, I have stored the model in a folder called udpipemodels</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="introduction-to-r.html#cb144-1" tabindex="-1"></a><span class="co"># load language model from your computer after you have downloaded it once</span></span>
<span id="cb144-2"><a href="introduction-to-r.html#cb144-2" tabindex="-1"></a>m_eng <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_load_model</span>(<span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;english-ewt-ud-2.5-191206.udpipe&quot;</span>))</span></code></pre></div>
<p>We can now use the model to annotate out text.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="introduction-to-r.html#cb145-1" tabindex="-1"></a><span class="co"># tokenise, tag, dependency parsing</span></span>
<span id="cb145-2"><a href="introduction-to-r.html#cb145-2" tabindex="-1"></a>text_anndf <span class="ot">&lt;-</span> udpipe<span class="sc">::</span><span class="fu">udpipe_annotate</span>(m_eng, <span class="at">x =</span> reviews_pos[<span class="dv">4</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb145-3"><a href="introduction-to-r.html#cb145-3" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb145-4"><a href="introduction-to-r.html#cb145-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>sentence)</span>
<span id="cb145-5"><a href="introduction-to-r.html#cb145-5" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb145-6"><a href="introduction-to-r.html#cb145-6" tabindex="-1"></a><span class="fu">head</span>(text_anndf, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##   doc_id paragraph_id sentence_id token_id   token   lemma  upos xpos
## 1   doc1            1           1        1    Gary    Gary PROPN  NNP
## 2   doc1            1           1        2   Busey   Busey PROPN  NNP
## 3   doc1            1           1        3      is      be   AUX  VBZ
## 4   doc1            1           1        4  superb  superb   ADJ   JJ
## 5   doc1            1           1        5      in      in   ADP   IN
## 6   doc1            1           1        6    this    this   DET   DT
## 7   doc1            1           1        7 musical musical   ADJ   JJ
##                                                   feats head_token_id dep_rel
## 1                                           Number=Sing             4   nsubj
## 2                                           Number=Sing             1    flat
## 3 Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin             4     cop
## 4                                            Degree=Pos             0    root
## 5                                                  &lt;NA&gt;             8    case
## 6                              Number=Sing|PronType=Dem             8     det
## 7                                            Degree=Pos             8    amod
##   deps misc
## 1 &lt;NA&gt; &lt;NA&gt;
## 2 &lt;NA&gt; &lt;NA&gt;
## 3 &lt;NA&gt; &lt;NA&gt;
## 4 &lt;NA&gt; &lt;NA&gt;
## 5 &lt;NA&gt; &lt;NA&gt;
## 6 &lt;NA&gt; &lt;NA&gt;
## 7 &lt;NA&gt; &lt;NA&gt;
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 3 rows ]</code></pre>
<p>We could, of course, perform many more manipulations of textual data but this should suffice to get you started.</p>
</div>
<div id="cleaning-texts" class="section level3 hasAnchor" number="2.5.8">
<h3><span class="header-section-number">2.5.8</span> Cleaning texts<a href="introduction-to-r.html#cleaning-texts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with texts, we usually need to clean the data. Below, we do some very basic cleaning using a pipeline.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="introduction-to-r.html#cb147-1" tabindex="-1"></a>reviews_pos_split_clean <span class="ot">&lt;-</span> reviews_pos_split <span class="sc">%&gt;%</span></span>
<span id="cb147-2"><a href="introduction-to-r.html#cb147-2" tabindex="-1"></a>  <span class="co"># replace elements</span></span>
<span id="cb147-3"><a href="introduction-to-r.html#cb147-3" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;&lt;.*?&gt;&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb147-4"><a href="introduction-to-r.html#cb147-4" tabindex="-1"></a>  <span class="co"># convert to lower case</span></span>
<span id="cb147-5"><a href="introduction-to-r.html#cb147-5" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb147-6"><a href="introduction-to-r.html#cb147-6" tabindex="-1"></a>  <span class="co"># remove strange symbols</span></span>
<span id="cb147-7"><a href="introduction-to-r.html#cb147-7" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;[^[:alnum:][:punct:]]+&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb147-8"><a href="introduction-to-r.html#cb147-8" tabindex="-1"></a>  <span class="co"># remove \&quot;</span></span>
<span id="cb147-9"><a href="introduction-to-r.html#cb147-9" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb147-10"><a href="introduction-to-r.html#cb147-10" tabindex="-1"></a>  <span class="co"># remove superfluous white spaces</span></span>
<span id="cb147-11"><a href="introduction-to-r.html#cb147-11" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>()</span>
<span id="cb147-12"><a href="introduction-to-r.html#cb147-12" tabindex="-1"></a><span class="co"># remove very short elements</span></span>
<span id="cb147-13"><a href="introduction-to-r.html#cb147-13" tabindex="-1"></a>reviews_pos_split_clean <span class="ot">&lt;-</span> reviews_pos_split_clean[<span class="fu">nchar</span>(reviews_pos_split_clean) <span class="sc">&gt;</span> <span class="dv">10</span>]</span>
<span id="cb147-14"><a href="introduction-to-r.html#cb147-14" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb147-15"><a href="introduction-to-r.html#cb147-15" tabindex="-1"></a><span class="fu">nchar</span>(reviews_pos_split_clean)</span></code></pre></div>
<pre><code>##   [1] 1728  639  581  456  126  182 3833  151  683   29  104   91   42   25  714
##  [16]  461  405  250   95   57  719  368 1502  121 1636  709   44  681   78  222
##  [31]  904  247  516 1935 2671 1148 2548  815  705   27  108  209   30  553  287
##  [46]  896  424   64  546   61  195   32   43   39  199  120  615   81  133  290
##  [61]   45  278   20  231   77   98  340 1957  377   41   35   41  303  716   32
##  [76]   52  218 1117 1764  220   98  212  576   70   26  780  242  130  241   87
##  [91]  249  109   63   81  464  101  369   34  464   19
##  [ reached getOption(&quot;max.print&quot;) -- omitted 2656 entries ]</code></pre>
<p>Inspect text</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="introduction-to-r.html#cb149-1" tabindex="-1"></a>reviews_pos_split_clean[<span class="dv">1</span>]</span></code></pre></div>
</div>
<div id="concordancing-and-kwics" class="section level3 hasAnchor" number="2.5.9">
<h3><span class="header-section-number">2.5.9</span> Concordancing and KWICs<a href="introduction-to-r.html#concordancing-and-kwics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Creating concordances or key-word-in-context displays is one of the most common practices when dealing with text data. Fortunately, there exist ready-made functions that make this a very easy task in R. We will use the <code>kwic</code> function from the <code>quanteda</code> package to create kwics here.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="introduction-to-r.html#cb150-1" tabindex="-1"></a>kwic_multiple <span class="ot">&lt;-</span> quanteda<span class="sc">::</span><span class="fu">kwic</span>(reviews_pos_split_clean, </span>
<span id="cb150-2"><a href="introduction-to-r.html#cb150-2" tabindex="-1"></a>       <span class="at">pattern =</span> <span class="fu">phrase</span>(<span class="st">&quot;audience&quot;</span>),</span>
<span id="cb150-3"><a href="introduction-to-r.html#cb150-3" tabindex="-1"></a>       <span class="at">window =</span> <span class="dv">3</span>, </span>
<span id="cb150-4"><a href="introduction-to-r.html#cb150-4" tabindex="-1"></a>       <span class="at">valuetype =</span> <span class="st">&quot;regex&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb150-5"><a href="introduction-to-r.html#cb150-5" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb150-6"><a href="introduction-to-r.html#cb150-6" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb150-7"><a href="introduction-to-r.html#cb150-7" tabindex="-1"></a><span class="fu">head</span>(kwic_multiple)</span></code></pre></div>
<pre><code>##   docname from  to                    pre    keyword                post
## 1   text1  222 222 painted for mainstream  audiences      , forget charm
## 2   text9   90  90        community . the   audience          at the end
## 3  text35   36  36         often find big  audiences       . people seem
## 4  text37  188 188         this keeps the   audience         on the edge
## 5  text37  376 376       krabbé holds the audience&#39;s attention and looks
## 6  text76    8   8         message to the   audience               . his
##    pattern
## 1 audience
## 2 audience
## 3 audience
## 4 audience
## 5 audience
## 6 audience</code></pre>
<p>We can now also select concordances based on specific features. For example, we only want those instances of “great again” if the preceding word was “America”.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="introduction-to-r.html#cb152-1" tabindex="-1"></a>kwic_multiple_select <span class="ot">&lt;-</span> kwic_multiple <span class="sc">%&gt;%</span></span>
<span id="cb152-2"><a href="introduction-to-r.html#cb152-2" tabindex="-1"></a>  <span class="co"># last element before search term is &quot;the&quot;</span></span>
<span id="cb152-3"><a href="introduction-to-r.html#cb152-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">str_detect</span>(pre, <span class="st">&quot;the$&quot;</span>))</span>
<span id="cb152-4"><a href="introduction-to-r.html#cb152-4" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb152-5"><a href="introduction-to-r.html#cb152-5" tabindex="-1"></a><span class="fu">head</span>(kwic_multiple_select)</span></code></pre></div>
<pre><code>##   docname from  to              pre    keyword                post  pattern
## 1   text9   90  90  community . the   audience          at the end audience
## 2  text37  188 188   this keeps the   audience         on the edge audience
## 3  text37  376 376 krabbé holds the audience&#39;s attention and looks audience
## 4  text76    8   8   message to the   audience               . his audience
## 5  text77   32  32  message for the   audience          . they are audience
## 6 text169  123 123   home gives the   audience  enough sympathy to audience</code></pre>
<p>Again, we can use the <code>write.table</code> function to save our kwics to disc.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="introduction-to-r.html#cb154-1" tabindex="-1"></a><span class="fu">write.table</span>(kwic_multiple_select, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;kwic_multiple_select.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>As most of the data that we use is on out computers (rather than being somewhere on the web), we now load files with text from your computer.</p>
<p>We now turn to data visualization basics.</p>
</div>
</div>
<div id="working-with-graphics" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Working with graphics<a href="introduction-to-r.html#working-with-graphics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are numerous function in R that we can use to visualize data. We will use the <code>ggplot</code> function from the <code>ggplot2</code> package here to visualize the data.</p>
<p>The <code>ggplot2</code> package was developed by Hadley Wickham in 2005 and it implements the graphics scheme described in the book <em>The Grammar of Graphics</em> by Leland Wilkinson.</p>
<p>The idea behind the <em>Grammar of Graphics</em> can be boiled down to 5 bullet points (see Wickham 2016: 4):</p>
<ul>
<li><p>a statistical graphic is a mapping from data to <strong>aes</strong>thetic attributes (location, color, shape, size) of <strong>geom</strong>etric objects (points, lines, bars).</p></li>
<li><p>the geometric objects are drawn in a specific <strong>coord</strong>inate system.</p></li>
<li><p><strong>scale</strong>s control the mapping from data to aesthetics and provide tools to read the plot (i.e., axes and legends).</p></li>
<li><p>the plot may also contain <strong>stat</strong>istical transformations of the data (means, medians, bins of data, trend lines).</p></li>
<li><p><strong>facet</strong>ing can be used to generate the same plot for different subsets of the data.</p></li>
</ul>
<div id="basics-of-ggplot2-syntax" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Basics of ggplot2 syntax<a href="introduction-to-r.html#basics-of-ggplot2-syntax" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Specify data, aesthetics and geometric shapes</strong></p>
<p><code>ggplot(data, aes(x=, y=, color=, shape=, size=)) +</code><br />
<code>geom_point()</code>, or <code>geom_histogram()</code>, or <code>geom_boxplot()</code>, etc.</p>
<ul>
<li><p>This combination is very effective for exploratory graphs.</p></li>
<li><p>The data must be a data frame.</p></li>
<li><p>The <code>aes()</code> function maps columns of the data frame to aesthetic properties of geometric shapes to be plotted.</p></li>
<li><p><code>ggplot()</code> defines the plot; the <code>geoms</code> show the data; each component is added with <code>+</code></p></li>
<li><p>Some examples should make this clear</p></li>
</ul>
</div>
<div id="practical-examples" class="section level3 hasAnchor" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Practical examples<a href="introduction-to-r.html#practical-examples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will now create some basic visualizations or plots.</p>
<p>Before we start plotting, we will load tabular data (information about the speakers in the dinner conversations) and the prepare the data that we want to visualize. In this case, we will extract the mean word counts by gender and age.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="introduction-to-r.html#cb155-1" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ICEdata.xlsx&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb155-2"><a href="introduction-to-r.html#cb155-2" tabindex="-1"></a>  <span class="co"># only private dialogue</span></span>
<span id="cb155-3"><a href="introduction-to-r.html#cb155-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(text.id, <span class="st">&quot;S1A&quot;</span>),</span>
<span id="cb155-4"><a href="introduction-to-r.html#cb155-4" tabindex="-1"></a>                <span class="co"># without speaker younger than 19</span></span>
<span id="cb155-5"><a href="introduction-to-r.html#cb155-5" tabindex="-1"></a>                age <span class="sc">!=</span> <span class="st">&quot;0-18&quot;</span>,</span>
<span id="cb155-6"><a href="introduction-to-r.html#cb155-6" tabindex="-1"></a>                age <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb155-7"><a href="introduction-to-r.html#cb155-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(sex, age) <span class="sc">%&gt;%</span></span>
<span id="cb155-8"><a href="introduction-to-r.html#cb155-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">words =</span> <span class="fu">mean</span>(word.count))</span>
<span id="cb155-9"><a href="introduction-to-r.html#cb155-9" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb155-10"><a href="introduction-to-r.html#cb155-10" tabindex="-1"></a><span class="fu">head</span>(icebio)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
## # Groups:   sex [2]
##   sex    age   words
##   &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
## 1 female 19-25  562.
## 2 female 26-33  531.
## 3 female 34-41  543.
## 4 female 42-49  501.
## 5 female 50+    632.
## 6 male   19-25  570.</code></pre>
<p>In the example below, we specify that we want to visualize the <code>plotdata</code> and that the x-axis should represent <code>Age</code> and the y-axis <code>Words</code>(the mean frequency of words). We also tell R that we want to group the data by <code>Sex</code> (i.e. that we want to distinguish between men and women). Then, we add <code>geom_line</code> which tells R that we want a line graph. The result of this is shown below.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="introduction-to-r.html#cb157-1" tabindex="-1"></a><span class="fu">ggplot</span>(icebio, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> words, <span class="at">group =</span> sex, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb157-2"><a href="introduction-to-r.html#cb157-2" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Once you have a basic plot like the one above, you can prettify the plot. For example, you can</p>
<ul>
<li><p>change the width of the lines (<code>size = 1.25</code>)</p></li>
<li><p>change the y-axis limits (<code>coord_cartesian(ylim = c(0, 1000))</code>)</p></li>
<li><p>use a different theme (<code>theme_bw()</code> means black and white theme)</p></li>
<li><p>move the legend to the top</p></li>
<li><p>change the default colors to colors you like (*scale_color_manual …`)</p></li>
<li><p>change the linetype (<code>scale_linetype_manual ...</code>)</p></li>
</ul>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="introduction-to-r.html#cb158-1" tabindex="-1"></a>icebio <span class="sc">%&gt;%</span></span>
<span id="cb158-2"><a href="introduction-to-r.html#cb158-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> words, <span class="at">color =</span> sex,  <span class="at">group =</span> sex, <span class="at">linetype =</span> sex)) <span class="sc">+</span></span>
<span id="cb158-3"><a href="introduction-to-r.html#cb158-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.25</span>) <span class="sc">+</span></span>
<span id="cb158-4"><a href="introduction-to-r.html#cb158-4" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1500</span>)) <span class="sc">+</span></span>
<span id="cb158-5"><a href="introduction-to-r.html#cb158-5" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb158-6"><a href="introduction-to-r.html#cb158-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span> </span>
<span id="cb158-7"><a href="introduction-to-r.html#cb158-7" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>),</span>
<span id="cb158-8"><a href="introduction-to-r.html#cb158-8" tabindex="-1"></a>                     <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;gray20&quot;</span>, <span class="st">&quot;gray50&quot;</span>)) <span class="sc">+</span></span>
<span id="cb158-9"><a href="introduction-to-r.html#cb158-9" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>),</span>
<span id="cb158-10"><a href="introduction-to-r.html#cb158-10" tabindex="-1"></a>                        <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;solid&quot;</span>, <span class="st">&quot;dotted&quot;</span>)) <span class="sc">+</span></span>
<span id="cb158-11"><a href="introduction-to-r.html#cb158-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Age groups&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Average word count</span><span class="sc">\n</span><span class="st">(per 1,000 words)&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>An additional and very handy feature of this way of producing graphs is that you</p>
<ul>
<li><p>can integrate them into pipes</p></li>
<li><p>can easily combine plots.</p></li>
</ul>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="introduction-to-r.html#cb159-1" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_excel</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ICEdata.xlsx&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb159-2"><a href="introduction-to-r.html#cb159-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sex <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>,</span>
<span id="cb159-3"><a href="introduction-to-r.html#cb159-3" tabindex="-1"></a>                age <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>,</span>
<span id="cb159-4"><a href="introduction-to-r.html#cb159-4" tabindex="-1"></a>                word.count <span class="sc">&gt;</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb159-5"><a href="introduction-to-r.html#cb159-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">factor</span>(age),</span>
<span id="cb159-6"><a href="introduction-to-r.html#cb159-6" tabindex="-1"></a>                <span class="at">sex =</span> <span class="fu">factor</span>(sex)) <span class="sc">%&gt;%</span></span>
<span id="cb159-7"><a href="introduction-to-r.html#cb159-7" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, </span>
<span id="cb159-8"><a href="introduction-to-r.html#cb159-8" tabindex="-1"></a>             <span class="at">y =</span> word.count,</span>
<span id="cb159-9"><a href="introduction-to-r.html#cb159-9" tabindex="-1"></a>             <span class="at">color =</span> sex,</span>
<span id="cb159-10"><a href="introduction-to-r.html#cb159-10" tabindex="-1"></a>             <span class="at">linetype =</span> sex)) <span class="sc">+</span></span>
<span id="cb159-11"><a href="introduction-to-r.html#cb159-11" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> .<span class="dv">5</span>, <span class="at">width =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb159-12"><a href="introduction-to-r.html#cb159-12" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;line&quot;</span>, <span class="fu">aes</span>(<span class="at">group=</span>sex)) <span class="sc">+</span></span>
<span id="cb159-13"><a href="introduction-to-r.html#cb159-13" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2500</span>)) <span class="sc">+</span></span>
<span id="cb159-14"><a href="introduction-to-r.html#cb159-14" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb159-15"><a href="introduction-to-r.html#cb159-15" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span> </span>
<span id="cb159-16"><a href="introduction-to-r.html#cb159-16" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>),</span>
<span id="cb159-17"><a href="introduction-to-r.html#cb159-17" tabindex="-1"></a>                     <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;indianred&quot;</span>, <span class="st">&quot;darkblue&quot;</span>)) <span class="sc">+</span></span>
<span id="cb159-18"><a href="introduction-to-r.html#cb159-18" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>),</span>
<span id="cb159-19"><a href="introduction-to-r.html#cb159-19" tabindex="-1"></a>                        <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;solid&quot;</span>, <span class="st">&quot;dotted&quot;</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>You can also create different types of graphs very easily and split them into different facets.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="introduction-to-r.html#cb160-1" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_excel</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ICEdata.xlsx&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb160-2"><a href="introduction-to-r.html#cb160-2" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb160-3"><a href="introduction-to-r.html#cb160-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(age <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>,</span>
<span id="cb160-4"><a href="introduction-to-r.html#cb160-4" tabindex="-1"></a>                age <span class="sc">!=</span> <span class="st">&quot;0-18&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-5"><a href="introduction-to-r.html#cb160-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">factor</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb160-6"><a href="introduction-to-r.html#cb160-6" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, </span>
<span id="cb160-7"><a href="introduction-to-r.html#cb160-7" tabindex="-1"></a>             <span class="at">y =</span> word.count, </span>
<span id="cb160-8"><a href="introduction-to-r.html#cb160-8" tabindex="-1"></a>             <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb160-9"><a href="introduction-to-r.html#cb160-9" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(date)) <span class="sc">+</span></span>
<span id="cb160-10"><a href="introduction-to-r.html#cb160-10" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb160-11"><a href="introduction-to-r.html#cb160-11" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2000</span>)) <span class="sc">+</span></span>
<span id="cb160-12"><a href="introduction-to-r.html#cb160-12" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb160-13"><a href="introduction-to-r.html#cb160-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span> </span>
<span id="cb160-14"><a href="introduction-to-r.html#cb160-14" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>),</span>
<span id="cb160-15"><a href="introduction-to-r.html#cb160-15" tabindex="-1"></a>                     <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>Create a bar plot showing the number of men and women by <code>Date</code>.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="introduction-to-r.html#cb161-1" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_excel</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ICEdata.xlsx&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb161-2"><a href="introduction-to-r.html#cb161-2" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb161-3"><a href="introduction-to-r.html#cb161-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(age <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>,</span>
<span id="cb161-4"><a href="introduction-to-r.html#cb161-4" tabindex="-1"></a>                sex <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>,</span>
<span id="cb161-5"><a href="introduction-to-r.html#cb161-5" tabindex="-1"></a>                date <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span>,</span>
<span id="cb161-6"><a href="introduction-to-r.html#cb161-6" tabindex="-1"></a>                age <span class="sc">!=</span> <span class="st">&quot;0-18&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-7"><a href="introduction-to-r.html#cb161-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">factor</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb161-8"><a href="introduction-to-r.html#cb161-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(date, sex, text.id) <span class="sc">%&gt;%</span></span>
<span id="cb161-9"><a href="introduction-to-r.html#cb161-9" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb161-10"><a href="introduction-to-r.html#cb161-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(date, sex) <span class="sc">%&gt;%</span></span>
<span id="cb161-11"><a href="introduction-to-r.html#cb161-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">speakers =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb161-12"><a href="introduction-to-r.html#cb161-12" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> speakers, <span class="at">fill =</span> date, <span class="at">label =</span> speakers)) <span class="sc">+</span></span>
<span id="cb161-13"><a href="introduction-to-r.html#cb161-13" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(sex), <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb161-14"><a href="introduction-to-r.html#cb161-14" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb161-15"><a href="introduction-to-r.html#cb161-15" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">vjust=</span><span class="sc">-</span><span class="fl">1.6</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb161-16"><a href="introduction-to-r.html#cb161-16" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">150</span>)) <span class="sc">+</span></span>
<span id="cb161-17"><a href="introduction-to-r.html#cb161-17" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb161-18"><a href="introduction-to-r.html#cb161-18" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;1990-1994&quot;</span>, <span class="st">&quot;1995-2001&quot;</span>, <span class="st">&quot;2002-2005&quot;</span>),</span>
<span id="cb161-19"><a href="introduction-to-r.html#cb161-19" tabindex="-1"></a>                     <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;lightgray&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
</div>
<div id="working-with-tables" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Working with tables<a href="introduction-to-r.html#working-with-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will now start working with data in R. As most of the data that we work with comes in tables, we will focus on this first before moving on to working with text data.</p>
<div id="loading-data-from-the-web" class="section level3 hasAnchor" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Loading data from the web<a href="introduction-to-r.html#loading-data-from-the-web" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To show, how data can be downloaded from the web, we will download a tab-separated txt-file. Translated to prose, the code below means <em>Create an object called </em>icebio <em>and in that object, store the result of the <code>read.delim</code> function</em>.</p>
<p><code>read.delim</code> stands for <em>read delimited file</em> and it takes the URL from which to load the data (or the path to the data on your computer) as its first argument. The <code>sep</code> stand for separator and the <code>\t</code> stands for tab-separated and represents the second argument that the <code>read.delim</code> function takes. The third argument, <code>header</code>, can take either T(RUE) or F(ALSE) and it tells R if the data has column names (headers) or not.</p>
</div>
<div id="functions-and-objects" class="section level3 hasAnchor" number="2.7.2">
<h3><span class="header-section-number">2.7.2</span> Functions and Objects<a href="introduction-to-r.html#functions-and-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, functions always have the following form: <code>function(argument1, argument2, ..., argumentN)</code>. Typically a function does something to an object (e.g. a table), so that the first argument typically specifies the data to which the function is applied. Other arguments then allow to add some information. Just as a side note, functions are also objects that do not contain data but instructions.</p>
<p>To assign content to an object, we use <code>&lt;-</code> or <code>=</code> so that the we provide a name for an object, and then assign some content to it. For example, <code>MyObject &lt;- 1:3</code> means <em>Create an object called <code>MyObject</code>. this object should contain the numbers 1 to 3</em>.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="introduction-to-r.html#cb162-1" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb162-2"><a href="introduction-to-r.html#cb162-2" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">&quot;https://slcladal.github.io/data/icebio.txt&quot;</span>, </span>
<span id="cb162-3"><a href="introduction-to-r.html#cb162-3" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T)</span></code></pre></div>
</div>
<div id="inspecting-data" class="section level3 hasAnchor" number="2.7.3">
<h3><span class="header-section-number">2.7.3</span> Inspecting data<a href="introduction-to-r.html#inspecting-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many ways to inspect data. We will briefly go over the most common ways to inspect data.</p>
<p>The <code>head</code> function takes the data-object as its first argument and automatically shows the first 6 elements of an object (or rows if the data-object has a table format).</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="introduction-to-r.html#cb163-1" tabindex="-1"></a><span class="fu">head</span>(icebio)</span></code></pre></div>
<pre><code>##   id file.speaker.id text.id spk.ref             zone      date    sex   age
## 1  1     &lt;S1A-001$A&gt; S1A-001       A northern ireland 1990-1994   male 34-41
## 2  2     &lt;S1A-001$B&gt; S1A-001       B northern ireland 1990-1994 female 34-41
## 3  3     &lt;S1A-002$?&gt; S1A-002       ?             &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;
## 4  4     &lt;S1A-002$A&gt; S1A-002       A northern ireland 2002-2005 female 26-33
## 5  5     &lt;S1A-002$B&gt; S1A-002       B northern ireland 2002-2005 female 19-25
## 6  6     &lt;S1A-002$C&gt; S1A-002       C northern ireland 2002-2005   male   50+
##   word.count
## 1        765
## 2       1298
## 3         23
## 4        391
## 5         47
## 6        200</code></pre>
<p>We can also use the <code>head</code> function to inspect more or less elements and we can specify the number of elements (or rows) that we want to inspect as a second argument. In the example below, the <code>4</code> tells R that we only want to see the first 4 rows of the data.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="introduction-to-r.html#cb165-1" tabindex="-1"></a><span class="fu">head</span>(icebio, <span class="dv">4</span>)</span></code></pre></div>
<pre><code>##   id file.speaker.id text.id spk.ref             zone      date    sex   age
## 1  1     &lt;S1A-001$A&gt; S1A-001       A northern ireland 1990-1994   male 34-41
## 2  2     &lt;S1A-001$B&gt; S1A-001       B northern ireland 1990-1994 female 34-41
## 3  3     &lt;S1A-002$?&gt; S1A-002       ?             &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;
## 4  4     &lt;S1A-002$A&gt; S1A-002       A northern ireland 2002-2005 female 26-33
##   word.count
## 1        765
## 2       1298
## 3         23
## 4        391</code></pre>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol style="list-style-type: decimal">
<li>Download and inspect the first 7 rows of the data set that you can find under this URL: <code>https://slcladal.github.io/data/lmmdata.txt</code>. Can you guess what the data is about?</li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="introduction-to-r.html#cb167-1" tabindex="-1"></a>  ex1data <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="st">&quot;https://slcladal.github.io/data/lmmdata.txt&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)</span>
<span id="cb167-2"><a href="introduction-to-r.html#cb167-2" tabindex="-1"></a>  <span class="fu">head</span>(ex1data, <span class="dv">7</span>)</span></code></pre></div>
<pre><code>  ##   Date         Genre    Text Prepositions Region
  ## 1 1736       Science   albin       166.01  North
  ## 2 1711     Education    anon       139.86  North
  ## 3 1808 PrivateLetter  austen       130.78  North
  ## 4 1878     Education    bain       151.29  North
  ## 5 1743     Education barclay       145.72  North
  ## 6 1908     Education  benson       120.77  North
  ## 7 1906         Diary  benson       119.17  North</code></pre>
The data is about texts and the different columns provide information about the texts such as when the texts were written (<code>Date</code>), the genre the texts represent (<code>Genre</code>), the name of the texts (<code>Text</code>), the relative frequencies of prepositions the texts contain (<code>Prepositions</code>), and the region where the author was from (<code>Region</code>).
</details>
</div>
<p>`</p>
<hr />
</div>
<div id="accessing-individual-cells-in-a-table" class="section level3 hasAnchor" number="2.7.4">
<h3><span class="header-section-number">2.7.4</span> Accessing individual cells in a table<a href="introduction-to-r.html#accessing-individual-cells-in-a-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you want to access specific cells in a table, you can do so by typing the name of the object and then specify the rows and columns in square brackets (i.e. <strong>data[row, column]</strong>). For example, <code>icebio[2, 4]</code> would show the value of the cell in the second row and fourth column of the object <code>icebio</code>. We can also use the colon to define a range (as shown below, where 1:5 means from 1 to 5 and 1:3 means from 1 to 3) The command <code>icebio[1:5, 1:3]</code> thus means:</p>
<p><em>Show me the first 5 rows and the first 3 columns of the data-object that is called icebio</em>.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="introduction-to-r.html#cb169-1" tabindex="-1"></a>icebio[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##   id file.speaker.id text.id
## 1  1     &lt;S1A-001$A&gt; S1A-001
## 2  2     &lt;S1A-001$B&gt; S1A-001
## 3  3     &lt;S1A-002$?&gt; S1A-002
## 4  4     &lt;S1A-002$A&gt; S1A-002
## 5  5     &lt;S1A-002$B&gt; S1A-002</code></pre>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol style="list-style-type: decimal">
<li>How would you inspect the content of the cells in 4<sup>th</sup> column, rows 3 to 5 of the <code>icebio</code> data set?</li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="introduction-to-r.html#cb171-1" tabindex="-1"></a>  icebio[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span>]</span></code></pre></div>
<pre><code>  ## [1] &quot;?&quot; &quot;A&quot; &quot;B&quot;</code></pre>
</details>
</div>
<p>`</p>
<hr />
<p><strong>Inspecting the structure of data</strong></p>
<p>You can use the <code>str</code> function to inspect the structure of a data set. This means that this function will show the number of observations (rows) and variables (columns) and tell you what type of variables the data consists of</p>
<ul>
<li><strong>int</strong> = integer</li>
<li><strong>chr</strong> = character string</li>
<li><strong>num</strong> = numeric</li>
<li><strong>fct</strong> = factor</li>
</ul>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="introduction-to-r.html#cb173-1" tabindex="-1"></a><span class="fu">str</span>(icebio)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    1332 obs. of  9 variables:
##  $ id             : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ file.speaker.id: chr  &quot;&lt;S1A-001$A&gt;&quot; &quot;&lt;S1A-001$B&gt;&quot; &quot;&lt;S1A-002$?&gt;&quot; &quot;&lt;S1A-002$A&gt;&quot; ...
##  $ text.id        : chr  &quot;S1A-001&quot; &quot;S1A-001&quot; &quot;S1A-002&quot; &quot;S1A-002&quot; ...
##  $ spk.ref        : chr  &quot;A&quot; &quot;B&quot; &quot;?&quot; &quot;A&quot; ...
##  $ zone           : chr  &quot;northern ireland&quot; &quot;northern ireland&quot; NA &quot;northern ireland&quot; ...
##  $ date           : chr  &quot;1990-1994&quot; &quot;1990-1994&quot; NA &quot;2002-2005&quot; ...
##  $ sex            : chr  &quot;male&quot; &quot;female&quot; NA &quot;female&quot; ...
##  $ age            : chr  &quot;34-41&quot; &quot;34-41&quot; NA &quot;26-33&quot; ...
##  $ word.count     : int  765 1298 23 391 47 200 464 639 308 78 ...</code></pre>
<p>The <code>summary</code> function summarizes the data.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="introduction-to-r.html#cb175-1" tabindex="-1"></a><span class="fu">summary</span>(icebio)</span></code></pre></div>
<pre><code>##        id         file.speaker.id      text.id            spk.ref         
##  Min.   :   1.0   Length:1332        Length:1332        Length:1332       
##  1st Qu.: 333.8   Class :character   Class :character   Class :character  
##  Median : 666.5   Mode  :character   Mode  :character   Mode  :character  
##  Mean   : 666.5                                                           
##  3rd Qu.: 999.2                                                           
##  Max.   :1332.0                                                           
##      zone               date               sex                age           
##  Length:1332        Length:1332        Length:1332        Length:1332       
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##    word.count    
##  Min.   :   0.0  
##  1st Qu.:  66.0  
##  Median : 240.5  
##  Mean   : 449.9  
##  3rd Qu.: 638.2  
##  Max.   :2565.0</code></pre>
</div>
<div id="tabulating-data" class="section level3 hasAnchor" number="2.7.5">
<h3><span class="header-section-number">2.7.5</span> Tabulating data<a href="introduction-to-r.html#tabulating-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can use the <code>table</code> function to create basic tables that extract raw frequency information. The following command tells us how many instances there are of each level of the variable <code>date</code> in the <code>icebio</code>.</p>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>TIP</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<p>In order to access specific columns of a data frame, you can first type the name of the data set followed by a <code>$</code> symbol and then the name of the column (or variable).</p>
</div>
<p>`</p>
<hr />
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="introduction-to-r.html#cb177-1" tabindex="-1"></a><span class="fu">table</span>(icebio<span class="sc">$</span>date) </span></code></pre></div>
<pre><code>## 
## 1990-1994 1995-2001 2002-2005 
##       905        67       270</code></pre>
<p>Alternatively, you could, of course, index the column by using its position in the data set like this: <code>icebio[, 6]</code> - the result of <code>table(icebio[, 6])</code> and <code>table(icebio$date)</code> are the same! Also note that here we leave out indexes for rows to tell R that we want all rows.</p>
<p>When you want to cross-tabulate columns, it is often better to use the <code>ftable</code> function (<code>ftable</code> stands for <em>frequency table</em>).</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="introduction-to-r.html#cb179-1" tabindex="-1"></a><span class="fu">ftable</span>(icebio<span class="sc">$</span>age, icebio<span class="sc">$</span>sex)</span></code></pre></div>
<pre><code>##        female male
##                   
## 0-18        5    7
## 19-25     163   65
## 26-33      83   36
## 34-41      35   58
## 42-49      35   97
## 50+        63  138</code></pre>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol style="list-style-type: decimal">
<li>Using the <code>table</code> function, how many women are in the data collected between 2002 and 2005?</li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="introduction-to-r.html#cb181-1" tabindex="-1"></a>  <span class="fu">table</span>(icebio<span class="sc">$</span>date, icebio<span class="sc">$</span>sex)</span></code></pre></div>
<pre><code>  ##            
  ##             female male
  ##   1990-1994    338  562
  ##   1995-2001      4   58
  ##   2002-2005    186   84</code></pre>
</details>
<ol start="2" style="list-style-type: decimal">
<li>Using the <code>ftable</code> function, how many men are are from northern Ireland in the data collected between 1990 and 1994?</li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="introduction-to-r.html#cb183-1" tabindex="-1"></a>  <span class="fu">ftable</span>(icebio<span class="sc">$</span>date, icebio<span class="sc">$</span>zone, icebio<span class="sc">$</span>sex)</span></code></pre></div>
<pre><code>  ##                                     female male
  ##                                                
  ## 1990-1994 mixed between ni and roi      18   13
  ##           non-corpus speaker             7   22
  ##           northern ireland             104  289
  ##           republic of ireland          209  238
  ## 1995-2001 mixed between ni and roi       0    0
  ##           non-corpus speaker             1    1
  ##           northern ireland               2   36
  ##           republic of ireland            1   21
  ## 2002-2005 mixed between ni and roi      19    7
  ##           non-corpus speaker             7    9
  ##           northern ireland             122   41
  ##           republic of ireland           38   27</code></pre>
</details>
</div>
<p>`</p>
<hr />
</div>
<div id="saving-data-to-your-computer" class="section level3 hasAnchor" number="2.7.6">
<h3><span class="header-section-number">2.7.6</span> Saving data to your computer<a href="introduction-to-r.html#saving-data-to-your-computer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To save tabular data on your computer, you can use the <code>write.table</code> function. This function requires the data that you want to save as its first argument, the location where you want to save the data as the second argument and the type of delimiter as the third argument.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="introduction-to-r.html#cb185-1" tabindex="-1"></a><span class="fu">write.table</span>(icebio, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;icebio.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>) </span></code></pre></div>
<p><strong>A word about paths</strong></p>
<p>In the code chunk above, the sequence <code>here::here("data", "icebio.txt")</code> is a handy way to define a path. A path is simply the location where a file is stored on your computer or on the internet (which typically is a server - which is just a fancy term for a computer - somewhere on the globe). The <code>here</code> function from the<code>here</code> package allows to simply state in which folder a certain file is and what file you are talking about.</p>
<p>In this case, we want to access the file <code>icebio</code> (which is a <code>txt</code> file and thus has the appendix <code>.txt</code>) in the <code>data</code> folder. R will always start looking in the folder in which your project is stored. If you want to access a file that is stored somewhere else on your computer, you can also define the full path to the folder in which the file is. In my case, this would be <code>D:/Uni/UQ/SLC/LADAL/SLCLADAL.github.io/data</code>. However, as the <code>data</code> folder in in the folder where my Rproj file is, I only need to specify that the file is in the <code>data</code> folder within the folder in which my Rproj file is located.</p>
<p><strong>A word about package naming</strong></p>
<p>Another thing that is notable in the sequence <code>here::here("data", "icebio.txt")</code> is that I specified that the <code>here</code> function is part of the <code>here</code> package. This is what I meant by writing <code>here::here</code> which simply means use the <code>here</code> function from <code>here</code> package (<code>package::function</code>). This may appear to be somewhat redundant but it happens quite frequently, that different packages have functions that have the same names. In such cases, R will simply choose the function from the package that was loaded last. To prevent R from using the wrong function, it makes sense to specify the package AND the function (as I did in the sequence <code>here::here</code>). I only use functions without specify the package if the function is part of base R.</p>
</div>
<div id="loading-data-from-your-computer" class="section level3 hasAnchor" number="2.7.7">
<h3><span class="header-section-number">2.7.7</span> Loading data from your computer<a href="introduction-to-r.html#loading-data-from-your-computer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To load tabular data from within your project folder (if it is in a tab-separated txt-file) you can also use the <code>read.delim</code> function. The only difference to loading from the web is that you use a path instead of a URL. If the txt-file is in the folder called <em>data</em> in your project folder, you would load the data as shown below.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="introduction-to-r.html#cb186-1" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;icebio.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T)</span></code></pre></div>
<p>However, you can always just use the full path (and you must do this is the data is not in your project folder).</p>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>NOTE</b><br>You may have to change the path to the data!
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<hr />
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="introduction-to-r.html#cb187-1" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;icebio.txt&quot;</span>), </span>
<span id="cb187-2"><a href="introduction-to-r.html#cb187-2" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T)</span></code></pre></div>
<p>To if this has worked, we will use the <code>head</code> function to see first 6 rows of the data</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="introduction-to-r.html#cb188-1" tabindex="-1"></a><span class="fu">head</span>(icebio)</span></code></pre></div>
<pre><code>##   id file.speaker.id text.id spk.ref             zone      date    sex   age
## 1  1     &lt;S1A-001$A&gt; S1A-001       A northern ireland 1990-1994   male 34-41
## 2  2     &lt;S1A-001$B&gt; S1A-001       B northern ireland 1990-1994 female 34-41
## 3  3     &lt;S1A-002$?&gt; S1A-002       ?             &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;
## 4  4     &lt;S1A-002$A&gt; S1A-002       A northern ireland 2002-2005 female 26-33
## 5  5     &lt;S1A-002$B&gt; S1A-002       B northern ireland 2002-2005 female 19-25
## 6  6     &lt;S1A-002$C&gt; S1A-002       C northern ireland 2002-2005   male   50+
##   word.count
## 1        765
## 2       1298
## 3         23
## 4        391
## 5         47
## 6        200</code></pre>
</div>
<div id="loading-excel-data" class="section level3 hasAnchor" number="2.7.8">
<h3><span class="header-section-number">2.7.8</span> Loading Excel data<a href="introduction-to-r.html#loading-excel-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To load Excel spreadsheets, you can use the <code>read_excel</code> function from the <code>readxl</code> package as shown below. However, it may be necessary to install and activate the <code>readxl</code> package first.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="introduction-to-r.html#cb190-1" tabindex="-1"></a>icebio <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;ICEdata.xlsx&quot;</span>))</span></code></pre></div>
<p>We now briefly check column names to see if the loading of the data has worked.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="introduction-to-r.html#cb191-1" tabindex="-1"></a><span class="fu">colnames</span>(icebio)</span></code></pre></div>
<pre><code>## [1] &quot;id&quot;              &quot;file.speaker.id&quot; &quot;text.id&quot;         &quot;spk.ref&quot;        
## [5] &quot;zone&quot;            &quot;date&quot;            &quot;sex&quot;             &quot;age&quot;            
## [9] &quot;word.count&quot;</code></pre>
</div>
<div id="renaming-piping-and-filtering" class="section level3 hasAnchor" number="2.7.9">
<h3><span class="header-section-number">2.7.9</span> Renaming, Piping, and Filtering<a href="introduction-to-r.html#renaming-piping-and-filtering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To rename existing columns in a table, you can use the <code>rename</code> command which takes the table as the first argument, the new name as the second argument, the an equal sign (=), and finally, the old name es the third argument. For example, renaming a column <em>OldName</em> as <em>NewName</em> in a table called <em>MyTable</em> would look like this: <code>rename(MyTable, NewName = OldName)</code>.</p>
<p>Piping is done using the <code>%&gt;%</code> sequence and it can be translated as <strong>and then</strong>. In the example below, we create a new object (icebio_edit) from the existing object (icebio) <em>and then</em> we rename the columns in the new object. When we use piping, we do not need to name the data we are using as this is provided by the previous step.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="introduction-to-r.html#cb193-1" tabindex="-1"></a>icebio_edit <span class="ot">&lt;-</span> icebio <span class="sc">%&gt;%</span></span>
<span id="cb193-2"><a href="introduction-to-r.html#cb193-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">Id =</span> id,</span>
<span id="cb193-3"><a href="introduction-to-r.html#cb193-3" tabindex="-1"></a>         <span class="at">FileSpeakerId =</span> file.speaker.id,</span>
<span id="cb193-4"><a href="introduction-to-r.html#cb193-4" tabindex="-1"></a>         <span class="at">File =</span> <span class="fu">colnames</span>(icebio)[<span class="dv">3</span>],</span>
<span id="cb193-5"><a href="introduction-to-r.html#cb193-5" tabindex="-1"></a>         <span class="at">Speaker =</span> <span class="fu">colnames</span>(icebio)[<span class="dv">4</span>])</span>
<span id="cb193-6"><a href="introduction-to-r.html#cb193-6" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb193-7"><a href="introduction-to-r.html#cb193-7" tabindex="-1"></a>icebio_edit[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## # A tibble: 5 × 6
##      Id FileSpeakerId File    Speaker zone             date     
##   &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;    
## 1     1 &lt;S1A-001$A&gt;   S1A-001 A       northern ireland 1990-1994
## 2     2 &lt;S1A-001$B&gt;   S1A-001 B       northern ireland 1990-1994
## 3     3 &lt;S1A-002$?&gt;   S1A-002 ?       NA               NA       
## 4     4 &lt;S1A-002$A&gt;   S1A-002 A       northern ireland 2002-2005
## 5     5 &lt;S1A-002$B&gt;   S1A-002 B       northern ireland 2002-2005</code></pre>
<p>A very handy way to rename many columns simultaneously, you can use the <code>str_to_title</code> function which capitalizes first letter of a word. In the example below, we capitalize all first letters of the column names of our current data.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="introduction-to-r.html#cb195-1" tabindex="-1"></a><span class="fu">colnames</span>(icebio_edit) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(<span class="fu">colnames</span>(icebio_edit))</span>
<span id="cb195-2"><a href="introduction-to-r.html#cb195-2" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb195-3"><a href="introduction-to-r.html#cb195-3" tabindex="-1"></a>icebio_edit[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## # A tibble: 5 × 6
##      Id Filespeakerid File    Speaker Zone             Date     
##   &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;    
## 1     1 &lt;S1A-001$A&gt;   S1A-001 A       northern ireland 1990-1994
## 2     2 &lt;S1A-001$B&gt;   S1A-001 B       northern ireland 1990-1994
## 3     3 &lt;S1A-002$?&gt;   S1A-002 ?       NA               NA       
## 4     4 &lt;S1A-002$A&gt;   S1A-002 A       northern ireland 2002-2005
## 5     5 &lt;S1A-002$B&gt;   S1A-002 B       northern ireland 2002-2005</code></pre>
<p>To remove rows based on values in columns you can use the <code>filter</code> function.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="introduction-to-r.html#cb197-1" tabindex="-1"></a>icebio_edit2 <span class="ot">&lt;-</span> icebio_edit <span class="sc">%&gt;%</span></span>
<span id="cb197-2"><a href="introduction-to-r.html#cb197-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Speaker <span class="sc">!=</span> <span class="st">&quot;?&quot;</span>,</span>
<span id="cb197-3"><a href="introduction-to-r.html#cb197-3" tabindex="-1"></a>         Zone <span class="sc">!=</span> <span class="fu">is.na</span>(Zone),</span>
<span id="cb197-4"><a href="introduction-to-r.html#cb197-4" tabindex="-1"></a>         Date <span class="sc">==</span> <span class="st">&quot;2002-2005&quot;</span>,</span>
<span id="cb197-5"><a href="introduction-to-r.html#cb197-5" tabindex="-1"></a>         Word.count <span class="sc">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb197-6"><a href="introduction-to-r.html#cb197-6" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb197-7"><a href="introduction-to-r.html#cb197-7" tabindex="-1"></a><span class="fu">head</span>(icebio_edit2)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 9
##      Id Filespeakerid File    Speaker Zone          Date  Sex   Age   Word.count
##   &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
## 1     4 &lt;S1A-002$A&gt;   S1A-002 A       northern ire… 2002… fema… 26-33        391
## 2     5 &lt;S1A-002$B&gt;   S1A-002 B       northern ire… 2002… fema… 19-25         47
## 3     6 &lt;S1A-002$C&gt;   S1A-002 C       northern ire… 2002… male  50+          200
## 4     7 &lt;S1A-002$D&gt;   S1A-002 D       northern ire… 2002… fema… 50+          464
## 5     8 &lt;S1A-002$E&gt;   S1A-002 E       mixed betwee… 2002… male  34-41        639
## 6     9 &lt;S1A-002$F&gt;   S1A-002 F       northern ire… 2002… fema… 26-33        308</code></pre>
<p>To select specific columns you can use the <code>select</code> function.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="introduction-to-r.html#cb199-1" tabindex="-1"></a>icebio_selection <span class="ot">&lt;-</span> icebio_edit2 <span class="sc">%&gt;%</span></span>
<span id="cb199-2"><a href="introduction-to-r.html#cb199-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(File, Speaker, Word.count)</span>
<span id="cb199-3"><a href="introduction-to-r.html#cb199-3" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb199-4"><a href="introduction-to-r.html#cb199-4" tabindex="-1"></a><span class="fu">head</span>(icebio_selection)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   File    Speaker Word.count
##   &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;
## 1 S1A-002 A              391
## 2 S1A-002 B               47
## 3 S1A-002 C              200
## 4 S1A-002 D              464
## 5 S1A-002 E              639
## 6 S1A-002 F              308</code></pre>
<p>You can also use the <code>select</code> function to remove specific columns.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="introduction-to-r.html#cb201-1" tabindex="-1"></a>icebio_selection2 <span class="ot">&lt;-</span> icebio_edit2 <span class="sc">%&gt;%</span></span>
<span id="cb201-2"><a href="introduction-to-r.html#cb201-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Id, <span class="sc">-</span>File, <span class="sc">-</span>Speaker, <span class="sc">-</span>Date, <span class="sc">-</span>Zone, <span class="sc">-</span>Age)</span>
<span id="cb201-3"><a href="introduction-to-r.html#cb201-3" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb201-4"><a href="introduction-to-r.html#cb201-4" tabindex="-1"></a><span class="fu">head</span>(icebio_selection2)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   Filespeakerid Sex    Word.count
##   &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt;
## 1 &lt;S1A-002$A&gt;   female        391
## 2 &lt;S1A-002$B&gt;   female         47
## 3 &lt;S1A-002$C&gt;   male          200
## 4 &lt;S1A-002$D&gt;   female        464
## 5 &lt;S1A-002$E&gt;   male          639
## 6 &lt;S1A-002$F&gt;   female        308</code></pre>
</div>
<div id="ordering-data" class="section level3 hasAnchor" number="2.7.10">
<h3><span class="header-section-number">2.7.10</span> Ordering data<a href="introduction-to-r.html#ordering-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To order data, for instance, in ascending order according to a specific column you can use the <code>arrange</code> function.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="introduction-to-r.html#cb203-1" tabindex="-1"></a>icebio_ordered_asc <span class="ot">&lt;-</span> icebio_selection2 <span class="sc">%&gt;%</span></span>
<span id="cb203-2"><a href="introduction-to-r.html#cb203-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(Word.count)</span>
<span id="cb203-3"><a href="introduction-to-r.html#cb203-3" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb203-4"><a href="introduction-to-r.html#cb203-4" tabindex="-1"></a><span class="fu">head</span>(icebio_ordered_asc)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   Filespeakerid Sex    Word.count
##   &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt;
## 1 &lt;S1B-009$D&gt;   female          6
## 2 &lt;S1B-005$C&gt;   female          7
## 3 &lt;S1B-009$C&gt;   male            7
## 4 &lt;S1B-020$F&gt;   male            7
## 5 &lt;S1B-006$G&gt;   female          9
## 6 &lt;S2A-050$B&gt;   male            9</code></pre>
<p>To order data in descending order you can also use the <code>arrange</code> function and simply add a - before the column according to which you want to order the data.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="introduction-to-r.html#cb205-1" tabindex="-1"></a>icebio_ordered_desc <span class="ot">&lt;-</span> icebio_selection2 <span class="sc">%&gt;%</span></span>
<span id="cb205-2"><a href="introduction-to-r.html#cb205-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>Word.count)</span>
<span id="cb205-3"><a href="introduction-to-r.html#cb205-3" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb205-4"><a href="introduction-to-r.html#cb205-4" tabindex="-1"></a><span class="fu">head</span>(icebio_ordered_desc)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   Filespeakerid Sex    Word.count
##   &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt;
## 1 &lt;S2A-055$A&gt;   female       2355
## 2 &lt;S2A-047$A&gt;   male         2340
## 3 &lt;S2A-035$A&gt;   female       2244
## 4 &lt;S2A-048$A&gt;   male         2200
## 5 &lt;S2A-015$A&gt;   male         2172
## 6 &lt;S2A-054$A&gt;   female       2113</code></pre>
<p>The output shows that the female speaker in file S2A-005 with the speaker identity A has the highest word count with 2,355 words.</p>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol style="list-style-type: decimal">
<li>Using the data called <code>icebio</code>, create a new data set called <code>ICE_Ire_ordered</code> and arrange the data in descending order by the number of words that each speaker has uttered. Who is the speaker with the highest word count?</li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="introduction-to-r.html#cb207-1" tabindex="-1"></a>  ICE_Ire_ordered <span class="ot">&lt;-</span> icebio <span class="sc">%&gt;%</span></span>
<span id="cb207-2"><a href="introduction-to-r.html#cb207-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>word.count)</span>
<span id="cb207-3"><a href="introduction-to-r.html#cb207-3" tabindex="-1"></a>  <span class="co"># inspect data</span></span>
<span id="cb207-4"><a href="introduction-to-r.html#cb207-4" tabindex="-1"></a>  <span class="fu">head</span>(ICE_Ire_ordered)</span></code></pre></div>
<pre><code>  ## # A tibble: 6 × 9
  ##      id file.speaker.id text.id spk.ref zone        date  sex   age   word.count
  ##   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
  ## 1   956 &lt;S2A-037$A&gt;     S2A-037 A       republic o… 1990… male  NA          2565
  ## 2   919 &lt;S2A-016$A&gt;     S2A-016 A       republic o… 1995… fema… 34-41       2482
  ## 3   933 &lt;S2A-023$A&gt;     S2A-023 A       northern i… 1990… male  50+         2367
  ## 4   992 &lt;S2A-055$A&gt;     S2A-055 A       northern i… 2002… fema… 42-49       2355
  ## 5   979 &lt;S2A-047$A&gt;     S2A-047 A       republic o… 2002… male  50+         2340
  ## 6   997 &lt;S2A-059$A&gt;     S2A-059 A       republic o… 1990… fema… NA          2305</code></pre>
</details>
</div>
<p>`</p>
<hr />
</div>
<div id="creating-and-changing-variables" class="section level3 hasAnchor" number="2.7.11">
<h3><span class="header-section-number">2.7.11</span> Creating and changing variables<a href="introduction-to-r.html#creating-and-changing-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>New columns are created, and existing columns can be changed, by using the <code>mutate</code> function. The <code>mutate</code> function takes two arguments (if the data does not have to be specified): the first argument is the (new) name of column that you want to create and the second is what you want to store in that column. The = tells R that the new column will contain the result of the second argument.</p>
<p>In the example below, we create a new column called <em>Texttype</em>.</p>
<p>This new column should contain</p>
<ul>
<li><p>the value <em>PrivateDialoge</em> if <em>Filespeakerid</em> contains the sequence <em>S1A</em>,</p></li>
<li><p>the value <em>PublicDialogue</em> if <em>Filespeakerid</em> contains the sequence <em>S1B</em>,</p></li>
<li><p>the value <em>UnscriptedMonologue</em> if <em>Filespeakerid</em> contains the sequence <em>S2A</em>,</p></li>
<li><p>the value <em>ScriptedMonologue</em> if <em>Filespeakerid</em> contains the sequence <em>S2B</em>,</p></li>
<li><p>the value of <em>Filespeakerid</em> if <em>Filespeakerid</em> neither contains <em>S1A</em>, <em>S1B</em>, <em>S2A</em>, nor <em>S2B</em>.</p></li>
</ul>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="introduction-to-r.html#cb209-1" tabindex="-1"></a>icebio_texttype <span class="ot">&lt;-</span> icebio_selection2 <span class="sc">%&gt;%</span></span>
<span id="cb209-2"><a href="introduction-to-r.html#cb209-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Texttype =</span> </span>
<span id="cb209-3"><a href="introduction-to-r.html#cb209-3" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">case_when</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(Filespeakerid ,<span class="st">&quot;S1A&quot;</span>) <span class="sc">~</span> <span class="st">&quot;PrivateDialoge&quot;</span>,</span>
<span id="cb209-4"><a href="introduction-to-r.html#cb209-4" tabindex="-1"></a>                                   stringr<span class="sc">::</span><span class="fu">str_detect</span>(Filespeakerid ,<span class="st">&quot;S1B&quot;</span>) <span class="sc">~</span> <span class="st">&quot;PublicDialogue&quot;</span>,</span>
<span id="cb209-5"><a href="introduction-to-r.html#cb209-5" tabindex="-1"></a>                                   stringr<span class="sc">::</span><span class="fu">str_detect</span>(Filespeakerid ,<span class="st">&quot;S2A&quot;</span>) <span class="sc">~</span> <span class="st">&quot;UnscriptedMonologue&quot;</span>,</span>
<span id="cb209-6"><a href="introduction-to-r.html#cb209-6" tabindex="-1"></a>                                   stringr<span class="sc">::</span><span class="fu">str_detect</span>(Filespeakerid ,<span class="st">&quot;S2B&quot;</span>) <span class="sc">~</span> <span class="st">&quot;ScriptedMonologue&quot;</span>,</span>
<span id="cb209-7"><a href="introduction-to-r.html#cb209-7" tabindex="-1"></a>                                   <span class="cn">TRUE</span> <span class="sc">~</span> Filespeakerid))</span>
<span id="cb209-8"><a href="introduction-to-r.html#cb209-8" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb209-9"><a href="introduction-to-r.html#cb209-9" tabindex="-1"></a><span class="fu">head</span>(icebio_texttype)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   Filespeakerid Sex    Word.count Texttype      
##   &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;         
## 1 &lt;S1A-002$A&gt;   female        391 PrivateDialoge
## 2 &lt;S1A-002$B&gt;   female         47 PrivateDialoge
## 3 &lt;S1A-002$C&gt;   male          200 PrivateDialoge
## 4 &lt;S1A-002$D&gt;   female        464 PrivateDialoge
## 5 &lt;S1A-002$E&gt;   male          639 PrivateDialoge
## 6 &lt;S1A-002$F&gt;   female        308 PrivateDialoge</code></pre>
</div>
<div id="if-statements" class="section level3 hasAnchor" number="2.7.12">
<h3><span class="header-section-number">2.7.12</span> If-statements<a href="introduction-to-r.html#if-statements" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We should briefly talk about if-statements (or <code>case_when</code> in the present case). The <code>case_when</code> function is both very powerful and extremely helpful as it allows you to assign values based on a test. As such, <code>case_when</code>-statements can be read as:</p>
<p><em>When/If X is the case, then do A and if X is not the case do B!</em> (When/If -&gt; Then -&gt; Else)</p>
<p>The nice thing about <code>ifelse</code> or <code>case_when</code>-statements is that they can be used in succession as we have done above. This can then be read as:</p>
<p><em>If X is the case, then do A, if Y is the case, then do B, else do Z</em></p>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<p>1.Using the data called <code>icebio</code>, create a new data set called <code>ICE_Ire_AgeGroup</code> in which you create a column called <code>AgeGroup</code> where all speakers who are younger than 42 have the value <em>young</em> and all speakers aged 42 and over <em>old</em>.</p>
<p><strong>Tip</strong>: use if-statements to assign the <em>old</em> and <em>young</em> values.</p>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="introduction-to-r.html#cb211-1" tabindex="-1"></a>  ICE_Ire_AgeGroup <span class="ot">&lt;-</span> icebio <span class="sc">%&gt;%</span></span>
<span id="cb211-2"><a href="introduction-to-r.html#cb211-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">AgeGroup =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(age <span class="sc">==</span> <span class="st">&quot;42-49&quot;</span> <span class="sc">~</span> <span class="st">&quot;old&quot;</span>,</span>
<span id="cb211-3"><a href="introduction-to-r.html#cb211-3" tabindex="-1"></a>                                            age <span class="sc">==</span> <span class="st">&quot;50+&quot;</span> <span class="sc">~</span> <span class="st">&quot;old&quot;</span>, </span>
<span id="cb211-4"><a href="introduction-to-r.html#cb211-4" tabindex="-1"></a>                                            age <span class="sc">==</span> <span class="st">&quot;0-18&quot;</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb211-5"><a href="introduction-to-r.html#cb211-5" tabindex="-1"></a>                                            age <span class="sc">==</span> <span class="st">&quot;19-25&quot;</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb211-6"><a href="introduction-to-r.html#cb211-6" tabindex="-1"></a>                                            age <span class="sc">==</span> <span class="st">&quot;26-33&quot;</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb211-7"><a href="introduction-to-r.html#cb211-7" tabindex="-1"></a>                                            age <span class="sc">==</span> <span class="st">&quot;34-41&quot;</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>, </span>
<span id="cb211-8"><a href="introduction-to-r.html#cb211-8" tabindex="-1"></a>                                            <span class="cn">TRUE</span> <span class="sc">~</span>age))</span>
<span id="cb211-9"><a href="introduction-to-r.html#cb211-9" tabindex="-1"></a>  <span class="co"># inspect data</span></span>
<span id="cb211-10"><a href="introduction-to-r.html#cb211-10" tabindex="-1"></a>  <span class="fu">head</span>(ICE_Ire_AgeGroup); <span class="fu">table</span>(ICE_Ire_AgeGroup<span class="sc">$</span>AgeGroup)</span></code></pre></div>
<pre><code>  ## # A tibble: 6 × 10
  ##      id file.speaker.id text.id spk.ref zone        date  sex   age   word.count
  ##   &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
  ## 1     1 &lt;S1A-001$A&gt;     S1A-001 A       northern i… 1990… male  34-41        765
  ## 2     2 &lt;S1A-001$B&gt;     S1A-001 B       northern i… 1990… fema… 34-41       1298
  ## 3     3 &lt;S1A-002$?&gt;     S1A-002 ?       NA          NA    NA    NA            23
  ## 4     4 &lt;S1A-002$A&gt;     S1A-002 A       northern i… 2002… fema… 26-33        391
  ## 5     5 &lt;S1A-002$B&gt;     S1A-002 B       northern i… 2002… fema… 19-25         47
  ## 6     6 &lt;S1A-002$C&gt;     S1A-002 C       northern i… 2002… male  50+          200
  ## # ℹ 1 more variable: AgeGroup &lt;chr&gt;</code></pre>
<pre><code>  ## 
  ##    NA   old young 
  ##   547   333   452</code></pre>
</details>
</div>
<p>`</p>
<hr />
</div>
<div id="summarizing-data" class="section level3 hasAnchor" number="2.7.13">
<h3><span class="header-section-number">2.7.13</span> Summarizing data<a href="introduction-to-r.html#summarizing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Summarizing is really helpful and can be done using the <code>summarise</code> function.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="introduction-to-r.html#cb214-1" tabindex="-1"></a>icebio_summary1 <span class="ot">&lt;-</span> icebio_texttype <span class="sc">%&gt;%</span></span>
<span id="cb214-2"><a href="introduction-to-r.html#cb214-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Words =</span> <span class="fu">sum</span>(Word.count))</span>
<span id="cb214-3"><a href="introduction-to-r.html#cb214-3" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb214-4"><a href="introduction-to-r.html#cb214-4" tabindex="-1"></a><span class="fu">head</span>(icebio_summary1)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##    Words
##    &lt;dbl&gt;
## 1 141876</code></pre>
<p>To get summaries of sub-groups or by variable level, we can use the <code>group_by</code> function and then use the <code>summarise</code> function.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="introduction-to-r.html#cb216-1" tabindex="-1"></a>icebio_summary2 <span class="ot">&lt;-</span> icebio_texttype <span class="sc">%&gt;%</span></span>
<span id="cb216-2"><a href="introduction-to-r.html#cb216-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Texttype, Sex) <span class="sc">%&gt;%</span></span>
<span id="cb216-3"><a href="introduction-to-r.html#cb216-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Speakers =</span> <span class="fu">n</span>(),</span>
<span id="cb216-4"><a href="introduction-to-r.html#cb216-4" tabindex="-1"></a>            <span class="at">Words =</span> <span class="fu">sum</span>(Word.count))</span>
<span id="cb216-5"><a href="introduction-to-r.html#cb216-5" tabindex="-1"></a><span class="co"># inspect data</span></span>
<span id="cb216-6"><a href="introduction-to-r.html#cb216-6" tabindex="-1"></a><span class="fu">head</span>(icebio_summary2)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
## # Groups:   Texttype [3]
##   Texttype            Sex    Speakers Words
##   &lt;chr&gt;               &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;
## 1 PrivateDialoge      female      105 60024
## 2 PrivateDialoge      male         18  9628
## 3 PublicDialogue      female       63 24647
## 4 PublicDialogue      male         41 16783
## 5 UnscriptedMonologue female        3  6712
## 6 UnscriptedMonologue male         16 24082</code></pre>
<hr />
<div class="warning" style="padding:0.1em; background-color:#51247a; color:#f2f2f2">
<span>
<p style="margin-top:1em; text-align:center">
<b>EXERCISE TIME!</b>
</p>
<p style="margin-left:1em;">
</p>
<p></span></p>
</div>
<div class="question">
<p>`</p>
<ol style="list-style-type: decimal">
<li>Use the <code>icebio</code> and determine the number of words uttered by female speakers from Northern Ireland above an age of 50.</li>
</ol>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="introduction-to-r.html#cb218-1" tabindex="-1"></a>  words_fni50 <span class="ot">&lt;-</span> icebio <span class="sc">%&gt;%</span></span>
<span id="cb218-2"><a href="introduction-to-r.html#cb218-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(zone, sex, age, word.count) <span class="sc">%&gt;%</span></span>
<span id="cb218-3"><a href="introduction-to-r.html#cb218-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(zone, sex, age) <span class="sc">%&gt;%</span></span>
<span id="cb218-4"><a href="introduction-to-r.html#cb218-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Words =</span> <span class="fu">sum</span>(word.count)) <span class="sc">%&gt;%</span></span>
<span id="cb218-5"><a href="introduction-to-r.html#cb218-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>,</span>
<span id="cb218-6"><a href="introduction-to-r.html#cb218-6" tabindex="-1"></a>         age <span class="sc">==</span> <span class="st">&quot;50+&quot;</span>,</span>
<span id="cb218-7"><a href="introduction-to-r.html#cb218-7" tabindex="-1"></a>         zone <span class="sc">==</span> <span class="st">&quot;northern ireland&quot;</span>)</span></code></pre></div>
<pre><code>  ## `summarise()` has grouped output by &#39;zone&#39;, &#39;sex&#39;. You can override using the
  ## `.groups` argument.</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="introduction-to-r.html#cb220-1" tabindex="-1"></a>  <span class="co"># inspect data</span></span>
<span id="cb220-2"><a href="introduction-to-r.html#cb220-2" tabindex="-1"></a>  words_fni50</span></code></pre></div>
<pre><code>  ## # A tibble: 1 × 4
  ## # Groups:   zone, sex [1]
  ##   zone             sex    age   Words
  ##   &lt;chr&gt;            &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
  ## 1 northern ireland female 50+   23210</code></pre>
</details>
<ol start="2" style="list-style-type: decimal">
<li>Load the file <em>exercisedata.txt</em> and determine the mean scores of groups A and B.</li>
</ol>
<p><strong>Tip</strong>: to extract the mean, combine the <code>summary</code> function with the <code>mean</code> function.</p>
<details>
<summary>
Answer
</summary>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="introduction-to-r.html#cb222-1" tabindex="-1"></a>  exercisedata <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;exercisedata.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb222-2"><a href="introduction-to-r.html#cb222-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Group) <span class="sc">%&gt;%</span></span>
<span id="cb222-3"><a href="introduction-to-r.html#cb222-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Score))</span>
<span id="cb222-4"><a href="introduction-to-r.html#cb222-4" tabindex="-1"></a>  <span class="co"># inspect data</span></span>
<span id="cb222-5"><a href="introduction-to-r.html#cb222-5" tabindex="-1"></a>  exercisedata</span></code></pre></div>
<pre><code>  ## # A tibble: 2 × 2
  ##   Group  Mean
  ##   &lt;chr&gt; &lt;dbl&gt;
  ## 1 A      14.9
  ## 2 B      11.8</code></pre>
</details>
</div>
<p>`</p>
<hr />
</div>
<div id="gathering-and-spreading-data" class="section level3 hasAnchor" number="2.7.14">
<h3><span class="header-section-number">2.7.14</span> Gathering and spreading data<a href="introduction-to-r.html#gathering-and-spreading-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>tidyr</code> package has two very useful functions for gathering and spreading data that can be sued to transform data to long and wide formats (you will see what this means below). The functions are called <code>gather</code> and <code>spread</code>.</p>
<p>We will use the data set called <code>icebio_summary2</code>, which we created above, to demonstrate how this works.</p>
<p>We will first check out the <code>spread</code>-function to create different columns for women and men that show how many of them are represented in the different text types.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="introduction-to-r.html#cb224-1" tabindex="-1"></a>icebio_summary_wide <span class="ot">&lt;-</span> icebio_summary2 <span class="sc">%&gt;%</span></span>
<span id="cb224-2"><a href="introduction-to-r.html#cb224-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Words) <span class="sc">%&gt;%</span></span>
<span id="cb224-3"><a href="introduction-to-r.html#cb224-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(Sex, Speakers)</span>
<span id="cb224-4"><a href="introduction-to-r.html#cb224-4" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb224-5"><a href="introduction-to-r.html#cb224-5" tabindex="-1"></a>icebio_summary_wide</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   Texttype [3]
##   Texttype            female  male
##   &lt;chr&gt;                &lt;int&gt; &lt;int&gt;
## 1 PrivateDialoge         105    18
## 2 PublicDialogue          63    41
## 3 UnscriptedMonologue      3    16</code></pre>
<p>The data is now in what is called a <code>wide</code>-format as values are distributed across columns.</p>
<p>To reformat this back to a <code>long</code>-format where each column represents exactly one variable, we use the <code>gather</code>-function:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="introduction-to-r.html#cb226-1" tabindex="-1"></a>icebio_summary_long <span class="ot">&lt;-</span> icebio_summary_wide <span class="sc">%&gt;%</span></span>
<span id="cb226-2"><a href="introduction-to-r.html#cb226-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">gather</span>(Sex, Speakers, female<span class="sc">:</span>male)</span>
<span id="cb226-3"><a href="introduction-to-r.html#cb226-3" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb226-4"><a href="introduction-to-r.html#cb226-4" tabindex="-1"></a>icebio_summary_long</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
## # Groups:   Texttype [3]
##   Texttype            Sex    Speakers
##   &lt;chr&gt;               &lt;chr&gt;     &lt;int&gt;
## 1 PrivateDialoge      female      105
## 2 PublicDialogue      female       63
## 3 UnscriptedMonologue female        3
## 4 PrivateDialoge      male         18
## 5 PublicDialogue      male         41
## 6 UnscriptedMonologue male         16</code></pre>
</div>
</div>
<div id="going-further" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Going further<a href="introduction-to-r.html#going-further" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you want to know more, there are various online resources available to learn R (you can check out a very recommendable introduction <a href="https://uvastatlab.github.io/phdplus/intror.html">here</a>).</p>
<p>Here are also some additional resources that you may find helpful:</p>
<ul>
<li>Grolemund. G., and Wickham, H., <a href="http://r4ds.had.co.nz/"><em>R 4 Data Science</em></a>, 2017.
<ul>
<li>Highly recommended! (especially chapters 1, 2, 4, 6, and 8)</li>
</ul></li>
<li>Stat545 - Data wrangling, exploration, and analysis with R. University of British Columbia. <a href="http://stat545.com/" class="uri">http://stat545.com/</a></li>
<li>Swirlstats, a package that teaches you R and statistics within R: <a href="https://swirlstats.com/" class="uri">https://swirlstats.com/</a></li>
<li>DataCamp’s (free) <em>Intro to R</em> interactive tutorial: <a href="https://www.datacamp.com/courses/free-introduction-to-r" class="uri">https://www.datacamp.com/courses/free-introduction-to-r</a>
<ul>
<li>DataCamp’s advanced R tutorials require a subscription.
*Twitter:</li>
<li>Explore RStudio Tips <a href="https://twitter.com/rstudiotips" class="uri">https://twitter.com/rstudiotips</a></li>
<li>Explore #rstats, #rstudioconf</li>
</ul></li>
</ul>
</div>
<div id="ending-r-sessions" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> Ending R sessions<a href="introduction-to-r.html#ending-r-sessions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At the end of each session, you can extract information about the session itself (e.g. which R version you used and which versions of packages). This can help others (or even your future self) to reproduce the analysis that you have done.</p>
<div id="extracting-session-information" class="section level3 hasAnchor" number="2.9.1">
<h3><span class="header-section-number">2.9.1</span> Extracting session information<a href="introduction-to-r.html#extracting-session-information" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can extract the session information by running the <code>sessionInfo</code> function (without any arguments)</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="introduction-to-r.html#cb228-1" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.3.2 (2023-10-31 ucrt)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 11 x64 (build 22621)
## 
## Matrix products: default
## 
## 
## locale:
## [1] LC_COLLATE=English_Australia.utf8  LC_CTYPE=English_Australia.utf8   
## [3] LC_MONETARY=English_Australia.utf8 LC_NUMERIC=C                      
## [5] LC_TIME=English_Australia.utf8    
## 
## time zone: Australia/Brisbane
## tzcode source: internal
## 
## attached base packages:
## [1] stats     graphics  grDevices datasets  utils     methods   base     
## 
## other attached packages:
##  [1] udpipe_0.8.11    flextable_0.9.5  here_1.0.1       tokenizers_0.3.0
##  [5] tm_0.7-12        NLP_0.2-1        readxl_1.4.3     quanteda_3.3.1  
##  [9] tidytext_0.4.1   lubridate_1.9.3  forcats_1.0.0    stringr_1.5.1   
## [13] dplyr_1.1.4      purrr_1.0.2      readr_2.1.5      tidyr_1.3.1     
## [17] tibble_3.2.1     ggplot2_3.5.0    tidyverse_2.0.0 
## 
## loaded via a namespace (and not attached):
##  [1] tidyselect_1.2.1        farver_2.1.1            fastmap_1.1.1          
##  [4] fontquiver_0.2.1        janeaustenr_1.0.0       promises_1.2.1         
##  [7] digest_0.6.35           timechange_0.3.0        mime_0.12              
## [10] lifecycle_1.0.4         gfonts_0.2.0            magrittr_2.0.3         
## [13] compiler_4.3.2          rlang_1.1.3             sass_0.4.9             
## [16] tools_4.3.2             utf8_1.2.4              yaml_2.3.8             
## [19] data.table_1.15.2       knitr_1.45              labeling_0.4.3         
## [22] askpass_1.2.0           stopwords_2.3           curl_5.2.1             
## [25] xml2_1.3.6              klippy_0.0.0.9500       httpcode_0.3.0         
## [28] withr_3.0.0             grid_4.3.2              fansi_1.0.6            
## [31] gdtools_0.3.7           xtable_1.8-4            colorspace_2.1-0       
## [34] scales_1.3.0            crul_1.4.0              cli_3.6.2              
## [37] rmarkdown_2.26          crayon_1.5.2            ragg_1.3.0             
## [40] generics_0.1.3          RcppParallel_5.1.7      rstudioapi_0.16.0      
## [43] tzdb_0.4.0              cachem_1.0.8            assertthat_0.2.1       
## [46] parallel_4.3.2          cellranger_1.1.0        vctrs_0.6.5            
## [49] Matrix_1.6-5            jsonlite_1.8.8          slam_0.1-50            
## [52] fontBitstreamVera_0.1.1 bookdown_0.38           hms_1.1.3              
## [55] systemfonts_1.0.6       jquerylib_0.1.4         glue_1.7.0             
## [58] stringi_1.8.3           gtable_0.3.4            later_1.3.2            
## [61] munsell_0.5.0           pillar_1.9.0            htmltools_0.5.8        
## [64] openssl_2.1.1           R6_2.5.1                textshaping_0.3.7      
## [67] rprojroot_2.0.4         evaluate_0.23           shiny_1.8.1            
## [70] lattice_0.21-9          highr_0.10              SnowballC_0.7.1        
## [73] renv_1.0.5              fontLiberation_0.1.0    httpuv_1.6.15          
## [76] bslib_0.7.0             zip_2.3.1               uuid_1.2-0             
## [79] Rcpp_1.0.12             fastmatch_1.1-4         officer_0.6.5          
## [82] xfun_0.43               pkgconfig_2.0.3</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-text-analysis-with-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MartinSchweinberger/IntroR_WS/edit/main/02-intror.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/MartinSchweinberger/IntroR_WS/blob/main/02-intror.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
