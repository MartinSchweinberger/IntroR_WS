<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 7 Networks and Collocation Analysis | Introduction to R for Social Science</title>
  <meta name="description" content="Section 7 Networks and Collocation Analysis | Introduction to R for Social Science" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 7 Networks and Collocation Analysis | Introduction to R for Social Science" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 7 Networks and Collocation Analysis | Introduction to R for Social Science" />
  
  
  

<meta name="author" content="Martin Schweinberger" />


<meta name="date" content="2024-06-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="keyword-detection.html"/>
<link rel="next" href="exercise-3-manual-topic-modelling.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
<script src="libs/tabwid-1.1.3/tabwid.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> General Information</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i><b>1.1</b> Abstract</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#timeline"><i class="fa fa-check"></i><b>1.2</b> Timeline</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#resources"><i class="fa fa-check"></i><b>1.3</b> Resources</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#audience"><i class="fa fa-check"></i><b>1.4</b> Audience</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#what-to-do-before-the-workshop"><i class="fa fa-check"></i><b>1.5</b> What to do before the workshop</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#getting-started"><i class="fa fa-check"></i><b>1.6</b> Getting started</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#preparation"><i class="fa fa-check"></i><b>2.2</b> Preparation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#before-you-start-working-with-rrstudio-folder-structure-and-r-projects"><i class="fa fa-check"></i><b>2.2.1</b> Before you start working with R/RStudio (Folder Structure and R projects)</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#create-a-folder-for-your-project"><i class="fa fa-check"></i><b>2.2.2</b> Create a folder for your project</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#open-rstudio"><i class="fa fa-check"></i><b>2.2.3</b> Open RStudio</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-projects"><i class="fa fa-check"></i><b>2.2.4</b> R Projects</a></li>
<li class="chapter" data-level="2.2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-notebooks"><i class="fa fa-check"></i><b>2.2.5</b> R Notebooks</a></li>
<li class="chapter" data-level="2.2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#updating-r"><i class="fa fa-check"></i><b>2.2.6</b> Updating R</a></li>
<li class="chapter" data-level="2.2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#optimizing-r-project-options"><i class="fa fa-check"></i><b>2.2.7</b> Optimizing R project options</a></li>
<li class="chapter" data-level="2.2.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started-with-r-notebooks"><i class="fa fa-check"></i><b>2.2.8</b> Getting started with R Notebooks</a></li>
<li class="chapter" data-level="2.2.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-markdown"><i class="fa fa-check"></i><b>2.2.9</b> R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-and-rstudio-basics"><i class="fa fa-check"></i><b>2.3</b> R and RStudio Basics</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#rstudio-panes"><i class="fa fa-check"></i><b>2.3.1</b> RStudio: Panes</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started-with-r"><i class="fa fa-check"></i><b>2.4</b> Getting started with R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#setting-up-an-r-session"><i class="fa fa-check"></i><b>2.4.1</b> Setting up an R session</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#packages"><i class="fa fa-check"></i><b>2.4.2</b> Packages</a></li>
<li class="chapter" data-level="2.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-help"><i class="fa fa-check"></i><b>2.4.3</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions-and-objects"><i class="fa fa-check"></i><b>2.5</b> Functions and Objects</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#inspecting-data"><i class="fa fa-check"></i><b>2.6</b> Inspecting data</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#loading-text-data"><i class="fa fa-check"></i><b>2.7</b> Loading text data</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#saving-text-data"><i class="fa fa-check"></i><b>2.8</b> Saving text data</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#piping"><i class="fa fa-check"></i><b>2.9</b> Piping</a></li>
<li class="chapter" data-level="2.10" data-path="introduction-to-r.html"><a href="introduction-to-r.html#extracting-frequency-information-from-text"><i class="fa fa-check"></i><b>2.10</b> Extracting frequency information from text</a></li>
<li class="chapter" data-level="2.11" data-path="introduction-to-r.html"><a href="introduction-to-r.html#regular-expressions"><i class="fa fa-check"></i><b>2.11</b> Regular Expressions</a></li>
<li class="chapter" data-level="2.12" data-path="introduction-to-r.html"><a href="introduction-to-r.html#practice-regular-expressions"><i class="fa fa-check"></i><b>2.12</b> Practice: regular expressions</a></li>
<li class="chapter" data-level="2.13" data-path="introduction-to-r.html"><a href="introduction-to-r.html#stemming"><i class="fa fa-check"></i><b>2.13</b> Stemming</a></li>
<li class="chapter" data-level="2.14" data-path="introduction-to-r.html"><a href="introduction-to-r.html#part-of-speech-tagging-and-dependency-parsing"><i class="fa fa-check"></i><b>2.14</b> Part-of-speech tagging and dependency parsing</a></li>
<li class="chapter" data-level="2.15" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-processing-chains"><i class="fa fa-check"></i><b>2.15</b> Data processing chains</a></li>
<li class="chapter" data-level="2.16" data-path="introduction-to-r.html"><a href="introduction-to-r.html#concordancing-and-kwics"><i class="fa fa-check"></i><b>2.16</b> Concordancing and KWICs</a></li>
<li class="chapter" data-level="2.17" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basics-of-ggplot2-syntax"><i class="fa fa-check"></i><b>2.17</b> Basics of ggplot2 syntax</a></li>
<li class="chapter" data-level="2.18" data-path="introduction-to-r.html"><a href="introduction-to-r.html#line-plot"><i class="fa fa-check"></i><b>2.18</b> Line plot</a></li>
<li class="chapter" data-level="2.19" data-path="introduction-to-r.html"><a href="introduction-to-r.html#prettifying-plots"><i class="fa fa-check"></i><b>2.19</b> Prettifying plots</a></li>
<li class="chapter" data-level="2.20" data-path="introduction-to-r.html"><a href="introduction-to-r.html#combining-plots"><i class="fa fa-check"></i><b>2.20</b> Combining plots</a></li>
<li class="chapter" data-level="2.21" data-path="introduction-to-r.html"><a href="introduction-to-r.html#boxplots"><i class="fa fa-check"></i><b>2.21</b> Boxplots</a></li>
<li class="chapter" data-level="2.22" data-path="introduction-to-r.html"><a href="introduction-to-r.html#barplots"><i class="fa fa-check"></i><b>2.22</b> Barplots</a></li>
<li class="chapter" data-level="2.23" data-path="introduction-to-r.html"><a href="introduction-to-r.html#wordclouds"><i class="fa fa-check"></i><b>2.23</b> Wordclouds</a></li>
<li class="chapter" data-level="2.24" data-path="introduction-to-r.html"><a href="introduction-to-r.html#going-further"><i class="fa fa-check"></i><b>2.24</b> Going further</a></li>
<li class="chapter" data-level="2.25" data-path="introduction-to-r.html"><a href="introduction-to-r.html#ending-r-sessions"><i class="fa fa-check"></i><b>2.25</b> Ending R sessions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html"><i class="fa fa-check"></i><b>3</b> Introduction to Text Analysis with R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#what-is-text-analysis"><i class="fa fa-check"></i><b>3.1</b> What is Text Analysis?</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-text-analysis-with-r.html"><a href="introduction-to-text-analysis-with-r.html#preparation-and-session-set-up"><i class="fa fa-check"></i><b>3.2</b> Preparation and session set up</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exercise-2-identifying-keywords-and-sentiments.html"><a href="exercise-2-identifying-keywords-and-sentiments.html"><i class="fa fa-check"></i><b>4</b> Exercise 2: Identifying Keywords and Sentiments</a></li>
<li class="chapter" data-level="5" data-path="sentiment-analysis.html"><a href="sentiment-analysis.html"><i class="fa fa-check"></i><b>5</b> Sentiment Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sentiment-analysis.html"><a href="sentiment-analysis.html#what-is-sentiment-analysis"><i class="fa fa-check"></i><b>5.1</b> What is Sentiment Analysis?</a></li>
<li class="chapter" data-level="5.2" data-path="sentiment-analysis.html"><a href="sentiment-analysis.html#exporting-the-results"><i class="fa fa-check"></i><b>5.2</b> Exporting the results</a></li>
<li class="chapter" data-level="5.3" data-path="sentiment-analysis.html"><a href="sentiment-analysis.html#summarizing-results"><i class="fa fa-check"></i><b>5.3</b> Summarizing results</a></li>
<li class="chapter" data-level="5.4" data-path="sentiment-analysis.html"><a href="sentiment-analysis.html#visualizing-results"><i class="fa fa-check"></i><b>5.4</b> Visualizing results</a></li>
<li class="chapter" data-level="5.5" data-path="sentiment-analysis.html"><a href="sentiment-analysis.html#identifying-important-emotives"><i class="fa fa-check"></i><b>5.5</b> Identifying important emotives</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="keyword-detection.html"><a href="keyword-detection.html"><i class="fa fa-check"></i><b>6</b> Keyword Detection</a>
<ul>
<li class="chapter" data-level="6.1" data-path="keyword-detection.html"><a href="keyword-detection.html#dimensions-of-keyness"><i class="fa fa-check"></i><b>6.1</b> Dimensions of keyness</a></li>
<li class="chapter" data-level="6.2" data-path="keyword-detection.html"><a href="keyword-detection.html#identifying-keywords"><i class="fa fa-check"></i><b>6.2</b> Identifying keywords</a></li>
<li class="chapter" data-level="6.3" data-path="keyword-detection.html"><a href="keyword-detection.html#visualising-keywords"><i class="fa fa-check"></i><b>6.3</b> Visualising keywords</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="networks-and-collocation-analysis.html"><a href="networks-and-collocation-analysis.html"><i class="fa fa-check"></i><b>7</b> Networks and Collocation Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="networks-and-collocation-analysis.html"><a href="networks-and-collocation-analysis.html#networks"><i class="fa fa-check"></i><b>7.1</b> Networks</a></li>
<li class="chapter" data-level="7.2" data-path="networks-and-collocation-analysis.html"><a href="networks-and-collocation-analysis.html#collocations"><i class="fa fa-check"></i><b>7.2</b> Collocations</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exercise-3-manual-topic-modelling.html"><a href="exercise-3-manual-topic-modelling.html"><i class="fa fa-check"></i><b>8</b> Exercise 3: Manual Topic Modelling</a></li>
<li class="chapter" data-level="9" data-path="topic-modelling.html"><a href="topic-modelling.html"><i class="fa fa-check"></i><b>9</b> Topic Modelling</a>
<ul>
<li class="chapter" data-level="9.1" data-path="topic-modelling.html"><a href="topic-modelling.html#getting-started-with-topic-modelling"><i class="fa fa-check"></i><b>9.1</b> Getting started with Topic Modelling</a></li>
<li class="chapter" data-level="9.2" data-path="topic-modelling.html"><a href="topic-modelling.html#human-in-the-loop-topic-modelling"><i class="fa fa-check"></i><b>9.2</b> Human-in-the-loop Topic Modelling</a></li>
<li class="chapter" data-level="9.3" data-path="topic-modelling.html"><a href="topic-modelling.html#loading-and-preparing-data"><i class="fa fa-check"></i><b>9.3</b> Loading and preparing data</a></li>
<li class="chapter" data-level="9.4" data-path="topic-modelling.html"><a href="topic-modelling.html#initial-unsupervised-topic-model"><i class="fa fa-check"></i><b>9.4</b> Initial unsupervised topic model</a></li>
<li class="chapter" data-level="9.5" data-path="topic-modelling.html"><a href="topic-modelling.html#supervised-seeded-topic-model"><i class="fa fa-check"></i><b>9.5</b> Supervised, seeded topic model</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="network-analysis.html"><a href="network-analysis.html"><i class="fa fa-check"></i><b>10</b> Network Analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="network-analysis.html"><a href="network-analysis.html#data-preparation"><i class="fa fa-check"></i><b>10.1</b> Data preparation</a></li>
<li class="chapter" data-level="10.2" data-path="network-analysis.html"><a href="network-analysis.html#creating-a-matrix"><i class="fa fa-check"></i><b>10.2</b> Creating a matrix</a></li>
<li class="chapter" data-level="10.3" data-path="network-analysis.html"><a href="network-analysis.html#visualizing-networks"><i class="fa fa-check"></i><b>10.3</b> Visualizing Networks</a></li>
<li class="chapter" data-level="10.4" data-path="network-analysis.html"><a href="network-analysis.html#network-statistics"><i class="fa fa-check"></i><b>10.4</b> Network Statistics</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="network-analysis.html"><a href="network-analysis.html#degree-centrality"><i class="fa fa-check"></i><b>10.4.1</b> Degree centrality</a></li>
<li class="chapter" data-level="10.4.2" data-path="network-analysis.html"><a href="network-analysis.html#central-node"><i class="fa fa-check"></i><b>10.4.2</b> Central node</a></li>
<li class="chapter" data-level="10.4.3" data-path="network-analysis.html"><a href="network-analysis.html#betweenness-centrality"><i class="fa fa-check"></i><b>10.4.3</b> Betweenness centrality</a></li>
<li class="chapter" data-level="10.4.4" data-path="network-analysis.html"><a href="network-analysis.html#closeness"><i class="fa fa-check"></i><b>10.4.4</b> Closeness</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="citation-session-info.html"><a href="citation-session-info.html"><i class="fa fa-check"></i><b>11</b> Citation &amp; Session Info</a></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R for Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="networks-and-collocation-analysis" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Section 7</span> Networks and Collocation Analysis<a href="networks-and-collocation-analysis.html#networks-and-collocation-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this part of the workshop, we will extract collocatiosn and display tem in a network.</p>
<div id="networks" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Networks<a href="networks-and-collocation-analysis.html#networks" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Networks are a powerful method for visualizing relationships among various elements, such as authors, characters, or words <span class="citation">(Silge and Robinson 2017, 131–37)</span>. Network analysis goes beyond mere visualization; it’s a technique for uncovering patterns and structures within complex systems. In essence, network analysis represents relationships as nodes (elements) connected by edges (relationships) which provides a unique perspective for understanding the connections and interactions within your data.</p>
<p>Networks, also known as graphs, are powerful tools that represent relationships among entities. They consist of <strong>nodes</strong> (often depicted as dots) and <strong>edges</strong> (typically represented as lines) and can be categorized as directed or undirected networks.</p>
<ul>
<li>In <em>directed networks</em>, the direction of edges is captured, signifying the flow or relationship from one node to another. An example of a directed network is the trade relationships between countries, where arrows on the edges indicate the direction of exports. The thickness of these arrows can also encode additional information, such as the frequency or strength of the relationship.<br />
</li>
<li><em>Undirected networks</em>, on the other hand, represent symmetric relationships where the connection between two nodes is mutual. For example, in a social network, the connections between individuals are often undirected, as the relationship between friends is reciprocal.</li>
</ul>
<p>Network analysis involves exploring the structure and properties of these networks. One key concept is centrality, which identifies the most important nodes in a network. Centrality metrics, such as <em>degree centrality</em> (number of connections) and <em>betweenness centrality</em> (importance in connecting other nodes), help unveil the significance of specific nodes.</p>
</div>
<div id="collocations" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Collocations<a href="networks-and-collocation-analysis.html#collocations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Collocations are like linguistic buddies. They’re those word pairs that just seem to go hand in hand, like <em>Merry Christmas</em>. You see, these words have a special relationship – they occur together way more often than if words were just randomly strung together in a sentence.</p>
<p>Before we start tough, it is important to understand that identifying words pairs (w1 and w2) that collocate (i.e. collocations) and determining their association strength (a measure of how strongly attracted words are to each other) is based on the co-occurrence frequencies of word pairs in a contingency table (see below, <em>O</em> is short for <em>observed frequency</em>).</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">w<sub>2</sub> present</th>
<th align="right">w<sub>2</sub> absent</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>w<sub>1</sub> present</strong></td>
<td align="center">O<sub>11</sub></td>
<td align="right">O<sub>12</sub></td>
<td>= R<sub>1</sub></td>
</tr>
<tr class="even">
<td align="left"><strong>w<sub>1</sub> absent</strong></td>
<td align="center">O<sub>21</sub></td>
<td align="right">O<sub>22</sub></td>
<td>= R<sub>2</sub></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="center">= C<sub>1</sub></td>
<td align="right">= C<sub>2</sub></td>
<td>= N</td>
</tr>
</tbody>
</table>
<p>In the following, we will extract collocations from the sentences in our example text. In a first step, we split our example text into sentences and clean the data (removing punctuation, converting to lower case, etc.).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="networks-and-collocation-analysis.html#cb34-1" tabindex="-1"></a><span class="co"># load reviews</span></span>
<span id="cb34-2"><a href="networks-and-collocation-analysis.html#cb34-2" tabindex="-1"></a><span class="fu">list.files</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data/reviews_pos&quot;</span>), <span class="at">full.names =</span> T, <span class="at">pattern =</span> <span class="st">&quot;.*txt&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="networks-and-collocation-analysis.html#cb34-3" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_chr</span>(<span class="sc">~</span> readr<span class="sc">::</span><span class="fu">read_file</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="networks-and-collocation-analysis.html#cb34-4" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="networks-and-collocation-analysis.html#cb34-5" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;&lt;.*?&gt;&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-6"><a href="networks-and-collocation-analysis.html#cb34-6" tabindex="-1"></a>  <span class="co"># split text into sentences</span></span>
<span id="cb34-7"><a href="networks-and-collocation-analysis.html#cb34-7" tabindex="-1"></a>  tokenizers<span class="sc">::</span><span class="fu">tokenize_sentences</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="networks-and-collocation-analysis.html#cb34-8" tabindex="-1"></a>  <span class="co"># unlist sentences</span></span>
<span id="cb34-9"><a href="networks-and-collocation-analysis.html#cb34-9" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-10"><a href="networks-and-collocation-analysis.html#cb34-10" tabindex="-1"></a>  <span class="co"># remove non-word characters</span></span>
<span id="cb34-11"><a href="networks-and-collocation-analysis.html#cb34-11" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">W&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-12"><a href="networks-and-collocation-analysis.html#cb34-12" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;[^[:alnum:] ]&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-13"><a href="networks-and-collocation-analysis.html#cb34-13" tabindex="-1"></a>  <span class="co"># remove superfluous white spaces</span></span>
<span id="cb34-14"><a href="networks-and-collocation-analysis.html#cb34-14" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_squish</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-15"><a href="networks-and-collocation-analysis.html#cb34-15" tabindex="-1"></a>  <span class="co"># convert to lower case and save in &#39;sentences&#39; object</span></span>
<span id="cb34-16"><a href="networks-and-collocation-analysis.html#cb34-16" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="ot">-&gt;</span> sentences</span>
<span id="cb34-17"><a href="networks-and-collocation-analysis.html#cb34-17" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb34-18"><a href="networks-and-collocation-analysis.html#cb34-18" tabindex="-1"></a>sentences <span class="sc">%&gt;%</span></span>
<span id="cb34-19"><a href="networks-and-collocation-analysis.html#cb34-19" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-20"><a href="networks-and-collocation-analysis.html#cb34-20" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##                                                                                                                                                                      .
## 1                                                                      one of the other reviewers has mentioned that after watching just 1 oz episode you ll be hooked
## 2                                                                                                              they are right as this is exactly what happened with me
## 3                                     the first thing that struck me about oz was its brutality and unflinching scenes of violence which set in right from the word go
## 4                                                                                                           trust me this is not a show for the faint hearted or timid
## 5                                                                                                     this show pulls no punches with regards to drugs sex or violence
## 6                                                                                                                       its is hardcore in the classic use of the word
## 7                                                                       it is called oz as that is the nickname given to the oswald maximum security state penitentary
## 8  it focuses mainly on emerald city an experimental section of the prison where all the cells have glass fronts and face inwards so privacy is not high on the agenda
## 9                                                                                                                                              em city is home to many
## 10                  aryans muslims gangstas latinos christians italians irish and more so scuffles death stares dodgy dealings and shady agreements are never far away</code></pre>
<p>Next, we tabulate the data and reformat it so that we have the relevant information to calculate the association statistics (word 1 and word 2 as well as O11, O12, O21, and O22).</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="networks-and-collocation-analysis.html#cb36-1" tabindex="-1"></a><span class="co"># tokenize the &#39;sentences&#39; data using quanteda package</span></span>
<span id="cb36-2"><a href="networks-and-collocation-analysis.html#cb36-2" tabindex="-1"></a>sentences <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="networks-and-collocation-analysis.html#cb36-3" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(<span class="at">remove_punct =</span> T,</span>
<span id="cb36-4"><a href="networks-and-collocation-analysis.html#cb36-4" tabindex="-1"></a>                   <span class="at">remove_symbols =</span> T,</span>
<span id="cb36-5"><a href="networks-and-collocation-analysis.html#cb36-5" tabindex="-1"></a>                   <span class="at">remove_numbers =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="networks-and-collocation-analysis.html#cb36-6" tabindex="-1"></a>  </span>
<span id="cb36-7"><a href="networks-and-collocation-analysis.html#cb36-7" tabindex="-1"></a>  <span class="co"># remove stopwords</span></span>
<span id="cb36-8"><a href="networks-and-collocation-analysis.html#cb36-8" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">&quot;en&quot;</span>))  <span class="sc">%&gt;%</span></span>
<span id="cb36-9"><a href="networks-and-collocation-analysis.html#cb36-9" tabindex="-1"></a></span>
<span id="cb36-10"><a href="networks-and-collocation-analysis.html#cb36-10" tabindex="-1"></a>  <span class="co"># create a document-feature matrix (dfm) using quanteda</span></span>
<span id="cb36-11"><a href="networks-and-collocation-analysis.html#cb36-11" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-12"><a href="networks-and-collocation-analysis.html#cb36-12" tabindex="-1"></a></span>
<span id="cb36-13"><a href="networks-and-collocation-analysis.html#cb36-13" tabindex="-1"></a>  <span class="co"># create a feature co-occurrence matrix (fcm) without considering trigrams</span></span>
<span id="cb36-14"><a href="networks-and-collocation-analysis.html#cb36-14" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">fcm</span>(<span class="at">tri =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-15"><a href="networks-and-collocation-analysis.html#cb36-15" tabindex="-1"></a></span>
<span id="cb36-16"><a href="networks-and-collocation-analysis.html#cb36-16" tabindex="-1"></a>  <span class="co"># tidy the data using tidytext package</span></span>
<span id="cb36-17"><a href="networks-and-collocation-analysis.html#cb36-17" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">tidy</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-18"><a href="networks-and-collocation-analysis.html#cb36-18" tabindex="-1"></a></span>
<span id="cb36-19"><a href="networks-and-collocation-analysis.html#cb36-19" tabindex="-1"></a>  <span class="co"># rearrange columns for better readability</span></span>
<span id="cb36-20"><a href="networks-and-collocation-analysis.html#cb36-20" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(term, document, count) <span class="sc">%&gt;%</span></span>
<span id="cb36-21"><a href="networks-and-collocation-analysis.html#cb36-21" tabindex="-1"></a></span>
<span id="cb36-22"><a href="networks-and-collocation-analysis.html#cb36-22" tabindex="-1"></a>  <span class="co"># rename columns for better interpretation</span></span>
<span id="cb36-23"><a href="networks-and-collocation-analysis.html#cb36-23" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">w1 =</span> <span class="dv">1</span>,</span>
<span id="cb36-24"><a href="networks-and-collocation-analysis.html#cb36-24" tabindex="-1"></a>                <span class="at">w2 =</span> <span class="dv">2</span>,</span>
<span id="cb36-25"><a href="networks-and-collocation-analysis.html#cb36-25" tabindex="-1"></a>                <span class="at">O11 =</span> <span class="dv">3</span>) <span class="ot">-&gt;</span> coll_basic</span>
<span id="cb36-26"><a href="networks-and-collocation-analysis.html#cb36-26" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb36-27"><a href="networks-and-collocation-analysis.html#cb36-27" tabindex="-1"></a>coll_basic <span class="sc">%&gt;%</span></span>
<span id="cb36-28"><a href="networks-and-collocation-analysis.html#cb36-28" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-29"><a href="networks-and-collocation-analysis.html#cb36-29" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) </span></code></pre></div>
<pre><code>##     w1        w2 O11
## 1  one       one  92
## 2  one reviewers   4
## 3  one mentioned   6
## 4  one  watching  25
## 5  one      just  67
## 6  one        oz   2
## 7  one   episode  14
## 8  one        ll   7
## 9  one    hooked   3
## 10 one     right  12</code></pre>
<p>We now enhance our table by calculating all observed frequencies (O11, O12, O21, O22) as well as row totals (R1, R2), column totals (C1, C2), and the overall total (N).</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="networks-and-collocation-analysis.html#cb38-1" tabindex="-1"></a>  <span class="co"># calculate the total number of observations (N)</span></span>
<span id="cb38-2"><a href="networks-and-collocation-analysis.html#cb38-2" tabindex="-1"></a>coll_basic <span class="sc">%&gt;%</span>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">N =</span> <span class="fu">sum</span>(O11)) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="networks-and-collocation-analysis.html#cb38-3" tabindex="-1"></a></span>
<span id="cb38-4"><a href="networks-and-collocation-analysis.html#cb38-4" tabindex="-1"></a>  <span class="co"># calculate R1, O12, and R2</span></span>
<span id="cb38-5"><a href="networks-and-collocation-analysis.html#cb38-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(w1) <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="networks-and-collocation-analysis.html#cb38-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">R1 =</span> <span class="fu">sum</span>(O11),</span>
<span id="cb38-7"><a href="networks-and-collocation-analysis.html#cb38-7" tabindex="-1"></a>                <span class="at">O12 =</span> R1 <span class="sc">-</span> O11,</span>
<span id="cb38-8"><a href="networks-and-collocation-analysis.html#cb38-8" tabindex="-1"></a>                <span class="at">R2 =</span> N <span class="sc">-</span> R1) <span class="sc">%&gt;%</span></span>
<span id="cb38-9"><a href="networks-and-collocation-analysis.html#cb38-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>(w1) <span class="sc">%&gt;%</span></span>
<span id="cb38-10"><a href="networks-and-collocation-analysis.html#cb38-10" tabindex="-1"></a></span>
<span id="cb38-11"><a href="networks-and-collocation-analysis.html#cb38-11" tabindex="-1"></a>  <span class="co"># calculate C1, O21, C2, and O22</span></span>
<span id="cb38-12"><a href="networks-and-collocation-analysis.html#cb38-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(w2) <span class="sc">%&gt;%</span></span>
<span id="cb38-13"><a href="networks-and-collocation-analysis.html#cb38-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">C1 =</span> <span class="fu">sum</span>(O11),</span>
<span id="cb38-14"><a href="networks-and-collocation-analysis.html#cb38-14" tabindex="-1"></a>                <span class="at">O21 =</span> C1 <span class="sc">-</span> O11,</span>
<span id="cb38-15"><a href="networks-and-collocation-analysis.html#cb38-15" tabindex="-1"></a>                <span class="at">C2 =</span> N <span class="sc">-</span> C1,</span>
<span id="cb38-16"><a href="networks-and-collocation-analysis.html#cb38-16" tabindex="-1"></a>                <span class="at">O22 =</span> R2 <span class="sc">-</span> O21) <span class="ot">-&gt;</span> colldf</span>
<span id="cb38-17"><a href="networks-and-collocation-analysis.html#cb38-17" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb38-18"><a href="networks-and-collocation-analysis.html#cb38-18" tabindex="-1"></a>colldf <span class="sc">%&gt;%</span></span>
<span id="cb38-19"><a href="networks-and-collocation-analysis.html#cb38-19" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb38-20"><a href="networks-and-collocation-analysis.html#cb38-20" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##     w1        w2 O11       N    R1   O12      R2    C1   O21      C2     O22
## 1  one       one  92 1899996 15293 15201 1884703 15293 15201 1884703 1869502
## 2  one reviewers   4 1899996 15293 15289 1884703   194   190 1899802 1884513
## 3  one mentioned   6 1899996 15293 15287 1884703   418   412 1899578 1884291
## 4  one  watching  25 1899996 15293 15268 1884703  2299  2274 1897697 1882429
## 5  one      just  67 1899996 15293 15226 1884703  7671  7604 1892325 1877099
## 6  one        oz   2 1899996 15293 15291 1884703   145   143 1899851 1884560
## 7  one   episode  14 1899996 15293 15279 1884703   859   845 1899137 1883858
## 8  one        ll   7 1899996 15293 15286 1884703  1518  1511 1898478 1883192
## 9  one    hooked   3 1899996 15293 15290 1884703   101    98 1899895 1884605
## 10 one     right  12 1899996 15293 15281 1884703  1591  1579 1898405 1883124</code></pre>
<p>We could calculate all collocations in the corpus (based on co-occurrence within the same sentence) or we can find collocations of a specific term - here, we will find collocations fo the term <em>movie</em>.</p>
<p>Now that we have all the relevant information, we will reduce the data and add additional information to the data so that the computing of the association measures runs smoothly.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="networks-and-collocation-analysis.html#cb40-1" tabindex="-1"></a><span class="co"># reduce and complement data</span></span>
<span id="cb40-2"><a href="networks-and-collocation-analysis.html#cb40-2" tabindex="-1"></a>colldf <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="networks-and-collocation-analysis.html#cb40-3" tabindex="-1"></a><span class="co"># determine Term</span></span>
<span id="cb40-4"><a href="networks-and-collocation-analysis.html#cb40-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(w1 <span class="sc">==</span> <span class="st">&quot;movie&quot;</span>,</span>
<span id="cb40-5"><a href="networks-and-collocation-analysis.html#cb40-5" tabindex="-1"></a>                <span class="co"># set minimum number of occurrences of w2</span></span>
<span id="cb40-6"><a href="networks-and-collocation-analysis.html#cb40-6" tabindex="-1"></a>                (O11<span class="sc">+</span>O21) <span class="sc">&gt;</span> <span class="dv">10</span>,</span>
<span id="cb40-7"><a href="networks-and-collocation-analysis.html#cb40-7" tabindex="-1"></a>                <span class="co"># set minimum number of co-occurrences of w1 and w2</span></span>
<span id="cb40-8"><a href="networks-and-collocation-analysis.html#cb40-8" tabindex="-1"></a>                O11 <span class="sc">&gt;</span> <span class="dv">5</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb40-9"><a href="networks-and-collocation-analysis.html#cb40-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-10"><a href="networks-and-collocation-analysis.html#cb40-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">E11 =</span> R1 <span class="sc">*</span> C1 <span class="sc">/</span> N, </span>
<span id="cb40-11"><a href="networks-and-collocation-analysis.html#cb40-11" tabindex="-1"></a>                <span class="at">E12 =</span> R1 <span class="sc">*</span> C2 <span class="sc">/</span> N,</span>
<span id="cb40-12"><a href="networks-and-collocation-analysis.html#cb40-12" tabindex="-1"></a>                <span class="at">E21 =</span> R2 <span class="sc">*</span> C1 <span class="sc">/</span> N, </span>
<span id="cb40-13"><a href="networks-and-collocation-analysis.html#cb40-13" tabindex="-1"></a>                <span class="at">E22 =</span> R2 <span class="sc">*</span> C2 <span class="sc">/</span> N)  <span class="ot">-&gt;</span> colldf_redux</span>
<span id="cb40-14"><a href="networks-and-collocation-analysis.html#cb40-14" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb40-15"><a href="networks-and-collocation-analysis.html#cb40-15" tabindex="-1"></a>colldf_redux <span class="sc">%&gt;%</span></span>
<span id="cb40-16"><a href="networks-and-collocation-analysis.html#cb40-16" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-17"><a href="networks-and-collocation-analysis.html#cb40-17" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##       w1        w2 O11       N    R1   O12      R2    C1   O21      C2     O22
## 1  movie       one 191 1899996 19401 19210 1880595 15293 15102 1884703 1865493
## 2  movie reviewers   6 1899996 19401 19395 1880595   194   188 1899802 1880407
## 3  movie mentioned   7 1899996 19401 19394 1880595   418   411 1899578 1880184
## 4  movie  watching  49 1899996 19401 19352 1880595  2299  2250 1897697 1878345
## 5  movie      just 103 1899996 19401 19298 1880595  7671  7568 1892325 1873027
## 6  movie        ll  21 1899996 19401 19380 1880595  1518  1497 1898478 1879098
## 7  movie     right  12 1899996 19401 19389 1880595  1591  1579 1898405 1879016
## 8  movie   exactly   9 1899996 19401 19392 1880595   723   714 1899273 1879881
## 9  movie     first  60 1899996 19401 19341 1880595  5206  5146 1894790 1875449
## 10 movie     thing  28 1899996 19401 19373 1880595  2156  2128 1897840 1878467
##           E11      E12        E21     E22
## 1  156.157957 19244.84 15136.8420 1865458
## 2    1.980948 19399.02   192.0191 1880403
## 3    4.268229 19396.73   413.7318 1880181
## 4   23.475259 19377.52  2275.5247 1878319
## 5   78.329150 19322.67  7592.6709 1873002
## 6   15.500411 19385.50  1502.4996 1879093
## 7   16.245819 19384.75  1574.7542 1879020
## 8    7.382607 19393.62   715.6174 1879879
## 9   53.158852 19347.84  5152.8411 1875442
## 10  22.015076 19378.98  2133.9849 1878461</code></pre>
<p>Now we can calculate the collocation statistics (the association strength).</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="networks-and-collocation-analysis.html#cb42-1" tabindex="-1"></a>colldf_redux <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="networks-and-collocation-analysis.html#cb42-2" tabindex="-1"></a>    <span class="co"># determine number of rows</span></span>
<span id="cb42-3"><a href="networks-and-collocation-analysis.html#cb42-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Rws =</span> <span class="fu">nrow</span>(.)) <span class="sc">%&gt;%</span>  </span>
<span id="cb42-4"><a href="networks-and-collocation-analysis.html#cb42-4" tabindex="-1"></a>    <span class="co"># work row-wise</span></span>
<span id="cb42-5"><a href="networks-and-collocation-analysis.html#cb42-5" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="networks-and-collocation-analysis.html#cb42-6" tabindex="-1"></a>    <span class="co"># calculate fishers&#39; exact test</span></span>
<span id="cb42-7"><a href="networks-and-collocation-analysis.html#cb42-7" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">as.vector</span>(<span class="fu">unlist</span>(<span class="fu">fisher.test</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(O11, O12, O21, O22), </span>
<span id="cb42-8"><a href="networks-and-collocation-analysis.html#cb42-8" tabindex="-1"></a>                                                        <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T))[<span class="dv">1</span>]))) <span class="sc">%&gt;%</span></span>
<span id="cb42-9"><a href="networks-and-collocation-analysis.html#cb42-9" tabindex="-1"></a>    <span class="co"># extract AM</span></span>
<span id="cb42-10"><a href="networks-and-collocation-analysis.html#cb42-10" tabindex="-1"></a>    <span class="co"># 1. bias towards top left</span></span>
<span id="cb42-11"><a href="networks-and-collocation-analysis.html#cb42-11" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">btl_O12 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, <span class="dv">0</span>, R1<span class="sc">-</span>C1),</span>
<span id="cb42-12"><a href="networks-and-collocation-analysis.html#cb42-12" tabindex="-1"></a>                  <span class="at">btl_O11 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, R1, R1<span class="sc">-</span>btl_O12),</span>
<span id="cb42-13"><a href="networks-and-collocation-analysis.html#cb42-13" tabindex="-1"></a>                  <span class="at">btl_O21 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, C1<span class="sc">-</span>R1, C1<span class="sc">-</span>btl_O11),</span>
<span id="cb42-14"><a href="networks-and-collocation-analysis.html#cb42-14" tabindex="-1"></a>                  <span class="at">btl_O22 =</span> <span class="fu">ifelse</span>(C1 <span class="sc">&gt;</span> R1, C2, C2<span class="sc">-</span>btl_O12),</span>
<span id="cb42-15"><a href="networks-and-collocation-analysis.html#cb42-15" tabindex="-1"></a>                  </span>
<span id="cb42-16"><a href="networks-and-collocation-analysis.html#cb42-16" tabindex="-1"></a>    <span class="co"># 2. bias towards top right</span></span>
<span id="cb42-17"><a href="networks-and-collocation-analysis.html#cb42-17" tabindex="-1"></a>                  <span class="at">btr_O11 =</span> <span class="dv">0</span>, </span>
<span id="cb42-18"><a href="networks-and-collocation-analysis.html#cb42-18" tabindex="-1"></a>                  <span class="at">btr_O21 =</span> R1,</span>
<span id="cb42-19"><a href="networks-and-collocation-analysis.html#cb42-19" tabindex="-1"></a>                  <span class="at">btr_O12 =</span> C1,</span>
<span id="cb42-20"><a href="networks-and-collocation-analysis.html#cb42-20" tabindex="-1"></a>                  <span class="at">btr_O22 =</span> C2<span class="sc">-</span>R1) <span class="sc">%&gt;%</span></span>
<span id="cb42-21"><a href="networks-and-collocation-analysis.html#cb42-21" tabindex="-1"></a>    </span>
<span id="cb42-22"><a href="networks-and-collocation-analysis.html#cb42-22" tabindex="-1"></a>    <span class="co"># 3. calculate AM</span></span>
<span id="cb42-23"><a href="networks-and-collocation-analysis.html#cb42-23" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">upp =</span> btl_O11<span class="sc">/</span>R1,</span>
<span id="cb42-24"><a href="networks-and-collocation-analysis.html#cb42-24" tabindex="-1"></a>                  <span class="at">low =</span> btr_O11<span class="sc">/</span>R1,</span>
<span id="cb42-25"><a href="networks-and-collocation-analysis.html#cb42-25" tabindex="-1"></a>                  <span class="at">op =</span> O11<span class="sc">/</span>R1) <span class="sc">%&gt;%</span></span>
<span id="cb42-26"><a href="networks-and-collocation-analysis.html#cb42-26" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">AM =</span> op <span class="sc">/</span> upp) <span class="sc">%&gt;%</span></span>
<span id="cb42-27"><a href="networks-and-collocation-analysis.html#cb42-27" tabindex="-1"></a>    </span>
<span id="cb42-28"><a href="networks-and-collocation-analysis.html#cb42-28" tabindex="-1"></a>    <span class="co"># remove superfluous columns</span></span>
<span id="cb42-29"><a href="networks-and-collocation-analysis.html#cb42-29" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>btr_O21, <span class="sc">-</span>btr_O12, <span class="sc">-</span>btr_O22, <span class="sc">-</span>btl_O12, <span class="sc">-</span>btl_O11, <span class="sc">-</span>btl_O21, <span class="sc">-</span>btl_O22, <span class="sc">-</span>btr_O11)  <span class="sc">%&gt;%</span></span>
<span id="cb42-30"><a href="networks-and-collocation-analysis.html#cb42-30" tabindex="-1"></a></span>
<span id="cb42-31"><a href="networks-and-collocation-analysis.html#cb42-31" tabindex="-1"></a>    <span class="co"># extract x2 statistics</span></span>
<span id="cb42-32"><a href="networks-and-collocation-analysis.html#cb42-32" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">X2 =</span> (O11<span class="sc">-</span>E11)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>E11 <span class="sc">+</span> (O12<span class="sc">-</span>E12)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>E12 <span class="sc">+</span> (O21<span class="sc">-</span>E21)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>E21 <span class="sc">+</span> (O22<span class="sc">-</span>E22)<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>E22) <span class="sc">%&gt;%</span></span>
<span id="cb42-33"><a href="networks-and-collocation-analysis.html#cb42-33" tabindex="-1"></a></span>
<span id="cb42-34"><a href="networks-and-collocation-analysis.html#cb42-34" tabindex="-1"></a>    <span class="co"># extract association measures</span></span>
<span id="cb42-35"><a href="networks-and-collocation-analysis.html#cb42-35" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">phi =</span> <span class="fu">sqrt</span>((X2 <span class="sc">/</span> N)),</span>
<span id="cb42-36"><a href="networks-and-collocation-analysis.html#cb42-36" tabindex="-1"></a>                <span class="at">MI =</span> <span class="fu">log2</span>(O11 <span class="sc">/</span> E11),</span>
<span id="cb42-37"><a href="networks-and-collocation-analysis.html#cb42-37" tabindex="-1"></a>                <span class="at">DeltaP12 =</span> (O11 <span class="sc">/</span> (O11 <span class="sc">+</span> O12)) <span class="sc">-</span> (O21 <span class="sc">/</span> (O21 <span class="sc">+</span> O22)),</span>
<span id="cb42-38"><a href="networks-and-collocation-analysis.html#cb42-38" tabindex="-1"></a>                <span class="at">DeltaP21 =</span>  (O11 <span class="sc">/</span> (O11 <span class="sc">+</span> O21)) <span class="sc">-</span> (O21 <span class="sc">/</span> (O12 <span class="sc">+</span> O22)),</span>
<span id="cb42-39"><a href="networks-and-collocation-analysis.html#cb42-39" tabindex="-1"></a>                <span class="at">LogOddsRatio =</span> <span class="fu">log</span>(((O11 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O22 <span class="sc">+</span> <span class="fl">0.5</span>))  <span class="sc">/</span> ( (O12 <span class="sc">+</span> <span class="fl">0.5</span>) <span class="sc">*</span> (O21 <span class="sc">+</span> <span class="fl">0.5</span>) ))) <span class="sc">%&gt;%</span></span>
<span id="cb42-40"><a href="networks-and-collocation-analysis.html#cb42-40" tabindex="-1"></a></span>
<span id="cb42-41"><a href="networks-and-collocation-analysis.html#cb42-41" tabindex="-1"></a>    <span class="co"># determine Bonferroni corrected significance</span></span>
<span id="cb42-42"><a href="networks-and-collocation-analysis.html#cb42-42" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Sig_corrected =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">05</span> <span class="sc">~</span> <span class="st">&quot;n.s.&quot;</span>,</span>
<span id="cb42-43"><a href="networks-and-collocation-analysis.html#cb42-43" tabindex="-1"></a>                                                 p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">01</span> <span class="sc">~</span> <span class="st">&quot;p &lt; .05*&quot;</span>,</span>
<span id="cb42-44"><a href="networks-and-collocation-analysis.html#cb42-44" tabindex="-1"></a>                                                 p <span class="sc">/</span> Rws <span class="sc">&gt;</span> .<span class="dv">001</span> <span class="sc">~</span> <span class="st">&quot;p &lt; .01**&quot;</span>,</span>
<span id="cb42-45"><a href="networks-and-collocation-analysis.html#cb42-45" tabindex="-1"></a>                                                 p <span class="sc">/</span> Rws <span class="sc">&lt;=</span> .<span class="dv">001</span> <span class="sc">~</span> <span class="st">&quot;p &lt; .001***&quot;</span>,</span>
<span id="cb42-46"><a href="networks-and-collocation-analysis.html#cb42-46" tabindex="-1"></a>                                                 T <span class="sc">~</span> <span class="st">&quot;N.A.&quot;</span>)) <span class="sc">%&gt;%</span>  </span>
<span id="cb42-47"><a href="networks-and-collocation-analysis.html#cb42-47" tabindex="-1"></a>    <span class="co"># round p-value</span></span>
<span id="cb42-48"><a href="networks-and-collocation-analysis.html#cb42-48" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">round</span>(p, <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-49"><a href="networks-and-collocation-analysis.html#cb42-49" tabindex="-1"></a>    <span class="co"># filter out non significant results</span></span>
<span id="cb42-50"><a href="networks-and-collocation-analysis.html#cb42-50" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(Sig_corrected <span class="sc">!=</span> <span class="st">&quot;n.s.&quot;</span>,</span>
<span id="cb42-51"><a href="networks-and-collocation-analysis.html#cb42-51" tabindex="-1"></a>                <span class="co"># filter out instances where the w1 and w2 repel each other</span></span>
<span id="cb42-52"><a href="networks-and-collocation-analysis.html#cb42-52" tabindex="-1"></a>                E11 <span class="sc">&lt;</span> O11) <span class="sc">%&gt;%</span></span>
<span id="cb42-53"><a href="networks-and-collocation-analysis.html#cb42-53" tabindex="-1"></a>    <span class="co"># arrange by phi (association measure)</span></span>
<span id="cb42-54"><a href="networks-and-collocation-analysis.html#cb42-54" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>AM) <span class="sc">%&gt;%</span></span>
<span id="cb42-55"><a href="networks-and-collocation-analysis.html#cb42-55" tabindex="-1"></a>    <span class="co"># remove superfluous columns</span></span>
<span id="cb42-56"><a href="networks-and-collocation-analysis.html#cb42-56" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">any_of</span>(<span class="fu">c</span>(<span class="st">&quot;TermCoocFreq&quot;</span>, <span class="st">&quot;AllFreq&quot;</span>, <span class="st">&quot;NRows&quot;</span>, <span class="st">&quot;E12&quot;</span>, <span class="st">&quot;E21&quot;</span>, </span>
<span id="cb42-57"><a href="networks-and-collocation-analysis.html#cb42-57" tabindex="-1"></a>                            <span class="st">&quot;E22&quot;</span>, <span class="st">&quot;O12&quot;</span>, <span class="st">&quot;O21&quot;</span>, <span class="st">&quot;O22&quot;</span>, <span class="st">&quot;R1&quot;</span>, <span class="st">&quot;R2&quot;</span>, <span class="st">&quot;C1&quot;</span>, <span class="st">&quot;C2&quot;</span>))) <span class="ot">-&gt;</span> assoc_tb</span>
<span id="cb42-58"><a href="networks-and-collocation-analysis.html#cb42-58" tabindex="-1"></a><span class="co"># inspect</span></span>
<span id="cb42-59"><a href="networks-and-collocation-analysis.html#cb42-59" tabindex="-1"></a>assoc_tb <span class="sc">%&gt;%</span></span>
<span id="cb42-60"><a href="networks-and-collocation-analysis.html#cb42-60" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-61"><a href="networks-and-collocation-analysis.html#cb42-61" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##       w1         w2 O11       N       E11 Rws       p         upp low
## 1  movie      dogma   6 1899996 0.4594983 683 0.00001 0.002319468   0
## 2  movie     critic   6 1899996 0.4799205 683 0.00001 0.002422556   0
## 3  movie horehounds   6 1899996 0.6739309 683 0.00006 0.003401887   0
## 4  movie depressing   6 1899996 0.6739309 683 0.00006 0.003401887   0
## 5  movie    goriest   7 1899996 0.7964638 683 0.00002 0.004020411   0
## 6  movie       pegg   8 1899996 1.2865953 683 0.00005 0.006494511   0
## 7  movie       porn  16 1899996 2.6446682 683 0.00000 0.013349827   0
## 8  movie     ledger   6 1899996 1.0211074 683 0.00060 0.005154373   0
## 9  movie   laughter   8 1899996 1.3682839 683 0.00008 0.006906860   0
## 10 movie     makers   6 1899996 1.0823739 683 0.00081 0.005463636   0
##              op         AM       X2         phi       MI     DeltaP12
## 1  0.0003092624 0.13333333 67.49661 0.005960252 3.706831 0.0002885243
## 2  0.0003092624 0.12765957 64.14895 0.005810566 3.644095 0.0002874608
## 3  0.0003092624 0.09090909 42.52759 0.004731066 3.154290 0.0002773576
## 4  0.0003092624 0.09090909 42.52759 0.004731066 3.154290 0.0002773576
## 5  0.0003608061 0.08974359 48.81888 0.005068945 3.135674 0.0003230521
## 6  0.0004123499 0.06349206 35.39402 0.004316071 2.636442 0.0003496038
## 7  0.0008246998 0.06177606 68.14826 0.005988955 2.596913 0.0006954853
## 8  0.0003092624 0.06000000 24.52869 0.003593030 2.554828 0.0002592782
## 9  0.0004123499 0.05970149 32.47608 0.004134333 2.547632 0.0003453498
## 10 0.0003092624 0.05660377 22.57436 0.003446921 2.470764 0.0002560877
##      DeltaP21 LogOddsRatio Sig_corrected
## 1  0.13331281     2.769783   p &lt; .001***
## 2  0.12763799     2.720390   p &lt; .001***
## 3  0.09087751     2.343430   p &lt; .001***
## 4  0.09087751     2.343430   p &lt; .001***
## 5  0.08970622     2.319522   p &lt; .001***
## 6  0.06342995     1.939496   p &lt; .001***
## 7  0.06164815     1.882933   p &lt; .001***
## 8  0.05995052     1.897455   p &lt; .001***
## 9  0.05963517     1.874163   p &lt; .001***
## 10 0.05655114     1.835894   p &lt; .001***</code></pre>
<p>The resulting table shows collocations in the example text descending by collocation strength.</p>
<p>We now use a <a href="https://ladal.edu.au/net.html">network graph</a>, or network for short, to visualise the collocations of our keyword (<em>alice</em>). Networks are a powerful and versatile visual representation used to depict relationships or connections among various elements. Network graphs typically consist of nodes, representing individual entities, and edges, indicating the connections or interactions between these entities.</p>
<p>We start by extracting the tokens that we want to show (the top 20 collocates of <em>movie</em>).</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="networks-and-collocation-analysis.html#cb44-1" tabindex="-1"></a><span class="co"># sort the coocStatz data frame in descending order based on the &#39;phi&#39; column</span></span>
<span id="cb44-2"><a href="networks-and-collocation-analysis.html#cb44-2" tabindex="-1"></a>top20colls <span class="ot">&lt;-</span> assoc_tb <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="networks-and-collocation-analysis.html#cb44-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>phi) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="networks-and-collocation-analysis.html#cb44-4" tabindex="-1"></a>  <span class="co"># select the top 20 rows after sorting</span></span>
<span id="cb44-5"><a href="networks-and-collocation-analysis.html#cb44-5" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-6"><a href="networks-and-collocation-analysis.html#cb44-6" tabindex="-1"></a>  <span class="co"># extract the &#39;token&#39; column </span></span>
<span id="cb44-7"><a href="networks-and-collocation-analysis.html#cb44-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(w2) <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="networks-and-collocation-analysis.html#cb44-8" tabindex="-1"></a>  <span class="co"># add keyword</span></span>
<span id="cb44-9"><a href="networks-and-collocation-analysis.html#cb44-9" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;movie&quot;</span>)</span>
<span id="cb44-10"><a href="networks-and-collocation-analysis.html#cb44-10" tabindex="-1"></a><span class="co"># inspect the top 20 tokens with the highest &#39;phi&#39; values</span></span>
<span id="cb44-11"><a href="networks-and-collocation-analysis.html#cb44-11" tabindex="-1"></a>top20colls</span></code></pre></div>
<pre><code>##  [1] &quot;watch&quot;      &quot;saw&quot;        &quot;see&quot;        &quot;good&quot;       &quot;watched&quot;   
##  [6] &quot;seen&quot;       &quot;think&quot;      &quot;porn&quot;       &quot;dogma&quot;      &quot;critic&quot;    
## [11] &quot;lot&quot;        &quot;movies&quot;     &quot;goriest&quot;    &quot;relations&quot;  &quot;really&quot;    
## [16] &quot;enjoy&quot;      &quot;will&quot;       &quot;gore&quot;       &quot;horehounds&quot; &quot;depressing&quot;
## [21] &quot;movie&quot;</code></pre>
<p>We then need to generate a feature co-occurrence matrix from a document-feature matrix based on the cleaned, lower case sentences of our text.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="networks-and-collocation-analysis.html#cb46-1" tabindex="-1"></a><span class="co"># tokenize the &#39;sentences&#39; data using quanteda package</span></span>
<span id="cb46-2"><a href="networks-and-collocation-analysis.html#cb46-2" tabindex="-1"></a>keyword_fcm <span class="ot">&lt;-</span> sentences <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="networks-and-collocation-analysis.html#cb46-3" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">tokens</span>(<span class="at">remove_punct =</span> T,</span>
<span id="cb46-4"><a href="networks-and-collocation-analysis.html#cb46-4" tabindex="-1"></a>                   <span class="at">remove_symbols =</span> T,</span>
<span id="cb46-5"><a href="networks-and-collocation-analysis.html#cb46-5" tabindex="-1"></a>                   <span class="at">remove_numbers =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb46-6"><a href="networks-and-collocation-analysis.html#cb46-6" tabindex="-1"></a>  </span>
<span id="cb46-7"><a href="networks-and-collocation-analysis.html#cb46-7" tabindex="-1"></a>  <span class="co"># remove stopwords</span></span>
<span id="cb46-8"><a href="networks-and-collocation-analysis.html#cb46-8" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">&quot;en&quot;</span>))  <span class="sc">%&gt;%</span></span>
<span id="cb46-9"><a href="networks-and-collocation-analysis.html#cb46-9" tabindex="-1"></a></span>
<span id="cb46-10"><a href="networks-and-collocation-analysis.html#cb46-10" tabindex="-1"></a>  <span class="co"># create a document-feature matrix (dfm) using quanteda</span></span>
<span id="cb46-11"><a href="networks-and-collocation-analysis.html#cb46-11" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb46-12"><a href="networks-and-collocation-analysis.html#cb46-12" tabindex="-1"></a>  </span>
<span id="cb46-13"><a href="networks-and-collocation-analysis.html#cb46-13" tabindex="-1"></a>  <span class="co"># select features based on &#39;top20colls&#39; and the term &quot;movie&quot; pattern</span></span>
<span id="cb46-14"><a href="networks-and-collocation-analysis.html#cb46-14" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">dfm_select</span>(<span class="at">pattern =</span> <span class="fu">c</span>(top20colls, <span class="st">&quot;movie&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-15"><a href="networks-and-collocation-analysis.html#cb46-15" tabindex="-1"></a></span>
<span id="cb46-16"><a href="networks-and-collocation-analysis.html#cb46-16" tabindex="-1"></a>  <span class="co"># create a feature co-occurrence matrix (fcm) without considering trigrams</span></span>
<span id="cb46-17"><a href="networks-and-collocation-analysis.html#cb46-17" tabindex="-1"></a>  quanteda<span class="sc">::</span><span class="fu">fcm</span>(<span class="at">tri =</span> <span class="cn">FALSE</span>) </span>
<span id="cb46-18"><a href="networks-and-collocation-analysis.html#cb46-18" tabindex="-1"></a><span class="co"># inspect the first 6 rows and 6 columns of the resulting fcm</span></span>
<span id="cb46-19"><a href="networks-and-collocation-analysis.html#cb46-19" tabindex="-1"></a>keyword_fcm[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>## Feature co-occurrence matrix of: 6 by 6 features.
##          features
## features  saw watched think seen really movie
##   saw       4       2     4    7      8    57
##   watched   2       2     9    3      6    42
##   think     4       9    18   15     39   106
##   seen      7       3    15    8     14    88
##   really    8       6    39   14     13   114
##   movie    57      42   106   88    114   191</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="networks-and-collocation-analysis.html#cb48-1" tabindex="-1"></a><span class="co"># create a network plot using the fcm</span></span>
<span id="cb48-2"><a href="networks-and-collocation-analysis.html#cb48-2" tabindex="-1"></a>quanteda.textplots<span class="sc">::</span><span class="fu">textplot_network</span>(keyword_fcm,</span>
<span id="cb48-3"><a href="networks-and-collocation-analysis.html#cb48-3" tabindex="-1"></a>                                     <span class="co"># set the transparency of edges to 0.8 for visibility</span></span>
<span id="cb48-4"><a href="networks-and-collocation-analysis.html#cb48-4" tabindex="-1"></a>                                     <span class="at">edge_alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb48-5"><a href="networks-and-collocation-analysis.html#cb48-5" tabindex="-1"></a>                                     <span class="co"># set the color of edges to gray</span></span>
<span id="cb48-6"><a href="networks-and-collocation-analysis.html#cb48-6" tabindex="-1"></a>                                     <span class="at">edge_color =</span> <span class="st">&quot;gray&quot;</span>,</span>
<span id="cb48-7"><a href="networks-and-collocation-analysis.html#cb48-7" tabindex="-1"></a>                                     <span class="co"># set the size of edges to 2 for better visibility</span></span>
<span id="cb48-8"><a href="networks-and-collocation-analysis.html#cb48-8" tabindex="-1"></a>                                     <span class="at">edge_size =</span> <span class="dv">2</span>,</span>
<span id="cb48-9"><a href="networks-and-collocation-analysis.html#cb48-9" tabindex="-1"></a>                                     <span class="co"># adjust the size of vertex labels </span></span>
<span id="cb48-10"><a href="networks-and-collocation-analysis.html#cb48-10" tabindex="-1"></a>                                     <span class="co"># based on the logarithm of row sums of the fcm</span></span>
<span id="cb48-11"><a href="networks-and-collocation-analysis.html#cb48-11" tabindex="-1"></a>                                     <span class="at">vertex_labelsize =</span> <span class="fu">log</span>(<span class="fu">rowSums</span>(keyword_fcm)))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="keyword-detection.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercise-3-manual-topic-modelling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MartinSchweinberger/IntroR_WS/edit/main/03-ta.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/MartinSchweinberger/IntroR_WS/blob/main/03-ta.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
